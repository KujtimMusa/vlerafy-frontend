{"version":3,"file":"static/chunks/app/dashboard/page-93d546a81f8b003e.js","mappings":"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","sources":["webpack://_N_E/?1b75","webpack://_N_E/./app/dashboard/page.tsx","webpack://_N_E/./node_modules/next/dist/compiled/react/cjs/react-jsx-runtime.production.min.js","webpack://_N_E/./node_modules/next/dist/compiled/react/jsx-runtime.js","webpack://_N_E/./node_modules/next/navigation.js","webpack://_N_E/<anon>"],"sourcesContent":["import(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Kujti\\\\Desktop\\\\Trading Tools\\\\MVP PRICE\\\\frontend\\\\app\\\\dashboard\\\\page.tsx\")","'use client';\n\nimport { useEffect, useState, Suspense } from 'react';\nimport { useSearchParams, useRouter } from 'next/navigation';\n\n/**\n * Dashboard Redirect Handler Content\n * Wrapped in Suspense für useSearchParams()\n */\nfunction DashboardContent() {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  const [status, setStatus] = useState<'loading' | 'redirecting' | 'error'>('loading');\n\n  useEffect(() => {\n    try {\n      const shopId = searchParams.get('shop_id');\n      const installed = searchParams.get('installed');\n      const mode = searchParams.get('mode');\n\n      console.log('[Dashboard] Received params:', { shopId, installed, mode });\n\n      if (shopId) {\n        // Speichere shop_id in localStorage\n        if (typeof window !== 'undefined') {\n          localStorage.setItem('shop_id', shopId);\n          localStorage.setItem('current_shop_id', shopId);\n          \n          // Speichere auch mode, falls vorhanden (default: 'live' für Shopify)\n          localStorage.setItem('shop_mode', mode || 'live');\n          \n          console.log('[Dashboard] Saved to localStorage:', {\n            shop_id: shopId,\n            current_shop_id: shopId,\n            mode: mode || 'live'\n          });\n\n          // Dispatche Event, damit useShop reagiert\n          window.dispatchEvent(new CustomEvent('shop-switched', {\n            detail: { \n              shopId: parseInt(shopId), \n              installed: installed === 'true',\n              mode: mode || 'live'\n            }\n          }));\n\n          setStatus('redirecting');\n\n          // Kurze Verzögerung, dann redirect zur Root-Route\n          // Nutze replace statt push, damit Browser-History sauber bleibt\n          setTimeout(() => {\n            // Redirect zur Root-Route (ohne Query-Parameter)\n            router.replace('/');\n          }, 300);\n        } else {\n          // Server-side: Direkt redirect\n          router.replace('/');\n        }\n      } else {\n        // Keine shop_id → direkt zu Root\n        console.log('[Dashboard] No shop_id found, redirecting to root');\n        router.replace('/');\n      }\n    } catch (error) {\n      console.error('[Dashboard] Error processing redirect:', error);\n      setStatus('error');\n      \n      // Bei Fehler: Trotzdem zu Root redirecten (nach kurzer Verzögerung)\n      setTimeout(() => {\n        router.replace('/');\n      }, 1000);\n    }\n  }, [searchParams, router]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n      <div className=\"text-center\">\n        {status === 'loading' && (\n          <>\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Lade Shop...</p>\n          </>\n        )}\n        {status === 'redirecting' && (\n          <>\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Shop geladen, weiterleiten...</p>\n          </>\n        )}\n        {status === 'error' && (\n          <>\n            <div className=\"text-red-600 text-5xl mb-4\">⚠️</div>\n            <p className=\"text-gray-600 mb-2\">Fehler beim Laden des Shops</p>\n            <p className=\"text-sm text-gray-500\">Weiterleitung...</p>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\n/**\n * Dashboard Redirect Handler\n * \n * Diese Route wird vom Backend nach OAuth-Installation aufgerufen:\n * /dashboard?shop_id=1&installed=true\n * \n * Sie speichert shop_id in localStorage und redirectet dann zur Root-Route.\n * \n * Wrapped in Suspense für useSearchParams() (Next.js 13+ Requirement)\n */\nexport default function DashboardPage() {\n  return (\n    <Suspense fallback={\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Lade...</p>\n        </div>\n      </div>\n    }>\n      <DashboardContent />\n    </Suspense>\n  );\n}\n\n\n","/*\n React\n react-jsx-runtime.production.min.js\n\n Copyright (c) Meta Platforms, Inc. and affiliates.\n\n This source code is licensed under the MIT license found in the\n LICENSE file in the root directory of this source tree.\n*/\n'use strict';var f=require(\"next/dist/compiled/react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n\n//# sourceMappingURL=react-jsx-runtime.production.min.js.map\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","module.exports = require('./dist/client/components/navigation')\n"],"names":["Promise","resolve","then","__webpack_require__","bind","DashboardContent","searchParams","useSearchParams","router","useRouter","status","setStatus","useState","useEffect","shopId","get","installed","mode","console","log","localStorage","setItem","shop_id","current_shop_id","window","dispatchEvent","CustomEvent","detail","parseInt","setTimeout","replace","error","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","div","className","jsxs","Fragment","p","DashboardPage","Suspense","fallback","f","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","exports","module"],"sourceRoot":""}