{"version":3,"file":"static/chunks/app/[locale]/recommendations/page-6101db026c1aab60.js","mappings":"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","sources":["webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/arrow-left.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/chevron-down.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/circle-check-big.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/flame.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/refresh-cw.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/trending-up.js","webpack://_N_E/?9d83","webpack://_N_E/./lib/shopifyService.ts","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/circle-check.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/calculator.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/triangle-alert.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/clock.js","webpack://_N_E/./node_modules/next-intl/dist/esm/production/react-client/index.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/circle-alert.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/circle-question-mark.js","webpack://_N_E/./components/pricing/ConfidenceIndicator.tsx","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/x.js","webpack://_N_E/./lib/formatters.ts","webpack://_N_E/./components/pricing/ActionButtons.tsx","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/trending-down.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/dollar-sign.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/info.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/chart-no-axes-column-increasing.js","webpack://_N_E/./components/pricing/PriceReasoningStory.tsx","webpack://_N_E/./lib/recommendationTexts.ts","webpack://_N_E/./components/pricing/PriceRecommendationCard.tsx","webpack://_N_E/./components/EmptyAnalysisState.tsx","webpack://_N_E/./components/LatestRecommendation.tsx","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/search.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/shopping-cart.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/map-pin.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/users.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/arrow-up-down.js","webpack://_N_E/./components/CompetitorAnalysis.tsx","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/pen-line.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/target.js","webpack://_N_E/./components/margin/MarginDisplay.tsx","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/pen.js","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/loader-circle.js","webpack://_N_E/./components/margin/CostInputModal.tsx","webpack://_N_E/./node_modules/lucide-react/dist/esm/icons/chevron-up.js","webpack://_N_E/./app/[locale]/recommendations/page.tsx","webpack://_N_E/./app/styles/recommendations.css","webpack://_N_E/<anon>"],"sourcesContent":["/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n];\nconst ArrowLeft = createLucideIcon(\"arrow-left\", __iconNode);\n\nexport { __iconNode, ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]];\nconst ChevronDown = createLucideIcon(\"chevron-down\", __iconNode);\n\nexport { __iconNode, ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21.801 10A10 10 0 1 1 17 3.335\", key: \"yps3ct\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n];\nconst CircleCheckBig = createLucideIcon(\"circle-check-big\", __iconNode);\n\nexport { __iconNode, CircleCheckBig as default };\n//# sourceMappingURL=circle-check-big.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4\",\n      key: \"1slcih\"\n    }\n  ]\n];\nconst Flame = createLucideIcon(\"flame\", __iconNode);\n\nexport { __iconNode, Flame as default };\n//# sourceMappingURL=flame.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n];\nconst RefreshCw = createLucideIcon(\"refresh-cw\", __iconNode);\n\nexport { __iconNode, RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 7h6v6\", key: \"box55l\" }],\n  [\"path\", { d: \"m22 7-8.5 8.5-5-5L2 17\", key: \"1t1m79\" }]\n];\nconst TrendingUp = createLucideIcon(\"trending-up\", __iconNode);\n\nexport { __iconNode, TrendingUp as default };\n//# sourceMappingURL=trending-up.js.map\n","import(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Kujti\\\\Desktop\\\\Trading Tools\\\\MVP PRICE\\\\frontend\\\\app\\\\[locale]\\\\recommendations\\\\page.tsx\")","/**\r\n * Shopify GraphQL Service\r\n * Frontend Service fr Shopify GraphQL API Integration\r\n */\r\n\r\nimport { API_URL } from './api'\r\n\r\n// ============================================\r\n// TYPES\r\n// ============================================\r\n\r\nexport interface ShopifyVariant {\r\n  id: string\r\n  price: number\r\n  compare_at_price?: number | null\r\n  sku?: string | null\r\n  inventory_quantity: number\r\n  title: string\r\n}\r\n\r\nexport interface ShopifyProduct {\r\n  id: string\r\n  title: string\r\n  handle: string\r\n  status: string\r\n  vendor?: string | null\r\n  product_type?: string | null\r\n  variants: ShopifyVariant[]\r\n}\r\n\r\nexport interface ShopifyProductsResponse {\r\n  products: ShopifyProduct[]\r\n  page_info: {\r\n    has_next_page: boolean\r\n    end_cursor?: string | null\r\n  }\r\n  total: number\r\n}\r\n\r\nexport interface ApplyPriceRequest {\r\n  product_id: number\r\n  recommended_price: number\r\n  variant_id?: string\r\n}\r\n\r\nexport interface ApplyPriceResponse {\r\n  success: boolean\r\n  new_price: number\r\n  variant_id: string\r\n  message?: string | null\r\n}\r\n\r\nexport interface BulkUpdateRequest {\r\n  updates: Array<{\r\n    variant_id: string\r\n    new_price: number\r\n  }>\r\n}\r\n\r\nexport interface BulkUpdateResponse {\r\n  success: boolean\r\n  results: Array<{\r\n    variant_id: string\r\n    success: boolean\r\n    result?: any\r\n    error?: string\r\n  }>\r\n  total: number\r\n  successful: number\r\n}\r\n\r\n// ============================================\r\n// API FUNCTIONS\r\n// ============================================\r\n\r\n/**\r\n * Holt alle Produkte von Shopify via GraphQL\r\n */\r\nexport async function getShopifyProducts(\r\n  shopId: number,\r\n  first: number = 50\r\n): Promise<ShopifyProductsResponse> {\r\n  const response = await fetch(\r\n    `${API_URL}/api/shopify/products?shop_id=${shopId}&first=${first}`,\r\n    {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      credentials: 'include',\r\n    }\r\n  )\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json()\r\n    throw new Error(error.detail || 'Fehler beim Laden der Shopify Produkte')\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n/**\r\n * Wendet empfohlenen Preis auf Shopify an (via GraphQL)\r\n */\r\nexport async function applyRecommendedPrice(\r\n  request: ApplyPriceRequest\r\n): Promise<ApplyPriceResponse> {\r\n  const response = await fetch(`${API_URL}/api/shopify/apply-price`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    credentials: 'include',\r\n    body: JSON.stringify(request),\r\n  })\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json()\r\n    throw new Error(error.detail || 'Fehler beim Anwenden des Preises')\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n/**\r\n * Aktualisiert mehrere Preise gleichzeitig\r\n */\r\nexport async function bulkUpdatePrices(\r\n  shopId: number,\r\n  request: BulkUpdateRequest\r\n): Promise<BulkUpdateResponse> {\r\n  const response = await fetch(\r\n    `${API_URL}/api/shopify/bulk-update-prices?shop_id=${shopId}`,\r\n    {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      credentials: 'include',\r\n      body: JSON.stringify(request),\r\n    }\r\n  )\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json()\r\n    throw new Error(error.detail || 'Fehler beim Bulk Update')\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n/**\r\n * Holt ein einzelnes Produkt von Shopify\r\n */\r\nexport async function getShopifyProduct(\r\n  productId: string,\r\n  shopId: number\r\n): Promise<ShopifyProduct> {\r\n  const response = await fetch(\r\n    `${API_URL}/api/shopify/product/${productId}?shop_id=${shopId}`,\r\n    {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      credentials: 'include',\r\n    }\r\n  )\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json()\r\n    throw new Error(error.detail || 'Fehler beim Laden des Produkts')\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n];\nconst CircleCheck = createLucideIcon(\"circle-check\", __iconNode);\n\nexport { __iconNode, CircleCheck as default };\n//# sourceMappingURL=circle-check.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"16\", height: \"20\", x: \"4\", y: \"2\", rx: \"2\", key: \"1nb95v\" }],\n  [\"line\", { x1: \"8\", x2: \"16\", y1: \"6\", y2: \"6\", key: \"x4nwl0\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"14\", y2: \"18\", key: \"wjye3r\" }],\n  [\"path\", { d: \"M16 10h.01\", key: \"1m94wz\" }],\n  [\"path\", { d: \"M12 10h.01\", key: \"1nrarc\" }],\n  [\"path\", { d: \"M8 10h.01\", key: \"19clt8\" }],\n  [\"path\", { d: \"M12 14h.01\", key: \"1etili\" }],\n  [\"path\", { d: \"M8 14h.01\", key: \"6423bh\" }],\n  [\"path\", { d: \"M12 18h.01\", key: \"mhygvu\" }],\n  [\"path\", { d: \"M8 18h.01\", key: \"lrp35t\" }]\n];\nconst Calculator = createLucideIcon(\"calculator\", __iconNode);\n\nexport { __iconNode, Calculator as default };\n//# sourceMappingURL=calculator.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\",\n      key: \"wmoenq\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n];\nconst TriangleAlert = createLucideIcon(\"triangle-alert\", __iconNode);\n\nexport { __iconNode, TriangleAlert as default };\n//# sourceMappingURL=triangle-alert.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 6v6l4 2\", key: \"mmk7yg\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n];\nconst Clock = createLucideIcon(\"clock\", __iconNode);\n\nexport { __iconNode, Clock as default };\n//# sourceMappingURL=clock.js.map\n","import{useFormatter as r,useTranslations as t}from\"use-intl\";function o(r,t){return(...r)=>{try{return t(...r)}catch{throw new Error(void 0)}}}const n=o(0,t),e=o(0,r);export{e as useFormatter,n as useTranslations};\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n];\nconst CircleAlert = createLucideIcon(\"circle-alert\", __iconNode);\n\nexport { __iconNode, CircleAlert as default };\n//# sourceMappingURL=circle-alert.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\", key: \"1u773s\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n];\nconst CircleQuestionMark = createLucideIcon(\"circle-question-mark\", __iconNode);\n\nexport { __iconNode, CircleQuestionMark as default };\n//# sourceMappingURL=circle-question-mark.js.map\n","'use client'\n\nimport React from 'react'\nimport { CheckCircle, AlertCircle, HelpCircle, Check } from 'lucide-react'\nimport { useTranslations } from 'next-intl'\n\ninterface ConfidenceBasis {\n  ml_models?: number\n  competitor_count?: number\n  sales_30d?: number\n  margin_stable?: boolean\n  margin_pct?: number | null\n}\n\ninterface ConfidenceIndicatorProps {\n  confidence: number // 0-1 or 0-100\n  reasoning?: string\n  compact?: boolean\n  confidenceBasis?: ConfidenceBasis\n}\n\nexport function ConfidenceIndicator({ \n  confidence, \n  reasoning, \n  compact = false,\n  confidenceBasis\n}: ConfidenceIndicatorProps) {\n  const t = useTranslations('confidence')\n  \n  // Normalize confidence to 0-100\n  const confidencePct = confidence > 1 ? confidence : confidence * 100\n  \n  // Determine level\n  const level = \n    confidencePct >= 85 ? 'high' :\n    confidencePct >= 60 ? 'medium' :\n    'low'\n  \n  const config = {\n    high: {\n      icon: CheckCircle,\n      color: 'green',\n      bgColor: 'bg-gradient-to-r from-green-50 to-emerald-50',\n      borderColor: 'border-green-200',\n      textColor: 'text-green-700',\n      barColor: 'bg-green-500',\n      gradientBar: 'bg-gradient-to-r from-green-500 to-emerald-600'\n    },\n    medium: {\n      icon: AlertCircle,\n      color: 'yellow',\n      bgColor: 'bg-gradient-to-r from-yellow-50 to-amber-50',\n      borderColor: 'border-yellow-200',\n      textColor: 'text-yellow-700',\n      barColor: 'bg-yellow-500',\n      gradientBar: 'bg-gradient-to-r from-yellow-500 to-amber-600'\n    },\n    low: {\n      icon: HelpCircle,\n      color: 'red',\n      bgColor: 'bg-gradient-to-r from-red-50 to-orange-50',\n      borderColor: 'border-red-200',\n      textColor: 'text-red-700',\n      barColor: 'bg-red-500',\n      gradientBar: 'bg-gradient-to-r from-red-500 to-orange-600'\n    }\n  }\n  \n  const current = config[level]\n  const Icon = current.icon\n  \n  // Compact version (for header badge)\n  if (compact) {\n    return (\n      <div className={`inline-flex items-center gap-2 px-3 py-1.5 rounded-full border ${current.bgColor} ${current.borderColor}`}>\n        <Icon className={`w-4 h-4 ${current.textColor}`} />\n        <span className={`text-sm font-semibold ${current.textColor}`}>\n          {confidencePct.toFixed(0)}%\n        </span>\n      </div>\n    )\n  }\n  \n  // Get competitor count and sales data\n  const compCount = confidenceBasis?.competitor_count || 0\n  const sales30d = confidenceBasis?.sales_30d || 0\n  \n  // Full version - New improved design\n  return (\n    <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-2xl border-l-4 border-blue-500 space-y-4\">\n      \n      {/* HEADLINE: Grte Schrift + Progressbar */}\n      <div className=\"flex items-center gap-3\">\n        <div className=\"w-12 h-12 bg-blue-500 rounded-2xl flex items-center justify-center flex-shrink-0\">\n          <Check className=\"w-6 h-6 text-white\" />\n        </div>\n        <div className=\"flex-1\">\n          <h3 className=\"text-2xl font-bold text-gray-900\">\n            {t('title', { confidence: confidencePct.toFixed(0) })}\n          </h3>\n          {/* Progress Bar */}\n          <div className=\"w-full bg-gray-200 rounded-full h-2 mt-2\">\n            <div \n              className=\"bg-gradient-to-r from-blue-500 to-indigo-600 h-2 rounded-full transition-all duration-500\"\n              style={{width: `${confidencePct}%`}}\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* NEUE ERKLRUNG: Klar + konkret */}\n      <div className=\"p-4 bg-white/50 rounded-xl border\">\n        <h4 className=\"font-semibold text-gray-900 mb-3 flex items-center gap-2\">\n           <span>{t('whatAnalyzes')}</span>\n        </h4>\n        <ul className=\"space-y-2 text-sm text-gray-700\">\n          <li> Echte Verkaufsdaten aus deinem Shopify-Shop</li>\n          <li> Aktuelle Preise deiner {compCount > 0 ? `${compCount}-${Math.max(compCount, 10)}` : '5-10'} wichtigsten Konkurrenten</li>\n          <li> {confidenceBasis?.ml_models || 4} spezialisierte Machine-Learning-Modelle (Umsatz, Konkurrenz, Marge, Saisonalitt)</li>\n          <li> Deine eingetragenen Kosten und bisherigen Margen</li>\n        </ul>\n      </div>\n\n      {/* WARUM-ERKLRUNG: Konkret statt \"strong signals\" */}\n      <div className=\"p-4 bg-yellow-50/80 border border-yellow-200 rounded-xl\">\n        <h4 className=\"font-semibold text-gray-900 mb-3 flex items-center gap-2\">\n           {t('why', { confidence: confidencePct.toFixed(0) })}\n        </h4>\n        <p className=\"text-sm text-gray-800 leading-relaxed\">\n          {t('whyText')}\n        </p>\n      </div>\n      \n    </div>\n  )\n}\n\n\n\n\n\n\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n];\nconst X = createLucideIcon(\"x\", __iconNode);\n\nexport { __iconNode, X as default };\n//# sourceMappingURL=x.js.map\n","/**\n * Utility functions for formatting currency, percentages, etc.\n */\n\nexport function formatCurrency(amount: number, currency: string = 'EUR'): string {\n  return new Intl.NumberFormat('de-DE', {\n    style: 'currency',\n    currency: currency,\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2\n  }).format(amount);\n}\n\nexport function formatPercentage(value: number, decimals: number = 1): string {\n  return `${value >= 0 ? '+' : ''}${value.toFixed(decimals)}%`;\n}\n\nexport function formatNumber(value: number, decimals: number = 0): string {\n  return new Intl.NumberFormat('de-DE', {\n    minimumFractionDigits: decimals,\n    maximumFractionDigits: decimals\n  }).format(value);\n}\n\nexport function formatCompactNumber(value: number): string {\n  return new Intl.NumberFormat('de-DE', {\n    notation: 'compact',\n    compactDisplay: 'short'\n  }).format(value);\n}\n\nexport function formatTimeAgo(timestamp: string): string {\n  const now = new Date();\n  const then = new Date(timestamp);\n  const diffMs = now.getTime() - then.getTime();\n  const diffMins = Math.floor(diffMs / 60000);\n  \n  if (diffMins < 1) return 'just now';\n  if (diffMins === 1) return '1 minute ago';\n  if (diffMins < 60) return `${diffMins} minutes ago`;\n  \n  const diffHours = Math.floor(diffMins / 60);\n  if (diffHours === 1) return '1 hour ago';\n  if (diffHours < 24) return `${diffHours} hours ago`;\n  \n  const diffDays = Math.floor(diffHours / 24);\n  if (diffDays === 1) return '1 day ago';\n  return `${diffDays} days ago`;\n}\n\n","'use client'\n\nimport React, { useState } from 'react'\nimport { useTranslations } from 'next-intl'\nimport { CheckCircle2, X, AlertTriangle, Clock } from 'lucide-react'\nimport { formatCurrency } from '@/lib/formatters'\n\ninterface ActionButtonsProps {\n  recommendedPrice: number\n  onApply: () => Promise<void>\n  onDismiss: () => void\n  isApplying: boolean\n  isDisabled?: boolean\n  marginAnalysis?: {\n    is_safe: boolean\n    margin: number\n    warning: string | null\n    message: string\n    details?: {\n      margin?: {\n        euro: number\n      }\n    }\n  } | null\n}\n\nexport function ActionButtons({\n  recommendedPrice,\n  onApply,\n  onDismiss,\n  isApplying,\n  isDisabled = false,\n  marginAnalysis\n}: ActionButtonsProps) {\n  const t = useTranslations('pricing')\n  const tCommon = useTranslations('common')\n  const tActions = useTranslations('actions')\n  \n  const [showSchedule, setShowSchedule] = useState(false)\n  const hasMarginWarning = marginAnalysis && !marginAnalysis.is_safe\n  \n  // Calculate estimated revenue impact (placeholder - you'd calculate this properly)\n  const estimatedMonthlyImpact = marginAnalysis?.details?.margin?.euro \n    ? marginAnalysis.details.margin.euro * 30 // Rough estimate: margin * 30 days\n    : null\n  \n  return (\n    <div className=\"space-y-3\">\n      \n      {/* Primary Actions */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n        \n        {/* Apply Button */}\n        <button\n          onClick={onApply}\n          disabled={isApplying || isDisabled}\n          className={`\n            flex items-center justify-center gap-2 px-6 py-3 rounded-lg font-semibold\n            transition-all duration-200 transform hover:scale-105\n            disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none\n            ${isDisabled \n              ? 'bg-gray-300 text-gray-600' \n              : hasMarginWarning\n                ? 'bg-orange-600 hover:bg-orange-700 text-white shadow-lg hover:shadow-xl'\n                : 'bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl'\n            }\n          `}\n        >\n          {isApplying ? (\n            <>\n              <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n              <span>{t('applying')}</span>\n            </>\n          ) : (\n            <>\n              <CheckCircle2 className=\"w-5 h-5\" />\n              <div className=\"flex flex-col items-start\">\n                <span>{t('apply_price', { price: formatCurrency(recommendedPrice) })}</span>\n                {estimatedMonthlyImpact && (\n                  <span className=\"text-xs opacity-80 font-normal\">\n                    +{formatCurrency(estimatedMonthlyImpact)}{tActions('month_est')}\n                  </span>\n                )}\n              </div>\n            </>\n          )}\n        </button>\n        \n        {/* Dismiss Button */}\n        <button\n          onClick={onDismiss}\n          disabled={isApplying}\n          className=\"flex items-center justify-center gap-2 px-6 py-3 rounded-lg font-semibold\n                     border-2 border-gray-300 text-gray-700 hover:bg-gray-50\n                     transition-all disabled:opacity-50\"\n        >\n          <X className=\"w-5 h-5\" />\n          <span>{tCommon('dismiss')}</span>\n        </button>\n        \n      </div>\n      \n      {/* Secondary Action: Schedule */}\n      <button\n        onClick={() => setShowSchedule(!showSchedule)}\n        className=\"w-full flex items-center justify-center gap-2 px-4 py-2 text-sm\n                   text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n      >\n        <Clock className=\"w-4 h-4\" />\n        <span>{t('schedule_later')}</span>\n      </button>\n      \n      {/* Schedule Panel (if shown) */}\n      {showSchedule && (\n        <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-200 space-y-3\">\n          <p className=\"text-sm font-medium text-blue-900\">\n            {tActions('schedule_price_change')}\n          </p>\n          \n          <div className=\"grid grid-cols-2 gap-3\">\n            <div>\n              <label className=\"block text-xs text-blue-700 mb-1\">{tActions('date')}</label>\n              <input\n                type=\"date\"\n                className=\"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-xs text-blue-700 mb-1\">{tActions('time')}</label>\n              <input\n                type=\"time\"\n                defaultValue=\"09:00\"\n                className=\"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm\"\n              />\n            </div>\n          </div>\n          \n          <button\n            className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium\n                       hover:bg-blue-700 transition-colors\"\n          >\n            {tActions('schedule_change')}\n          </button>\n        </div>\n      )}\n      \n      {/* Warning Message (if disabled) */}\n      {isDisabled && (\n        <div className=\"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg\">\n          <X className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n          <p className=\"text-sm text-red-800\">\n            {tActions('cannot_apply_warning')}\n          </p>\n        </div>\n      )}\n      \n      {/* Margin Warning */}\n      {hasMarginWarning && !isDisabled && (\n        <div className=\"flex items-start gap-2 p-3 bg-orange-50 border border-orange-200 rounded-lg\">\n          <AlertTriangle className=\"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5\" />\n          <div className=\"flex-1\">\n            <p className=\"text-sm font-medium text-orange-900 mb-1\">{tActions('margin_warning')}</p>\n            <p className=\"text-xs text-orange-800\">{marginAnalysis?.message}</p>\n          </div>\n        </div>\n      )}\n      \n    </div>\n  )\n}\n\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 17h6v-6\", key: \"t6n2it\" }],\n  [\"path\", { d: \"m22 17-8.5-8.5-5 5L2 7\", key: \"x473p\" }]\n];\nconst TrendingDown = createLucideIcon(\"trending-down\", __iconNode);\n\nexport { __iconNode, TrendingDown as default };\n//# sourceMappingURL=trending-down.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"22\", key: \"7eqyqh\" }],\n  [\"path\", { d: \"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6\", key: \"1b0p4s\" }]\n];\nconst DollarSign = createLucideIcon(\"dollar-sign\", __iconNode);\n\nexport { __iconNode, DollarSign as default };\n//# sourceMappingURL=dollar-sign.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n];\nconst Info = createLucideIcon(\"info\", __iconNode);\n\nexport { __iconNode, Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M5 21v-6\", key: \"1hz6c0\" }],\n  [\"path\", { d: \"M12 21V9\", key: \"uvy0l4\" }],\n  [\"path\", { d: \"M19 21V3\", key: \"11j9sm\" }]\n];\nconst ChartNoAxesColumnIncreasing = createLucideIcon(\"chart-no-axes-column-increasing\", __iconNode);\n\nexport { __iconNode, ChartNoAxesColumnIncreasing as default };\n//# sourceMappingURL=chart-no-axes-column-increasing.js.map\n","'use client'\n\nimport React, { useState } from 'react'\nimport { formatCurrency } from '@/lib/formatters'\nimport {\n  CheckCircle2,\n  TrendingDown,\n  TrendingUp,\n  Lightbulb,\n  Package,\n  DollarSign,\n  Info,\n  Calculator,\n  AlertCircle,\n  BarChart,\n  X,\n  RefreshCw,\n  Clock\n} from 'lucide-react'\n\ninterface StrategyDetail {\n  strategy: string\n  recommended_price: number\n  confidence: number\n  reasoning?: string\n  competitor_context?: any\n}\n\ninterface PriceReasoningStoryProps {\n  recommendedPrice: number\n  currentPrice: number\n  strategyDetails: StrategyDetail[]\n  competitorData?: {\n    avg: number\n    min?: number\n    max?: number\n    prices?: Array<{ source: string; price: number }>\n  }\n  productName?: string\n  productId?: string | number\n  confidence?: number\n  onApply?: (price: number) => Promise<void>\n  onDismiss?: () => void\n  onRefresh?: () => Promise<void>\n  createdAt?: string\n}\n\nexport function PriceReasoningStory({\n  recommendedPrice,\n  currentPrice,\n  strategyDetails = [],\n  competitorData,\n  productName = 'Produkt',\n  productId,\n  confidence,\n  onApply,\n  onDismiss,\n  onRefresh,\n  createdAt\n}: PriceReasoningStoryProps) {\n  //  FIX: Ensure confidence is always valid (0-1 range)\n  const validConfidence = Math.max(0, Math.min(1, confidence || 0.5))\n  \n  const [showDetails, setShowDetails] = useState<Record<number, boolean>>({})\n  \n  const priceChange = recommendedPrice - currentPrice\n  const priceChangePct = (priceChange / currentPrice) * 100\n  \n  // Datenqualitt Badge Funktion\n  const getQualityBadge = (confidence: number) => {\n    const scorePct = validConfidence * 100\n    if (scorePct >= 90) {\n      return <span className=\"strategy-badge excellent\">Datenqualitt: Exzellent</span>\n    }\n    if (scorePct >= 80) {\n      return <span className=\"strategy-badge excellent\">Datenqualitt: Sehr gut</span>\n    }\n    if (scorePct >= 70) {\n      return <span className=\"strategy-badge good\">Datenqualitt: Gut</span>\n    }\n    return <span className=\"strategy-badge good\">Datenqualitt: Ausreichend</span>\n  }\n  \n  // Strategie-Konfiguration\n  const strategyConfig: Record<string, {\n    emoji: string\n    title: string\n    getStory: (data: any) => string\n    getBasedOn: (data: any) => string[]\n    colorClass: string\n  }> = {\n    competitive: {\n      emoji: '',\n      title: 'Du bist teurer als der Markt',\n      getStory: (data) => {\n        const avgPrice = data.competitorData?.avg || 0\n        const competitorCount = data.competitorData?.prices?.length || 5\n        const diff = currentPrice - avgPrice\n        const diffPct = avgPrice > 0 ? ((diff / avgPrice) * 100).toFixed(0) : '0'\n        const priceChange = currentPrice - recommendedPrice\n        \n        if (diff > 0) {\n          return `Wir haben ${competitorCount} Wettbewerber analysiert. Der durchschnittliche Preis liegt bei ${formatCurrency(avgPrice)}. Du bist ${diffPct}% teurer als der Durchschnitt. Du solltest den Preis um ${formatCurrency(Math.abs(priceChange))} ${priceChange > 0 ? 'senken' : 'erhhen'} um wettbewerbsfhig zu bleiben.`\n        } else {\n          return `Wir haben ${competitorCount} Wettbewerber analysiert. Der durchschnittliche Preis liegt bei ${formatCurrency(avgPrice)}. Du bist bereits wettbewerbsfhig positioniert.`\n        }\n      },\n      getBasedOn: (data) => {\n        const competitorCount = data.competitorData?.prices?.length || 5\n        return [\n          `Echtzeitpreise von ${competitorCount} Konkurrenten`,\n          'Aktuelle Marktdaten (heute aktualisiert)',\n          'Preisvergleich mit hnlichen Produkten'\n        ]\n      },\n      colorClass: 'competitive'\n    },\n    demand: {\n      emoji: '',\n      title: 'Die Nachfrage steigt stark',\n      getStory: (data) => {\n        const sales = data.sales || 64\n        const previousSales = data.previousSales || 54\n        const growth = previousSales > 0 ? (((sales - previousSales) / previousSales) * 100).toFixed(0) : '19'\n        return `In den letzten 7 Tagen hast du ${sales} Verkufe gemacht (vorher: ${previousSales} Verkufe). Das ist ein +${growth}% Wachstum! Wenn die Nachfrage steigt, kannst du hhere Preise durchsetzen.`\n      },\n      getBasedOn: () => [\n        'Deine letzten 30 Tage Verkaufsdaten',\n        'Trendanalyse der letzten Woche',\n        'Machine-Learning Vorhersage fr nchste 7 Tage'\n      ],\n      colorClass: 'demand'\n    },\n    inventory: {\n      emoji: '',\n      title: 'Dein Lagerbestand ist niedrig',\n      getStory: (data) => {\n        const stock = data.stock || 45\n        const daysOfStock = data.daysOfStock || 20\n        return `Mit ${stock} Einheiten auf Lager hast du bei aktuellem Tempo noch ${daysOfStock} Tage Vorrat. Das ist knapp! Du solltest vorsichtig mit Preissenkungen sein.`\n      },\n      getBasedOn: (data) => {\n        const stock = data.stock || 45\n        const avgDaily = data.avgDaily || 2.25\n        return [\n          `Aktueller Lagerbestand: ${stock} Stck`,\n          `Durchschnittlicher Verkauf: ${avgDaily.toFixed(1)}/Tag`,\n          'Berechnung basierend auf letzten 7 Tagen Verkufen'\n        ]\n      },\n      colorClass: 'inventory'\n    },\n    cost: {\n      emoji: '',\n      title: 'Deine Kosten sind stabil',\n      getStory: () => {\n        return `Deine Einkaufskosten liegen bei einem stabilen Niveau. Die empfohlene Preisnderung bercksichtigt deine aktuellen Margen und stellt sicher, dass du profitabel bleibst.`\n      },\n      getBasedOn: () => [\n        'Deine hinterlegten Produktkosten',\n        'Aktuelle Marge-Berechnung',\n        'Historische Kostenentwicklung'\n      ],\n      colorClass: 'costs'\n    }\n  }\n  \n  // Berechne Preisimpact fr jede Strategie\n  const getPriceImpact = (strategy: StrategyDetail) => {\n    const impact = strategy.recommended_price - currentPrice\n    return {\n      value: impact,\n      formatted: formatCurrency(Math.abs(impact)),\n      isIncrease: impact > 0,\n      isDecrease: impact < 0\n    }\n  }\n  \n  // Sortiere Strategien nach Impact\n  const sortedStrategies = [...strategyDetails].sort((a, b) => {\n    const impactA = Math.abs(getPriceImpact(a).value)\n    const impactB = Math.abs(getPriceImpact(b).value)\n    return impactB - impactA\n  })\n  \n  // Berechne gewichtete Beitrge (vereinfacht)\n  const calculateWeightedContributions = () => {\n    return sortedStrategies.map((strategy, idx) => {\n      const impact = getPriceImpact(strategy)\n      const weight = strategy.confidence * (1 / sortedStrategies.length)\n      const weightedImpact = impact.value * weight\n      \n      return {\n        strategy: strategy.strategy,\n        impact: impact.value,\n        weightedImpact,\n        confidence: strategy.confidence,\n        weight: weight * 100\n      }\n    })\n  }\n  \n  const weightedContributions = calculateWeightedContributions()\n  const totalWeighted = weightedContributions.reduce((sum, w) => sum + w.weightedImpact, 0)\n  \n  return (\n    <div className=\"recommendation-content\">\n      \n      {/* ========== 1. PRODUCT HEADER ========== */}\n      <div className=\"recommendation-header\">\n        <div className=\"product-header-row\">\n          <div className=\"product-info-compact\">\n            <h3>{productName}</h3>\n            {productId && <p className=\"product-meta\">Produkt-ID: {productId}</p>}\n          </div>\n          <div className=\"confidence-badge-large\">\n            <CheckCircle2 className=\"h-6 w-6\" />\n            <span>{Math.round(validConfidence * 100)}% Sicherheit</span>\n          </div>\n        </div>\n        <p className=\"recommendation-text\">\n          Empfohlene Preis{priceChange < 0 ? 'senkung' : 'erhhung'} um {Math.abs(priceChangePct).toFixed(1)}% um wettbewerbsfhig zu bleiben.\n        </p>\n      </div>\n\n      {/* ========== 2. ACTION BUTTONS (GANZ OBEN!) ========== */}\n      {(onApply || onDismiss || onRefresh) && (\n        <>\n          <div className=\"action-buttons-top\">\n            {onApply && (\n              <button \n                className=\"action-button-primary\"\n                onClick={() => onApply(recommendedPrice)}\n              >\n                <CheckCircle2 className=\"h-5 w-5\" />\n                {formatCurrency(recommendedPrice)} anwenden\n              </button>\n            )}\n            \n            {onDismiss && (\n              <button \n                className=\"action-button-secondary\"\n                onClick={onDismiss}\n              >\n                <X className=\"h-5 w-5\" />\n                Verwerfen\n              </button>\n            )}\n            \n            {onRefresh && (\n              <button \n                className=\"action-button-update\"\n                onClick={onRefresh}\n              >\n                <RefreshCw className=\"h-4 w-4\" />\n                Aktualisieren\n              </button>\n            )}\n          </div>\n\n          {/* Last Updated */}\n          <div className=\"last-updated\">\n            <span className=\"flex items-center gap-2\">\n              <Clock className=\"h-4 w-4\" />\n              {createdAt ? new Date(createdAt).toLocaleString('de-DE') : 'just now'}\n            </span>\n            <span className=\"update-link\">Spter planen</span>\n          </div>\n        </>\n      )}\n\n      {/* ========== 3. PRICE COMPARISON - PREMIUM ========== */}\n      {/*  FIX: Price Comparison - Gleiche Gre mit grid */}\n      <div className=\"grid grid-cols-2 gap-4 mb-6\">\n        {/* CURRENT PRICE CARD */}\n        <div className=\"flex flex-col justify-between p-6 border-2 rounded-xl\" style={{ \n          backgroundColor: '#0f172a', \n          borderColor: '#475569',\n          minHeight: '140px' //  Gleiche Hhe\n        }}>\n          <div className=\"flex items-center gap-2 mb-4\">\n            <div className=\"w-3 h-3 rounded-full bg-slate-500\" />\n            <div className=\"price-label\" style={{ color: '#94a3b8' }}>Aktueller Preis</div>\n          </div>\n          \n          {/* Price -  Gleiche Schriftgre */}\n          <div className=\"price-amount\" style={{ fontSize: '36px', color: '#f1f5f9' }}>\n            {formatCurrency(currentPrice)}\n          </div>\n        </div>\n        \n        {/* RECOMMENDED PRICE CARD -  FIX: Dark Theme statt Blau */}\n        <div className=\"relative overflow-hidden rounded-xl border-2 p-6 flex flex-col justify-between\" style={{\n          backgroundColor: '#064e3b',\n          borderColor: '#10b981',\n          minHeight: '140px' //  Gleiche Hhe\n        }}>\n          {/* Recommended Badge */}\n          <div className=\"absolute top-4 right-4\">\n            <div className=\"px-3 py-1.5 rounded-lg\" style={{\n              backgroundColor: 'rgba(16, 185, 129, 0.2)',\n              border: '1px solid rgba(16, 185, 129, 0.5)'\n            }}>\n              <span className=\"text-xs font-bold\" style={{ color: '#86efac' }}> EMPFOHLEN</span>\n            </div>\n          </div>\n          \n          <div className=\"relative z-10 flex flex-col justify-between h-full\">\n            {/* Label */}\n            <div className=\"flex items-center gap-2 mb-4\">\n              <div className=\"w-3 h-3 rounded-full bg-green-400\" />\n              <div className=\"price-label\" style={{ color: '#86efac' }}>Empfohlener Preis</div>\n            </div>\n            \n            {/* Price -  Gleiche Schriftgre */}\n            <div className=\"price-amount\" style={{ fontSize: '36px', color: '#86efac' }}>\n              {formatCurrency(recommendedPrice)}\n            </div>\n            \n            {/* Price Change Indicator */}\n            <div className=\"mt-2 inline-flex items-center gap-2 px-3 py-1.5 rounded-lg\" style={{\n              backgroundColor: 'rgba(16, 185, 129, 0.2)',\n              border: '1px solid rgba(16, 185, 129, 0.3)'\n            }}>\n              {priceChange > 0 ? (\n                <TrendingUp className=\"w-4 h-4\" style={{ color: '#86efac' }} />\n              ) : (\n                <TrendingDown className=\"w-4 h-4\" style={{ color: '#86efac' }} />\n              )}\n              <span className=\"text-sm font-bold\" style={{ color: '#86efac' }}>\n                {priceChange > 0 ? '+' : ''}{formatCurrency(Math.abs(priceChange))} ({priceChange > 0 ? '+' : ''}{Math.abs(priceChangePct).toFixed(1)}%)\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* ========== 4. ML CONFIDENCE SECTION ========== */}\n      <div className=\"ml-confidence-section\">\n        <div className=\"confidence-header\">\n          <div className=\"confidence-icon\">\n            <CheckCircle2 className=\"h-6 w-6 text-white\" />\n          </div>\n          <h3 className=\"confidence-title\">Unsere KI ist {Math.round(validConfidence * 100)}% sicher</h3>\n        </div>\n        \n        {/* Progress Bar */}\n        <div className=\"confidence-progress-wrapper\">\n          <div className=\"confidence-progress-header\">\n            <span className=\"confidence-progress-label\">Sicherheitswert</span>\n            <span className=\"confidence-progress-value\">{Math.round(validConfidence * 100)}%</span>\n          </div>\n          <div className=\"confidence-progress-bar-container\" style={{ maxWidth: '100%', overflow: 'hidden' }}>\n            <div \n              className=\"confidence-progress-bar\"\n              style={{ \n                width: `${Math.min(Math.max(validConfidence * 100, 0), 100)}%`,\n                maxWidth: '100%'\n              }}\n            />\n          </div>\n        </div>\n        \n        {/* What we analyzed */}\n        <div className=\"analysis-factors\">\n          <div className=\"analysis-factors-title\">\n             Was analysiert unsere KI?\n          </div>\n          <div className=\"factors-grid\">\n            <div className=\"factor-item\">\n              <CheckCircle2 className=\"factor-check\" />\n              <span>Echte Verkaufsdaten aus deinem Shopify-Shop</span>\n            </div>\n            <div className=\"factor-item\">\n              <CheckCircle2 className=\"factor-check\" />\n              <span>Aktuelle Preise deiner 5-10 wichtigsten Konkurrenten</span>\n            </div>\n            <div className=\"factor-item\">\n              <CheckCircle2 className=\"factor-check\" />\n              <span>4 spezialisierte Machine-Learning-Modelle</span>\n            </div>\n            <div className=\"factor-item\">\n              <CheckCircle2 className=\"factor-check\" />\n              <span>Deine eingetragenen Kosten und bisherigen Margen</span>\n            </div>\n          </div>\n          \n          {/* Why confidence % */}\n          <div className=\"confidence-explanation\">\n            <div className=\"confidence-explanation-title\">\n               Warum genau {Math.round(validConfidence * 100)}% Sicherheit?\n            </div>\n            <p className=\"confidence-explanation-text\">\n              Deine Produkte verkaufen sich bei diesem Preis sehr gut. \n              Konkurrenten haben hnliche Preise und deine Marge bleibt stabil. \n              Alle Daten deuten auf Erfolg hin!\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* ========== 5. WHY WE RECOMMEND ========== */}\n      <div className=\"why-recommend-section\">\n        <div className=\"why-recommend-header\">\n          <div className=\"why-recommend-icon\">\n            <Lightbulb className=\"h-5 w-5 text-white\" />\n          </div>\n          <h3 className=\"why-recommend-title\"> Warum empfehlen wir {formatCurrency(recommendedPrice)}?</h3>\n        </div>\n        \n        <p className=\"why-recommend-subtitle\">\n          Unsere KI hat {strategyDetails.length} wichtige Marktfaktoren analysiert:\n        </p>\n        \n        <div className=\"strategy-cards\">\n          {sortedStrategies.map((strategy, idx) => {\n            const config = strategyConfig[strategy.strategy] || {\n              emoji: '',\n              title: strategy.strategy,\n              getStory: () => strategy.reasoning || 'Keine Details verfgbar.',\n              getBasedOn: () => ['Daten aus KI-Analyse'],\n              colorClass: 'competitive'\n            }\n            \n            const impact = getPriceImpact(strategy)\n            \n            return (\n              <div key={idx} className={`strategy-card ${config.colorClass}`}>\n                <div className=\"strategy-header\">\n                  <div className=\"strategy-title-row\">\n                    <div className=\"strategy-number\">{idx + 1}</div>\n                    <div className={`strategy-icon-container ${config.colorClass}`}>\n                      {config.colorClass === 'competitive' && <TrendingDown className=\"h-4 w-4 text-white\" />}\n                      {config.colorClass === 'demand' && <TrendingUp className=\"h-4 w-4 text-white\" />}\n                      {config.colorClass === 'inventory' && <Package className=\"h-4 w-4 text-white\" />}\n                      {config.colorClass === 'costs' && <DollarSign className=\"h-4 w-4 text-white\" />}\n                    </div>\n                    <h4 className=\"strategy-title\">{config.title}</h4>\n                  </div>\n                  {getQualityBadge(strategy.confidence)}\n                </div>\n                \n                <p className=\"strategy-text\">\n                  {config.getStory({\n                    competitorData,\n                    currentPrice,\n                    recommendedPrice,\n                    strategy\n                  })}\n                </p>\n                \n                <div className={`strategy-impact ${impact.isDecrease ? 'negative' : 'positive'}`}>\n                  {impact.isDecrease ? (\n                    <TrendingDown className=\"strategy-impact-icon\" />\n                  ) : (\n                    <TrendingUp className=\"strategy-impact-icon\" />\n                  )}\n                  <span>\n                    Preisimpact: {impact.isDecrease ? '-' : '+'}{impact.formatted} {impact.isDecrease ? 'Senkung empfohlen' : 'Erhhung empfohlen'}\n                  </span>\n                </div>\n                \n                <div className=\"strategy-details\">\n                  <button \n                    className=\"strategy-details-toggle\"\n                    onClick={() => setShowDetails(prev => ({ ...prev, [idx]: !prev[idx] }))}\n                  >\n                    <Info className=\"h-3 w-3\" />\n                    Basiert auf...\n                  </button>\n                  \n                  {showDetails[idx] && (\n                    <div className=\"mt-3 p-3 border\" style={{ backgroundColor: '#1e293b', borderColor: '#475569' }}>\n                      <ul className=\"list-disc list-inside space-y-1 text-sm\" style={{ color: '#cbd5e1' }}>\n                        {config.getBasedOn({\n                          competitorData,\n                          strategy,\n                          currentPrice\n                        }).map((item, itemIdx) => (\n                          <li key={itemIdx}>{item}</li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )\n          })}\n        </div>\n      </div>\n\n      {/* ========== 6. HOW IS IT CALCULATED ========== */}\n      <div className=\"calculation-section\">\n        <div className=\"calculation-header\">\n          <div className=\"calculation-icon\">\n            <Calculator className=\"h-5 w-5 text-white\" />\n          </div>\n          <h3 className=\"calculation-title\"> Wie wird {priceChange < 0 ? '-' : '+'}{formatCurrency(Math.abs(priceChange))} berechnet?</h3>\n        </div>\n        \n        <div className=\"calculation-notice\">\n          <AlertCircle className=\"calculation-notice-icon\" />\n          <div>\n            <strong>Warum nicht die einfache Summe?</strong> Jede Strategie wird basierend auf ihrer \n            <strong> Datenqualitt unterschiedlich stark gewichtet</strong>. Faktoren mit exzellenter \n            Datenqualitt (z.B. Wettbewerbspreise) haben mehr Einfluss als Faktoren mit guter \n            Datenqualitt (z.B. Nachfrage-Trends). Die gewichtete Berechnung stellt sicher, dass \n            weniger zuverlssige Daten nicht zu starken Einfluss haben.\n          </div>\n        </div>\n        \n        {/* Strategies List */}\n        <div className=\"weighted-section\">\n          <div className=\"weighted-header\">\n             Einzelne Strategien-Empfehlungen:\n          </div>\n          \n          <div className=\"strategies-list\">\n            {sortedStrategies.map((strategy, idx) => {\n              const impact = getPriceImpact(strategy)\n              const config = strategyConfig[strategy.strategy] || { colorClass: 'competitive' }\n              \n              return (\n                <div key={idx} className=\"strategy-row\">\n                  <div className=\"strategy-row-label\">\n                    {config.colorClass === 'competitive' && <TrendingDown className=\"strategy-row-icon text-red-500\" />}\n                    {config.colorClass === 'demand' && <TrendingUp className=\"strategy-row-icon text-green-500\" />}\n                    {config.colorClass === 'inventory' && <Package className=\"strategy-row-icon text-orange-500\" />}\n                    {config.colorClass === 'costs' && <DollarSign className=\"strategy-row-icon text-blue-500\" />}\n                    <span> {config.title || strategy.strategy} ({strategy.confidence >= 0.9 ? 'Datenqualitt: Exzellent' : strategy.confidence >= 0.8 ? 'Datenqualitt: Sehr gut' : 'Datenqualitt: Gut'})</span>\n                  </div>\n                  <div className={`strategy-row-value ${impact.isDecrease ? 'negative' : 'positive'}`}>\n                    {impact.isDecrease ? '-' : '+'}{impact.formatted}\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        </div>\n        \n        {/* Weighted Contributions */}\n        <div className=\"weighted-section\">\n          <div className=\"weighted-header\">\n             Gewichtete Beitrge (Datenqualitt  Basis-Gewicht):\n          </div>\n          \n          <div className=\"weighted-bars\">\n            {weightedContributions.map((w, idx) => {\n              const config = strategyConfig[sortedStrategies[idx]?.strategy] || { colorClass: 'demand' }\n              const weightPct = (w.weight / 100) * 100\n              \n              return (\n                <div key={idx} className=\"weighted-bar\">\n                  <div className=\"weighted-bar-header\">\n                    <span className=\"weighted-bar-label\">\n                      {strategyConfig[sortedStrategies[idx]?.strategy]?.title || sortedStrategies[idx]?.strategy}\n                    </span>\n                    <span className=\"weighted-bar-value\">\n                      {weightPct.toFixed(1)}%  Datenqualitt: {w.confidence >= 0.9 ? 'Exzellent' : w.confidence >= 0.8 ? 'Sehr gut' : 'Gut'} = <strong>{w.weightedImpact > 0 ? '+' : ''}{formatCurrency(w.weightedImpact)}</strong>\n                    </span>\n                  </div>\n                  <div className=\"weighted-bar-container\">\n                    <div \n                      className={`weighted-bar-fill ${config.colorClass}`}\n                      style={{ width: `${weightPct}%` }}\n                    />\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        </div>\n        \n        {/* Final Sum */}\n        <div className=\"final-sum-box\">\n          <div className=\"final-sum-header\">\n            <BarChart className=\"final-sum-icon\" />\n            <span className=\"final-sum-label\">\n               Finale Summe (Gewichteter Durchschnitt):\n            </span>\n          </div>\n          \n          <div className=\"final-sum-calculation\">\n            Summe aller gewichteten Beitrge\n          </div>\n          \n          <div className=\"final-sum-value\">{priceChange < 0 ? '-' : '+'}{formatCurrency(Math.abs(priceChange))}</div>\n          <div className=\"final-sum-percentage\">({priceChange < 0 ? '-' : '+'}{Math.abs(priceChangePct).toFixed(1)}%)</div>\n        </div>\n      </div>\n\n    </div>\n  )\n}\n","/**\r\n * UX-Writer: Generiert benutzerfreundliche UI-Texte aus Recommendation-Daten\r\n */\r\n\r\ninterface RecommendationData {\r\n  product_title?: string\r\n  product_name?: string\r\n  current_price: number\r\n  recommended_price: number\r\n  price_change_pct: number\r\n  confidence: number\r\n  strategies?: {\r\n    demand?: { price: number; confidence: number; strategy: string; reasoning: string }\r\n    inventory?: { price: number; confidence: number; strategy: string; reasoning: string }\r\n    cost?: { price: number; confidence: number; strategy: string; reasoning: string }\r\n    competitive?: { price: number; confidence: number; strategy: string; reasoning: string }\r\n  }\r\n  competitor_context?: {\r\n    position: string\r\n    avg_price: number\r\n    min_price: number\r\n    max_price: number\r\n    price_diff_pct: number\r\n    competitor_count: number\r\n  }\r\n  ml_predictions?: {\r\n    combined_ml_confidence?: number\r\n    meta_approved?: boolean\r\n  }\r\n  margin?: {\r\n    is_safe: boolean\r\n    margin_pct: number\r\n  }\r\n  has_insights?: boolean\r\n}\r\n\r\nexport interface RecommendationTexts {\r\n  headline: string\r\n  bulletPoints: string[]\r\n  confidence: string\r\n  insights: string\r\n}\r\n\r\n/**\r\n * Generiert UI-Texte aus Recommendation-Daten\r\n */\r\nexport function generateRecommendationTexts(data: RecommendationData): RecommendationTexts {\r\n  const priceChange = data.recommended_price - data.current_price\r\n  const isDecrease = priceChange < 0\r\n  const absChangePct = Math.abs(data.price_change_pct)\r\n  \r\n  // 1. HEADLINE (max. 15 Wrter)\r\n  const headline = generateHeadline(data, isDecrease, absChangePct)\r\n  \r\n  // 2. BULLET POINTS (3-5 Punkte)\r\n  const bulletPoints = generateBulletPoints(data)\r\n  \r\n  // 3. CONFIDENCE TEXT\r\n  const confidence = generateConfidenceText(data)\r\n  \r\n  // 4. INSIGHTS TEXT\r\n  const insights = generateInsightsText(data)\r\n  \r\n  return {\r\n    headline,\r\n    bulletPoints,\r\n    confidence,\r\n    insights\r\n  }\r\n}\r\n\r\nfunction generateHeadline(\r\n  data: RecommendationData,\r\n  isDecrease: boolean,\r\n  absChangePct: number\r\n): string {\r\n  const direction = isDecrease ? 'Preissenkung' : 'Preiserhhung'\r\n  const reason = isDecrease \r\n    ? 'um wettbewerbsfhig zu bleiben'\r\n    : 'aufgrund gestiegener Nachfrage'\r\n  \r\n  return `Empfohlene ${direction} um ${absChangePct.toFixed(1)}%, ${reason}.`\r\n}\r\n\r\nfunction generateBulletPoints(data: RecommendationData): string[] {\r\n  const bullets: string[] = []\r\n  \r\n  // Competitor Context (hchste Prioritt)\r\n  if (data.competitor_context) {\r\n    const ctx = data.competitor_context\r\n    const positionText = getPositionText(ctx.position)\r\n    const diffText = ctx.price_diff_pct > 0 \r\n      ? `${ctx.price_diff_pct.toFixed(1)}% ber`\r\n      : `${Math.abs(ctx.price_diff_pct).toFixed(1)}% unter`\r\n    \r\n    bullets.push(\r\n      `Du liegst aktuell ${diffText} dem durchschnittlichen Marktpreis (${formatPrice(ctx.avg_price)}).`\r\n    )\r\n    \r\n    if (positionText !== 'unknown') {\r\n      bullets.push(\r\n        `Deine Position: ${positionText} (${ctx.competitor_count} Wettbewerber analysiert).`\r\n      )\r\n    }\r\n  }\r\n  \r\n  // Inventory Strategy\r\n  if (data.strategies?.inventory) {\r\n    const inv = data.strategies.inventory\r\n    if (inv.reasoning.includes('Normaler Bestand') || inv.reasoning.includes('normal')) {\r\n      const stockMatch = inv.reasoning.match(/\\((\\d+)\\)/)\r\n      const stock = stockMatch ? stockMatch[1] : ''\r\n      bullets.push(\r\n        `Dein Bestand ist normal${stock ? ` (${stock} Stck)` : ''}  es besteht kein akuter Abverkaufsdruck.`\r\n      )\r\n    } else if (inv.reasoning.includes('Hoher Bestand') || inv.reasoning.includes('hoch')) {\r\n      bullets.push(\r\n        'Dein Bestand ist hoch  eine Preissenkung knnte den Absatz ankurbeln.'\r\n      )\r\n    } else if (inv.reasoning.includes('Niedriger Bestand') || inv.reasoning.includes('niedrig')) {\r\n      bullets.push(\r\n        'Dein Bestand ist niedrig  du knntest den Preis erhhen, ohne Absatz zu verlieren.'\r\n      )\r\n    }\r\n  }\r\n  \r\n  // Cost/Margin Strategy\r\n  if (data.strategies?.cost) {\r\n    const cost = data.strategies.cost\r\n    const marginMatch = cost.reasoning.match(/(\\d+)%/i)\r\n    const targetMargin = marginMatch ? marginMatch[1] : '30'\r\n    \r\n    bullets.push(\r\n      `Die empfohlene Anpassung hlt deine Zielmarge von ca. ${targetMargin}% ein.`\r\n    )\r\n  }\r\n  \r\n  // Margin Analysis\r\n  if (data.margin) {\r\n    if (data.margin.is_safe && data.margin.margin_pct >= 20) {\r\n      bullets.push(\r\n        `Deine Marge bleibt mit ${data.margin.margin_pct.toFixed(1)}% auf einem gesunden Niveau.`\r\n      )\r\n    } else if (data.margin.margin_pct < 20) {\r\n      bullets.push(\r\n        `Achtung: Deine Marge liegt bei ${data.margin.margin_pct.toFixed(1)}%  unter dem empfohlenen Minimum von 20%.`\r\n      )\r\n    }\r\n  }\r\n  \r\n  // Demand Strategy (nur wenn relevant)\r\n  if (data.strategies?.demand) {\r\n    const demand = data.strategies.demand\r\n    if (demand.confidence > 0.6 && !demand.reasoning.includes('Zu wenig Daten')) {\r\n      if (demand.reasoning.includes('wachsend') || demand.reasoning.includes('steigend')) {\r\n        bullets.push(\r\n          'Die Nachfrage zeigt einen positiven Trend  eine moderate Preiserhhung knnte mglich sein.'\r\n        )\r\n      } else if (demand.reasoning.includes('rcklufig') || demand.reasoning.includes('sinkend')) {\r\n        bullets.push(\r\n          'Die Nachfrage ist rcklufig  eine Preissenkung knnte den Absatz stabilisieren.'\r\n        )\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Fallback: Mindestens 2 Bullets\r\n  if (bullets.length < 2) {\r\n    bullets.push(\r\n      'Die Empfehlung basiert auf einer Analyse deiner aktuellen Preislage und Marktvergleichen.'\r\n    )\r\n    bullets.push(\r\n      'Der empfohlene Preis optimiert deine Wettbewerbsposition bei gleichbleibender Profitabilitt.'\r\n    )\r\n  }\r\n  \r\n  return bullets.slice(0, 5) // Max. 5 Bullets\r\n}\r\n\r\nfunction generateConfidenceText(data: RecommendationData): string {\r\n  const confidencePct = (data.confidence * 100).toFixed(1)\r\n  const mlConfidence = data.ml_predictions?.combined_ml_confidence\r\n    ? (data.ml_predictions.combined_ml_confidence * 100).toFixed(1)\r\n    : null\r\n  \r\n  const parts: string[] = []\r\n  \r\n  if (data.confidence >= 0.8) {\r\n    parts.push('Hohe Sicherheit')\r\n  } else if (data.confidence >= 0.6) {\r\n    parts.push('Moderate Sicherheit')\r\n  } else {\r\n    parts.push('Eingeschrnkte Sicherheit')\r\n  }\r\n  \r\n  parts.push(`${confidencePct}%`)\r\n  \r\n  const factors: string[] = []\r\n  if (data.competitor_context) {\r\n    factors.push('Wettbewerbsvergleich')\r\n  }\r\n  if (data.strategies?.cost) {\r\n    factors.push('Kosten')\r\n  }\r\n  if (data.strategies?.inventory) {\r\n    factors.push('Bestand')\r\n  }\r\n  if (mlConfidence) {\r\n    factors.push('historische Daten')\r\n  }\r\n  \r\n  if (factors.length > 0) {\r\n    parts.push(`basierend auf ${factors.join(', ')}`)\r\n  }\r\n  \r\n  if (mlConfidence && parseFloat(mlConfidence) > 90) {\r\n    parts.push(`und ML-Vorhersage (${mlConfidence}%)`)\r\n  }\r\n  \r\n  return parts.join(': ') + '.'\r\n}\r\n\r\nfunction generateInsightsText(data: RecommendationData): string {\r\n  if (data.has_insights) {\r\n    const insights: string[] = []\r\n    \r\n    // Extreme Preisposition\r\n    if (data.competitor_context) {\r\n      if (data.competitor_context.position === 'most_expensive' && data.competitor_context.price_diff_pct > 30) {\r\n        insights.push(\r\n          `Du bist deutlich teurer als der Markt (${data.competitor_context.price_diff_pct.toFixed(1)}% ber Durchschnitt).`\r\n        )\r\n      } else if (data.competitor_context.position === 'cheapest' && Math.abs(data.competitor_context.price_diff_pct) > 20) {\r\n        insights.push(\r\n          `Du bist deutlich gnstiger als der Markt  eine moderate Preiserhhung knnte mglich sein.`\r\n        )\r\n      }\r\n    }\r\n    \r\n    // Margin-Warnung\r\n    if (data.margin && !data.margin.is_safe) {\r\n      insights.push(\r\n        `Achtung: Die empfohlene Preisnderung wrde deine Marge auf ${data.margin.margin_pct.toFixed(1)}% reduzieren.`\r\n      )\r\n    }\r\n    \r\n    return insights.join(' ') || 'Aktuell liegen keine besonderen Aufflligkeiten vor.'\r\n  }\r\n  \r\n  return 'Aktuell liegen keine besonderen Aufflligkeiten vor. Die Empfehlung basiert auf Standardmodellen und den aktuellen Marktpreisen.'\r\n}\r\n\r\nfunction getPositionText(position: string): string {\r\n  const map: Record<string, string> = {\r\n    'most_expensive': 'Teuerste Option',\r\n    'above_average': 'ber dem Durchschnitt',\r\n    'average': 'Marktdurchschnitt',\r\n    'below_average': 'Unter dem Durchschnitt',\r\n    'cheapest': 'Gnstigste Option',\r\n    'unknown': 'Unbekannt'\r\n  }\r\n  return map[position] || 'Unbekannt'\r\n}\r\n\r\nfunction formatPrice(price: number): string {\r\n  return new Intl.NumberFormat('de-DE', {\r\n    style: 'currency',\r\n    currency: 'EUR',\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 2\r\n  }).format(price)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","'use client'\n\nimport React, { useState, useEffect } from 'react'\nimport { AlertTriangle, Clock, ChevronDown, ChevronUp, RefreshCw, CheckCircle2, Lightbulb, Calculator } from 'lucide-react'\nimport { useTranslations } from 'next-intl'\nimport { ConfidenceIndicator } from './ConfidenceIndicator'\nimport { ActionButtons } from './ActionButtons'\nimport { PriceReasoningStory } from './PriceReasoningStory'\nimport { formatCurrency, formatPercentage, formatTimeAgo } from '@/lib/formatters'\nimport { generateRecommendationTexts } from '@/lib/recommendationTexts'\nimport { Recommendation } from '@/lib/types'\n\ninterface PriceRecommendationCardProps {\n  recommendation: Partial<Recommendation> & {\n    product_id: string | number\n    product_title?: string\n    product_name?: string\n    current_price: number\n    recommended_price: number\n    price_change?: number\n    price_change_pct: number\n    confidence: number\n    reasoning: string | object\n    \n    // Strategy details\n    strategy_details?: Array<{\n      strategy: string\n      recommended_price: number\n      confidence: number\n      reasoning: string\n      competitor_context?: any\n    }>\n    \n    // Margin analysis (optional)\n    margin_analysis?: {\n      is_safe: boolean\n      margin: number\n      warning: string | null\n      message: string\n      details: any\n    }\n    \n    // Competitor data\n    competitor_data?: {\n      avg: number\n      min: number\n      max: number\n      prices: Array<{\n        source: string\n        price: number\n        title?: string\n        url?: string\n      }>\n    }\n    \n    // Warnings\n    warnings?: Array<{\n      type: string\n      severity: string\n      message: string\n    }>\n    \n    // Metadata\n    created_at?: string\n    generated_at?: string\n    \n    // Confidence Basis (NEW)\n    confidence_basis?: {\n      ml_models?: number\n      competitor_count?: number\n      sales_30d?: number\n      margin_stable?: boolean\n      margin_pct?: number | null\n    }\n    \n    // SHAP Explanation (NEW)\n    shap_explanation?: Array<{\n      feature: string\n      impact: number\n      pct: number\n    }>\n    \n    // Competitor Count (NEW)\n    competitor_count?: number\n    \n    // NEW: Backend Fields\n    id?: number\n    status?: 'pending' | 'accepted' | 'rejected' | 'applied'\n    strategy?: string\n    ml_confidence?: number\n    base_confidence?: number\n    applied_at?: string | null\n    applied_price?: number | null\n  }\n  \n  onApply?: (price: number) => Promise<void>\n  onDismiss?: () => void\n  onRefresh?: () => Promise<void>\n}\n\nexport function PriceRecommendationCard({\n  recommendation,\n  onApply,\n  onDismiss,\n  onRefresh\n}: PriceRecommendationCardProps) {\n  const t = useTranslations('pricing')\n  const tCommon = useTranslations('common')\n  const tMarket = useTranslations('market')\n  \n  const [isApplying, setIsApplying] = useState(false)\n  const [isRefreshing, setIsRefreshing] = useState(false)\n  \n  // Calculate derived values\n  const displayedPrice = recommendation.recommended_price\n  const displayedPriceChange = displayedPrice - recommendation.current_price\n  const displayedPriceChangePct = (displayedPriceChange / recommendation.current_price) * 100\n  const priceChange = displayedPriceChange\n  const priceIncrease = priceChange > 0\n  const priceDecrease = priceChange < 0\n  const noChange = priceChange === 0\n  \n  const hasMarginWarning = recommendation.margin_analysis && !recommendation.margin_analysis.is_safe\n  const isCriticalWarning = recommendation.warnings?.some(w => w.severity === 'HIGH' || w.severity === 'high')\n  \n  //  FIX: Use overall_confidence from new confidence breakdown if available\n  // overall_confidence is 0-100, legacy confidence is 0-1\n  const rawConfidence = (recommendation as any).overall_confidence !== undefined\n    ? (recommendation as any).overall_confidence / 100.0  // Convert 0-100 to 0-1\n    : recommendation.confidence\n  \n  //  FIX: Ensure confidence is always valid (0-1 range) - like PriceReasoningStory.tsx\n  const validConfidence = Math.max(0, Math.min(1, rawConfidence ?? 0.5))\n  \n  // Generiere UI-Texte aus Recommendation-Daten\n  const recommendationTexts = generateRecommendationTexts({\n    product_title: recommendation.product_title || recommendation.product_name,\n    product_name: recommendation.product_name,\n    current_price: recommendation.current_price,\n    recommended_price: recommendation.recommended_price,\n    price_change_pct: recommendation.price_change_pct,\n    confidence: validConfidence,  // Use calculated validConfidence (from overall_confidence if available)\n    strategies: extractStrategies(recommendation),\n    competitor_context: extractCompetitorContext(recommendation),\n    ml_predictions: extractMLPredictions(recommendation),\n    margin: recommendation.margin_analysis ? {\n      is_safe: recommendation.margin_analysis.is_safe,\n      margin_pct: recommendation.margin_analysis.margin || 0\n    } : undefined,\n    has_insights: recommendation.warnings && recommendation.warnings.length > 0\n  })\n  \n  // Normalize reasoning (fr Fallback)\n  const reasoningText = recommendationTexts.confidence\n  \n  // Handle actions\n  const handleApply = async () => {\n    if (!onApply) return\n    setIsApplying(true)\n    try {\n      await onApply(displayedPrice) // Use displayedPrice (selected strategy)\n    } catch (error) {\n      console.error('Failed to apply price:', error)\n    } finally {\n      setIsApplying(false)\n    }\n  }\n  \n  const handleRefresh = async () => {\n    if (!onRefresh) return\n    setIsRefreshing(true)\n    try {\n      await onRefresh()\n    } catch (error) {\n      console.error('Failed to refresh:', error)\n    } finally {\n      setIsRefreshing(false)\n    }\n  }\n  \n  const productTitle = recommendation.product_title || recommendation.product_name || `Product ${recommendation.product_id}`\n  const timestamp = recommendation.generated_at || recommendation.created_at || new Date().toISOString()\n  \n  return (\n    <div className=\"shadow-lg border overflow-hidden\" style={{ backgroundColor: '#1e293b', borderColor: '#475569' }}>\n      \n      {/* Story-basierte Erklrung: Warum empfehlen wir X? */}\n      {recommendation.strategy_details && recommendation.strategy_details.length > 0 ? (\n        <PriceReasoningStory\n          recommendedPrice={displayedPrice}\n          currentPrice={recommendation.current_price}\n          strategyDetails={recommendation.strategy_details}\n          competitorData={recommendation.competitor_data}\n          productName={productTitle}\n          productId={recommendation.product_id}\n          confidence={recommendation.confidence}\n          onApply={onApply ? handleApply : undefined}\n          onDismiss={onDismiss}\n          onRefresh={onRefresh ? handleRefresh : undefined}\n          createdAt={timestamp}\n        />\n      ) : (\n        /* Fallback fr alte Struktur wenn keine strategy_details - MIT \"KI ist X% sicher\" Anzeige */\n        <div className=\"p-6 pb-4\" style={{ background: 'linear-gradient(to bottom right, #1e293b, #0f172a)' }}>\n          \n          {/* Header */}\n          <div className=\"flex items-start justify-between mb-4\">\n            <div className=\"flex-1\">\n              <h2 className=\"text-xl font-semibold mb-1\" style={{ color: '#f1f5f9' }}>\n                {productTitle}\n              </h2>\n              <p className=\"text-xs\" style={{ color: '#94a3b8' }}>\n                {t('product_id')}: {recommendation.product_id}\n              </p>\n            </div>\n          </div>\n          \n          {/* Headline */}\n          {recommendationTexts.headline && (\n            <div className=\"mb-6\">\n              <p className=\"text-base font-medium\" style={{ color: '#f1f5f9' }}>\n                {recommendationTexts.headline}\n              </p>\n            </div>\n          )}\n          \n          {/*  \"KI ist X% sicher\" Section (wie in PriceReasoningStory) */}\n          <div className=\"mb-6\" style={{ backgroundColor: '#0f172a', borderRadius: '12px', padding: '20px', border: '1px solid #334155' }}>\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div style={{ \n                width: '48px', \n                height: '48px', \n                borderRadius: '12px', \n                background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                boxShadow: '0 4px 12px rgba(16, 185, 129, 0.3)'\n              }}>\n                <CheckCircle2 className=\"h-6 w-6 text-white\" />\n              </div>\n              <h3 style={{ \n                fontSize: '20px', \n                fontWeight: '700', \n                color: '#f1f5f9',\n                margin: 0\n              }}>\n                Unsere KI ist {Math.round(validConfidence * 100)}% sicher\n              </h3>\n            </div>\n            \n            {/* Progress Bar */}\n            <div className=\"mb-4\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <span style={{ fontSize: '14px', fontWeight: '500', color: '#94a3b8' }}>Sicherheitswert</span>\n                <span style={{ fontSize: '18px', fontWeight: '600', color: '#10b981' }}>\n                  {Math.round(validConfidence * 100)}%\n                </span>\n              </div>\n              <div style={{ \n                width: '100%', \n                height: '8px', \n                backgroundColor: '#1e293b', \n                borderRadius: '4px',\n                overflow: 'hidden'\n              }}>\n                <div \n                  style={{ \n                    width: `${validConfidence * 100}%`,\n                    height: '100%',\n                    background: 'linear-gradient(90deg, #10b981 0%, #059669 100%)',\n                    borderRadius: '4px',\n                    transition: 'width 0.3s ease'\n                  }}\n                />\n              </div>\n            </div>\n            \n            {/* Reasoning Text */}\n            {reasoningText && (\n              <div style={{ \n                marginTop: '16px',\n                padding: '12px',\n                backgroundColor: '#1e293b',\n                borderRadius: '8px',\n                border: '1px solid #334155'\n              }}>\n                <p style={{ fontSize: '14px', color: '#cbd5e1', lineHeight: '1.6', margin: 0 }}>\n                  {typeof reasoningText === 'string' ? reasoningText : JSON.stringify(reasoningText)}\n                </p>\n              </div>\n            )}\n          </div>\n          \n          {/*  \"Wieso dieser Preis?\" Section */}\n          <div className=\"mb-6\" style={{ backgroundColor: '#0f172a', borderRadius: '12px', padding: '20px', border: '1px solid #334155' }}>\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div style={{ \n                width: '48px', \n                height: '48px', \n                borderRadius: '12px', \n                background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                boxShadow: '0 4px 12px rgba(59, 130, 246, 0.3)'\n              }}>\n                <Lightbulb className=\"h-6 w-6 text-white\" />\n              </div>\n              <h3 style={{ \n                fontSize: '20px', \n                fontWeight: '700', \n                color: '#f1f5f9',\n                margin: 0\n              }}>\n                 Warum empfehlen wir {formatCurrency(displayedPrice)}?\n              </h3>\n            </div>\n            \n            <p style={{ fontSize: '14px', color: '#cbd5e1', lineHeight: '1.6', marginBottom: '16px' }}>\n              {recommendationTexts.headline || recommendationTexts.confidence || 'Unsere KI hat mehrere Marktfaktoren analysiert, um diesen Preis zu empfehlen.'}\n            </p>\n            \n            {/* Was analysiert wurde */}\n            <div style={{ \n              marginTop: '16px',\n              padding: '12px',\n              backgroundColor: '#1e293b',\n              borderRadius: '8px',\n              border: '1px solid #334155'\n            }}>\n              <div style={{ fontSize: '12px', fontWeight: '600', color: '#94a3b8', marginBottom: '8px', textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n                 Was analysiert unsere KI?\n              </div>\n              <ul style={{ listStyle: 'none', padding: 0, margin: 0, display: 'flex', flexDirection: 'column', gap: '8px' }}>\n                <li style={{ fontSize: '13px', color: '#cbd5e1', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                  <CheckCircle2 className=\"h-4 w-4 text-green-400\" />\n                  <span>Echte Verkaufsdaten aus deinem Shopify-Shop</span>\n                </li>\n                <li style={{ fontSize: '13px', color: '#cbd5e1', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                  <CheckCircle2 className=\"h-4 w-4 text-green-400\" />\n                  <span>Aktuelle Preise deiner 5-10 wichtigsten Konkurrenten</span>\n                </li>\n                <li style={{ fontSize: '13px', color: '#cbd5e1', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                  <CheckCircle2 className=\"h-4 w-4 text-green-400\" />\n                  <span>4 spezialisierte Machine-Learning-Modelle</span>\n                </li>\n                <li style={{ fontSize: '13px', color: '#cbd5e1', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                  <CheckCircle2 className=\"h-4 w-4 text-green-400\" />\n                  <span>Deine eingetragenen Kosten und bisherigen Margen</span>\n                </li>\n              </ul>\n            </div>\n          </div>\n          \n          {/*  \"Wie ergibt sich der Preis?\" Section */}\n          <div className=\"mb-6\" style={{ backgroundColor: '#0f172a', borderRadius: '12px', padding: '20px', border: '1px solid #334155' }}>\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div style={{ \n                width: '48px', \n                height: '48px', \n                borderRadius: '12px', \n                background: 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                boxShadow: '0 4px 12px rgba(139, 92, 246, 0.3)'\n              }}>\n                <Calculator className=\"h-6 w-6 text-white\" />\n              </div>\n              <h3 style={{ \n                fontSize: '20px', \n                fontWeight: '700', \n                color: '#f1f5f9',\n                margin: 0\n              }}>\n                 Wie wird {priceChange > 0 ? '+' : ''}{formatCurrency(Math.abs(priceChange))} berechnet?\n              </h3>\n            </div>\n            \n            <p style={{ fontSize: '14px', color: '#cbd5e1', lineHeight: '1.6', marginBottom: '16px' }}>\n              Der empfohlene Preis basiert auf einer gewichteten Analyse mehrerer Faktoren. Jeder Faktor wird basierend auf seiner Datenqualitt unterschiedlich stark gewichtet.\n            </p>\n            \n            {/* Preisberechnung Details */}\n            <div style={{ \n              marginTop: '16px',\n              padding: '12px',\n              backgroundColor: '#1e293b',\n              borderRadius: '8px',\n              border: '1px solid #334155'\n            }}>\n              <div style={{ fontSize: '13px', color: '#cbd5e1', lineHeight: '1.6' }}>\n                <div style={{ marginBottom: '12px' }}>\n                  <strong style={{ color: '#f1f5f9' }}>Aktueller Preis:</strong> {formatCurrency(recommendation.current_price)}\n                </div>\n                <div style={{ marginBottom: '12px' }}>\n                  <strong style={{ color: '#f1f5f9' }}>Empfohlener Preis:</strong> {formatCurrency(displayedPrice)}\n                </div>\n                <div style={{ marginBottom: '12px' }}>\n                  <strong style={{ color: '#f1f5f9' }}>Preisnderung:</strong> \n                  <span style={{ color: priceChange > 0 ? '#10b981' : '#f59e0b', marginLeft: '8px' }}>\n                    {priceChange > 0 ? '+' : ''}{formatCurrency(priceChange)} ({priceChange > 0 ? '+' : ''}{Math.abs(displayedPriceChangePct).toFixed(1)}%)\n                  </span>\n                </div>\n                {recommendation.strategy && (\n                  <div style={{ marginTop: '12px', paddingTop: '12px', borderTop: '1px solid #334155' }}>\n                    <strong style={{ color: '#f1f5f9' }}>Hauptstrategie:</strong> {recommendation.strategy}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n          \n          {/* Price Comparison -  FIX: Gleiche Gre mit grid */}\n          <div className=\"grid grid-cols-2 gap-4 mb-4\">\n            \n            {/* Current Price */}\n            <div className=\"flex flex-col justify-between p-4 border rounded-lg\" style={{ \n              backgroundColor: '#0f172a', \n              borderColor: '#475569',\n              minHeight: '120px' //  Gleiche Hhe\n            }}>\n              <p className=\"text-xs uppercase tracking-wide mb-2 font-medium\" style={{ color: '#94a3b8' }}>\n                {t('current')}\n              </p>\n              <p className=\"text-3xl font-bold\" style={{ color: '#f1f5f9' }}>\n                {formatCurrency(recommendation.current_price)}\n              </p>\n            </div>\n            \n            {/* Recommended Price */}\n            <div className=\"flex flex-col justify-between p-4 border-2 rounded-lg\" style={{\n              backgroundColor: isCriticalWarning ? '#7f1d1d' : hasMarginWarning ? '#78350f' : '#064e3b',\n              borderColor: isCriticalWarning ? '#ef4444' : hasMarginWarning ? '#f59e0b' : '#10b981',\n              minHeight: '120px' //  Gleiche Hhe\n            }}>\n              <div className=\"flex items-center justify-between mb-2\">\n                <p className=\"text-xs uppercase tracking-wide font-medium\" style={{\n                  color: isCriticalWarning ? '#fca5a5' : hasMarginWarning ? '#fbbf24' : '#86efac'\n                }}>\n                  {t('recommended')}\n                </p>\n                <span className=\"px-2 py-0.5 rounded-full text-xs font-semibold\" style={{\n                  backgroundColor: isCriticalWarning ? 'rgba(252, 165, 165, 0.2)' : \n                                   hasMarginWarning ? 'rgba(251, 191, 36, 0.2)' : \n                                   'rgba(16, 185, 129, 0.2)',\n                  color: isCriticalWarning ? '#fca5a5' : hasMarginWarning ? '#fbbf24' : '#86efac'\n                }}>\n                   EMPFOHLEN\n                </span>\n              </div>\n              <p className=\"text-3xl font-bold\" style={{\n                color: isCriticalWarning ? '#fca5a5' : hasMarginWarning ? '#fbbf24' : '#86efac'\n              }}>\n                {formatCurrency(displayedPrice)}\n              </p>\n              {/* Price Change */}\n              <div className=\"mt-2 flex items-center gap-2\">\n                <span className=\"text-sm font-medium\" style={{\n                  color: priceChange > 0 ? '#10b981' : priceChange < 0 ? '#f59e0b' : '#94a3b8'\n                }}>\n                  {priceChange > 0 ? '' : priceChange < 0 ? '' : '='} {formatCurrency(Math.abs(priceChange))} \n                  ({priceChange > 0 ? '+' : ''}{Math.abs(displayedPriceChangePct).toFixed(1)}%)\n                </span>\n              </div>\n            </div>\n          </div>\n          \n          {/* Price Change Indicator */}\n          <div className=\"flex items-center justify-center mb-4\">\n            {noChange ? (\n              <div className=\"flex items-center gap-2 px-4 py-2 rounded-full\" style={{ backgroundColor: '#334155' }}>\n                <span className=\"font-medium\" style={{ color: '#94a3b8' }}>{t('no_change')}</span>\n              </div>\n            ) : (\n              <div className={`flex items-center gap-2 px-4 py-2 rounded-full ${\n                priceIncrease ? 'bg-blue-100' : 'bg-orange-100'\n              }`}>\n                <span className=\"text-2xl\">\n                  {priceIncrease ? '' : ''}\n                </span>\n                <span className={`text-lg font-bold ${\n                  priceIncrease ? 'text-blue-700' : 'text-orange-700'\n                }`}>\n                  {priceChange > 0 ? '+' : ''}\n                  {formatCurrency(priceChange)}\n                </span>\n                <span className={`text-lg font-semibold ${\n                  priceIncrease ? 'text-blue-600' : 'text-orange-600'\n                }`}>\n                  ({displayedPriceChangePct > 0 ? '+' : ''}\n                  {formatPercentage(displayedPriceChangePct)})\n                </span>\n              </div>\n            )}\n          </div>\n          \n          {/* Confidence Box */}\n          <div className=\"mt-6 px-6\">\n            <ConfidenceIndicator \n              confidence={validConfidence}\n              reasoning={recommendationTexts.confidence}\n              compact={false}\n              confidenceBasis={recommendation.confidence_basis}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Action Buttons - Fallback wenn keine strategy_details */}\n      {(!recommendation.strategy_details || recommendation.strategy_details.length === 0) && (onApply || onDismiss) && (\n        <ActionButtons\n          recommendedPrice={displayedPrice}\n          onApply={handleApply}\n          onDismiss={onDismiss || (() => {})}\n          isApplying={isApplying}\n          isDisabled={isCriticalWarning}\n          marginAnalysis={recommendation.margin_analysis}\n        />\n      )}\n      \n      {/* ==========================================\n          CRITICAL WARNINGS (if any)\n          ========================================== */}\n      \n      {isCriticalWarning && (\n        <div className=\"px-6 py-4 border-t\" style={{ backgroundColor: '#7f1d1d', borderColor: '#ef4444' }}>\n          <div className=\"flex items-start gap-3\">\n            <AlertTriangle className=\"w-6 h-6 flex-shrink-0 mt-0.5\" style={{ color: '#fca5a5' }} />\n            <div>\n              <h4 className=\"font-semibold mb-1\" style={{ color: '#f1f5f9' }}>{t('critical_warning')}</h4>\n              {recommendation.warnings?.filter(w => w.severity === 'HIGH' || w.severity === 'high').map((warning, idx) => (\n                <p key={idx} className=\"text-sm mb-2\" style={{ color: '#fca5a5' }}>\n                  {warning.message}\n                </p>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* ==========================================\n          FOOTER - Metadata\n          ========================================== */}\n      \n      <div className=\"px-6 py-3 border-t flex items-center justify-between\" style={{ backgroundColor: '#0f172a', borderColor: '#334155' }}>\n        <div className=\"flex items-center gap-2 text-sm\" style={{ color: '#94a3b8' }}>\n          <Clock className=\"w-4 h-4\" />\n          <span>\n            {formatTimeAgo(timestamp)}\n          </span>\n        </div>\n        \n        {onRefresh && (\n          <button\n            onClick={handleRefresh}\n            disabled={isRefreshing}\n            className=\"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-50 transition-colors disabled:opacity-50\"\n          >\n            <RefreshCw className={`w-4 h-4 ${isRefreshing ? 'animate-spin' : ''}`} />\n            <span>{tCommon('refresh')}</span>\n          </button>\n        )}\n      </div>\n      \n    </div>\n  )\n}\n\n// Helper-Funktionen zum Extrahieren der Datenstruktur\nfunction extractStrategies(recommendation: any) {\n  if (recommendation.strategy_details && Array.isArray(recommendation.strategy_details)) {\n    const strategies: any = {}\n    recommendation.strategy_details.forEach((detail: any) => {\n      strategies[detail.strategy] = {\n        price: detail.recommended_price,\n        confidence: detail.confidence,\n        strategy: detail.strategy,\n        reasoning: detail.reasoning || ''\n      }\n    })\n    return strategies\n  }\n  \n  // Fallback: Aus reasoning parsen\n  const reasoning = recommendation.reasoning\n  if (typeof reasoning === 'object' && reasoning?.strategies) {\n    return reasoning.strategies\n  }\n  \n  return undefined\n}\n\nfunction extractCompetitorContext(recommendation: any) {\n  if (recommendation.competitor_data) {\n    const data = recommendation.competitor_data\n    // Berechne Position basierend auf avg, min, max\n    const yourPrice = recommendation.recommended_price\n    let position = 'unknown'\n    \n    if (data.avg) {\n      if (yourPrice >= data.max * 0.95) {\n        position = 'most_expensive'\n      } else if (yourPrice <= data.min * 1.05) {\n        position = 'cheapest'\n      } else if (yourPrice > data.avg * 1.1) {\n        position = 'above_average'\n      } else if (yourPrice < data.avg * 0.9) {\n        position = 'below_average'\n      } else {\n        position = 'average'\n      }\n    }\n    \n    return {\n      position,\n      avg_price: data.avg || 0,\n      min_price: data.min || 0,\n      max_price: data.max || 0,\n      price_diff_pct: data.avg ? ((yourPrice - data.avg) / data.avg) * 100 : 0,\n      competitor_count: data.prices?.length || 0\n    }\n  }\n  \n  return undefined\n}\n\nfunction extractMLPredictions(recommendation: any) {\n  // Prfe ob ML-Daten in reasoning vorhanden sind\n  const reasoning = recommendation.reasoning\n  if (typeof reasoning === 'object' && reasoning?.ml_predictions) {\n    return reasoning.ml_predictions\n  }\n  \n  return undefined\n}\n\n\n\n\n\n\n","'use client'\r\n\r\nimport React from 'react'\r\n\r\ninterface EmptyAnalysisStateProps {\r\n  productId: string | number\r\n  competitorCount: number\r\n  salesDataDays: number\r\n  onRunAnalysis?: () => void\r\n}\r\n\r\nexport function EmptyAnalysisState({\r\n  productId,\r\n  competitorCount,\r\n  salesDataDays,\r\n  onRunAnalysis\r\n}: EmptyAnalysisStateProps) {\r\n  return (\r\n    <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-6\">\r\n      <h3 className=\"font-bold text-xl text-yellow-800 mb-2\">\r\n         Erstmalige Analyse fr Produkt #{productId}\r\n      </h3>\r\n      \r\n      {competitorCount === 0 && (\r\n        <div className=\"bg-white p-4 rounded-lg border-l-4 border-orange-400 mb-3\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <span className=\"text-2xl\"></span>\r\n            <div className=\"flex-1\">\r\n              <h4 className=\"font-semibold text-gray-900 mb-1\">Wettbewerbsanalyse luft...</h4>\r\n              <p className=\"text-sm text-gray-600 mb-2\">\r\n                Wir sammeln gerade Preisdaten von Wettbewerbern fr dieses Produkt.\r\n              </p>\r\n              {onRunAnalysis && (\r\n                <button \r\n                  onClick={onRunAnalysis}\r\n                  className=\"text-blue-600 underline hover:text-blue-800 text-sm font-medium mt-2\"\r\n                >\r\n                  Jetzt sofort analysieren \r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {salesDataDays < 7 && (\r\n        <div className=\"bg-white p-4 rounded-lg border-l-4 border-blue-400\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <span className=\"text-2xl\"></span>\r\n            <div className=\"flex-1\">\r\n              <h4 className=\"font-semibold text-gray-900 mb-1\">Verkaufsdaten werden gesammelt</h4>\r\n              <p className=\"text-sm text-gray-600\">\r\n                Aktuell: <span className=\"font-semibold\">{salesDataDays} Tage</span>. \r\n                Optimal: <span className=\"font-semibold text-green-600\">30+ Tage</span>\r\n              </p>\r\n              <p className=\"text-xs text-gray-500 mt-2\">\r\n                Mehr Verkaufsdaten fhren zu prziseren Preisempfehlungen.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {competitorCount > 0 && salesDataDays >= 7 && (\r\n        <div className=\"bg-green-50 p-4 rounded-lg border-l-4 border-green-400\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <span className=\"text-2xl\"></span>\r\n            <div className=\"flex-1\">\r\n              <h4 className=\"font-semibold text-gray-900 mb-1\">Datenbasis vorhanden</h4>\r\n              <p className=\"text-sm text-gray-600\">\r\n                Wir haben genug Daten fr eine erste Analyse. Die Empfehlung wird mit mehr Daten prziser.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport { toast } from 'sonner'\nimport { getLatestRecommendation, generateRecommendation } from '@/lib/api'\nimport { applyRecommendedPrice } from '@/lib/shopifyService'\nimport { PriceRecommendationCard } from './pricing/PriceRecommendationCard'\nimport { EmptyAnalysisState } from './EmptyAnalysisState'\nimport { useShop } from '@/hooks/useShop'\nimport { Recommendation } from '@/lib/types'\n\nimport { FeatureConfidence } from '@/lib/types/confidence'\n\ninterface RecommendationData extends Partial<Recommendation> {\n  id: number\n  product_id: number\n  product_name: string\n  current_price: number\n  recommended_price: number\n  price_change_pct: number\n  strategy: string\n  confidence: number  // Legacy: 0-1 range\n  overall_confidence?: number  // NEW: 0-100 range from confidence breakdown\n  reasoning: string | any\n  \n  // Metrics\n  demand_growth?: number | null\n  days_of_stock?: number | null\n  sales_7d?: number | null\n  competitor_avg_price?: number | null\n  \n  // Price Story (Explainable AI)\n  price_story?: {\n    steps: Array<{\n      step: number\n      title: string\n      explanation: string\n      impact: number\n      impact_pct: number\n      confidence: number\n      data_points: any\n      reasoning: string\n    }>\n    total_impact: number\n    total_impact_pct: number\n    base_price: number\n    recommended_price: number\n    confidence: number\n    summary: string\n  }\n  \n  created_at: string\n  applied_at?: string | null\n  status?: 'pending' | 'accepted' | 'rejected' | 'applied'\n  ml_confidence?: number\n  base_confidence?: number\n  applied_price?: number | null\n  \n  // Feature Confidence (NEW)\n  feature_confidence?: FeatureConfidence\n}\n\ninterface LatestRecommendationProps {\n  productId: number | string\n}\n\nexport default function LatestRecommendation({ productId }: LatestRecommendationProps) {\n  const [recommendation, setRecommendation] = useState<RecommendationData | null>(null)\n  const [loading, setLoading] = useState(false)\n  const [generating, setGenerating] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const { currentShop, isDemoMode } = useShop()\n\n  const loadLatestRecommendation = async () => {\n    if (!productId) return\n    \n    // Konvertiere productId zu number falls ntig\n    const productIdNum = typeof productId === 'string' ? parseInt(productId, 10) : productId\n    if (isNaN(productIdNum)) {\n      setError('Ungltige Produkt-ID')\n      return\n    }\n    \n    setLoading(true)\n    setError(null)\n    try {\n      console.log('[LatestRecommendation]  Generating FRESH recommendation for product:', productIdNum)\n      // ALWAYS generate fresh - never use cached!\n      const data = await generateRecommendation(productIdNum)\n      console.log('[LatestRecommendation]  Fresh recommendation generated:', data)\n      \n      // Response structure from POST /generate is different:\n      // { success: true, recommendation: {...} }\n      const rec = data.recommendation || data\n      \n      if (rec) {\n        console.log('[LatestRecommendation] Recommendation data:', rec)\n        \n        // Stelle sicher, dass alle erforderlichen Felder vorhanden sind\n        if (!rec.product_name) {\n          rec.product_name = data.product_name || rec.product?.title || rec.product_title || `Product ${rec.product_id}`\n        }\n        if (!rec.current_price && data.current_price) {\n          rec.current_price = data.current_price\n        }\n        \n        // Parse reasoning falls es ein JSON-String ist\n        let reasoningParsed = rec.reasoning\n        if (typeof rec.reasoning === 'string') {\n          try {\n            reasoningParsed = JSON.parse(rec.reasoning)\n          } catch {\n            // Nicht JSON, behalte als String\n            reasoningParsed = rec.reasoning\n          }\n        }\n        rec.reasoning = reasoningParsed\n        \n        //  NEW: Add feature_confidence from response\n        if (data.confidence) {\n          rec.feature_confidence = data.confidence\n          \n          //  Use overall_confidence from new confidence breakdown if available\n          // overall_confidence is 0-100, legacy confidence is 0-1\n          if (data.confidence.overall_confidence !== undefined) {\n            // Convert overall_confidence (0-100) to 0-1 range for backward compatibility\n            rec.confidence = data.confidence.overall_confidence / 100.0\n            rec.overall_confidence = data.confidence.overall_confidence\n            console.log(`[LatestRecommendation] Using overall_confidence: ${data.confidence.overall_confidence}%`)\n          }\n        }\n        \n        //  BEHALTE ALLE Backend-Fields:\n        // status, ml_confidence, base_confidence, applied_at, applied_price werden automatisch bernommen\n        // (keine selective extraction mehr!)\n        \n        console.log('[LatestRecommendation]  Setting fresh recommendation with all fields:', rec)\n        setRecommendation(rec)\n        \n        //  Toast Notification - use overall_confidence if available\n        const displayConfidence = rec.overall_confidence ?? (rec.confidence ? Math.round(rec.confidence * 100) : 0)\n        toast.success('Recommendation generiert! ', {\n          description: `Confidence: ${displayConfidence}% | Strategy: ${rec.strategy || 'N/A'}`\n        })\n      } else {\n        console.log('[LatestRecommendation] No recommendation in response')\n        setRecommendation(null)\n        toast.error('Keine Recommendation erhalten', {\n          description: 'Bitte versuche es erneut'\n        })\n      }\n    } catch (err: any) {\n      console.error('[LatestRecommendation] Error generating recommendation:', err)\n      console.error('[LatestRecommendation] Error details:', err.response || err.message)\n      setError(err.message || 'Fehler beim Generieren der Empfehlung')\n      setRecommendation(null)\n      \n      //  Toast Notification fr Fehler\n      toast.error('Fehler beim Generieren der Recommendation', {\n        description: err.message || 'Bitte versuche es erneut'\n      })\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleGenerate = async () => {\n    if (!productId) {\n      alert('Bitte whle eine Produkt-ID aus!')\n      return\n    }\n    \n    // Konvertiere productId zu number falls ntig\n    const productIdNum = typeof productId === 'string' ? parseInt(productId, 10) : productId\n    if (isNaN(productIdNum)) {\n      alert('Ungltige Produkt-ID')\n      return\n    }\n    \n    setGenerating(true)\n    setError(null)\n    try {\n      console.log('[LatestRecommendation]  Manual refresh requested')\n      // Reload generates fresh recommendation\n      await loadLatestRecommendation()\n      // Toast wird bereits in loadLatestRecommendation() angezeigt\n    } catch (err: any) {\n      console.error('[LatestRecommendation] Error generating recommendation:', err)\n      setError(err.message || 'Fehler beim Generieren der Empfehlung')\n      toast.error('Fehler beim Aktualisieren', {\n        description: err.message || 'Bitte versuche es erneut'\n      })\n    } finally {\n      setGenerating(false)\n    }\n  }\n\n  const handleApplyPrice = async (price: number) => {\n    if (!productId) {\n      alert('Bitte whle eine Produkt-ID aus!')\n      return\n    }\n    \n    // Demo Mode: Keine echte Shopify Integration\n    if (isDemoMode) {\n      alert('Demo Mode: Preis kann nicht auf Shopify angewendet werden.')\n      return\n    }\n    \n    if (!currentShop?.id) {\n      alert('Kein Shop ausgewhlt. Bitte whle einen Shop aus.')\n      return\n    }\n    \n    // Konvertiere productId zu number falls ntig\n    const productIdNum = typeof productId === 'string' ? parseInt(productId, 10) : productId\n    if (isNaN(productIdNum)) {\n      alert('Ungltige Produkt-ID')\n      return\n    }\n    \n    try {\n      console.log('[LatestRecommendation] Applying price:', { productIdNum, price, shopId: currentShop.id })\n      \n      const result = await applyRecommendedPrice({\n        product_id: productIdNum,\n        recommended_price: price\n      })\n      \n      console.log('[LatestRecommendation] Price applied successfully:', result)\n      \n      //  Toast Notification statt alert\n      toast.success('Preis erfolgreich angewendet! ', {\n        description: `Neuer Preis: ${result.new_price?.toFixed(2) || price.toFixed(2)}`\n      })\n      \n      // Reload Recommendation um aktualisierten Preis zu sehen\n      await loadLatestRecommendation()\n      \n    } catch (err: any) {\n      console.error('[LatestRecommendation] Error applying price:', err)\n      toast.error('Fehler beim Anwenden des Preises', {\n        description: err.message || 'Unbekannter Fehler'\n      })\n      throw err\n    }\n  }\n\n  useEffect(() => {\n    loadLatestRecommendation()\n  }, [productId])\n\n  if (loading || generating) {\n    return (\n      <div className=\"flex flex-col items-center justify-center py-12 space-y-4\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        <div className=\"text-gray-600 text-center\">\n          <p className=\"font-medium\">Analysiere aktuelle Marktdaten...</p>\n          <p className=\"text-sm text-gray-500 mt-1\">\n            Prfe Wettbewerber, analysiere 90 Tage Verkaufsdaten...\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n        <p className=\"text-red-700 text-sm\">{error}</p>\n        <button\n          onClick={loadLatestRecommendation}\n          className=\"mt-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm\"\n        >\n          Erneut versuchen\n        </button>\n      </div>\n    )\n  }\n\n  if (!recommendation) {\n    return (\n      <EmptyAnalysisState\n        productId={productId}\n        competitorCount={0}\n        salesDataDays={0}\n        onRunAnalysis={handleGenerate}\n      />\n    )\n  }\n\n  // Check for invalid confidence (empty state)\n  const hasInvalidConfidence = !recommendation.confidence || \n    recommendation.confidence === -Infinity || \n    recommendation.confidence < 0 ||\n    isNaN(recommendation.confidence)\n  \n  const competitorCount = recommendation.competitor_avg_price ? 1 : 0\n  const salesDataDays = recommendation.sales_7d ? 7 : 0\n\n  if (hasInvalidConfidence || (competitorCount === 0 && salesDataDays < 7)) {\n    return (\n      <EmptyAnalysisState\n        productId={productId}\n        competitorCount={competitorCount}\n        salesDataDays={salesDataDays}\n        onRunAnalysis={handleGenerate}\n      />\n    )\n  }\n\n  // Transform recommendation data to new format\n  const reasoning = recommendation.reasoning\n  const reasoningObj = typeof reasoning === 'object' && reasoning !== null ? reasoning : {}\n  const strategies = (reasoningObj as any).strategies || {}\n  \n  // Extract strategy_details array - prefer from API response, fallback to reasoning.strategies\n  let strategyDetails: any[] = []\n  \n  // First, try to get from API response (new format)\n  if ((recommendation as any).strategy_details && Array.isArray((recommendation as any).strategy_details)) {\n    strategyDetails = (recommendation as any).strategy_details\n  } else if ((recommendation as any).strategyDetails && Array.isArray((recommendation as any).strategyDetails)) {\n    strategyDetails = (recommendation as any).strategyDetails\n  } else {\n    // Fallback: Extract from strategies object (old format)\n    strategyDetails = Object.entries(strategies).map(([strategy, data]: [string, any]) => ({\n      strategy,\n      recommended_price: data?.price || data?.recommended_price || recommendation.recommended_price,\n      confidence: data?.confidence || 0.5,\n      reasoning: data?.reasoning || '',\n      competitor_context: data?.competitor_context || data?.competitive?.competitor_context\n    }))\n  }\n  \n  // Build competitor_data from available fields\n  const competitorContext = strategies.competitive?.competitor_context || strategies.competitive?.competitor_context\n  const competitorData = recommendation.competitor_avg_price ? {\n    avg: recommendation.competitor_avg_price,\n    min: competitorContext?.min_price || recommendation.competitor_avg_price * 0.9,\n    max: competitorContext?.max_price || recommendation.competitor_avg_price * 1.1,\n    prices: competitorContext?.sources?.map((source: string, idx: number) => ({\n      source,\n      price: recommendation.competitor_avg_price! * (0.9 + (idx * 0.05)) // Estimate\n    })) || []\n  } : undefined\n  \n  // Get confidence: prefer overall_confidence (0-100), fallback to legacy confidence (0-1)\n  const displayConfidence = recommendation.overall_confidence !== undefined\n    ? recommendation.overall_confidence / 100.0  // Convert 0-100 to 0-1\n    : recommendation.confidence\n  \n  const transformedRecommendation = {\n    product_id: recommendation.product_id,\n    product_name: recommendation.product_name,\n    current_price: recommendation.current_price,\n    recommended_price: recommendation.recommended_price,\n    price_change: recommendation.recommended_price - recommendation.current_price,\n    price_change_pct: recommendation.price_change_pct,\n    confidence: displayConfidence,  // Use overall_confidence if available\n    overall_confidence: recommendation.overall_confidence,  // Pass through for display\n    reasoning: typeof reasoning === 'string' ? reasoning : (reasoningObj as any).summary || JSON.stringify(reasoningObj),\n    strategy_details: strategyDetails.length > 0 ? strategyDetails : undefined,\n    competitor_data: competitorData,\n    created_at: recommendation.created_at,\n    generated_at: recommendation.created_at,\n    //  NEU: Alle Backend-Fields hinzufgen\n    id: recommendation.id,\n    status: recommendation.status,\n    strategy: recommendation.strategy,\n    ml_confidence: recommendation.ml_confidence,\n    base_confidence: recommendation.base_confidence,\n    applied_at: recommendation.applied_at,\n    applied_price: recommendation.applied_price\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <PriceRecommendationCard\n        recommendation={transformedRecommendation}\n        onRefresh={handleGenerate}\n        onDismiss={() => {}}\n        onApply={handleApplyPrice}\n      />\n    </div>\n  )\n}\n\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m21 21-4.34-4.34\", key: \"14j7rj\" }],\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }]\n];\nconst Search = createLucideIcon(\"search\", __iconNode);\n\nexport { __iconNode, Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"8\", cy: \"21\", r: \"1\", key: \"jimo8o\" }],\n  [\"circle\", { cx: \"19\", cy: \"21\", r: \"1\", key: \"13723u\" }],\n  [\n    \"path\",\n    {\n      d: \"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12\",\n      key: \"9zh506\"\n    }\n  ]\n];\nconst ShoppingCart = createLucideIcon(\"shopping-cart\", __iconNode);\n\nexport { __iconNode, ShoppingCart as default };\n//# sourceMappingURL=shopping-cart.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0\",\n      key: \"1r0f0z\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"10\", r: \"3\", key: \"ilqhr7\" }]\n];\nconst MapPin = createLucideIcon(\"map-pin\", __iconNode);\n\nexport { __iconNode, MapPin as default };\n//# sourceMappingURL=map-pin.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"path\", { d: \"M16 3.128a4 4 0 0 1 0 7.744\", key: \"16gr8j\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }]\n];\nconst Users = createLucideIcon(\"users\", __iconNode);\n\nexport { __iconNode, Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m21 16-4 4-4-4\", key: \"f6ql7i\" }],\n  [\"path\", { d: \"M17 20V4\", key: \"1ejh1v\" }],\n  [\"path\", { d: \"m3 8 4-4 4 4\", key: \"11wl7u\" }],\n  [\"path\", { d: \"M7 4v16\", key: \"1glfcx\" }]\n];\nconst ArrowUpDown = createLucideIcon(\"arrow-up-down\", __iconNode);\n\nexport { __iconNode, ArrowUpDown as default };\n//# sourceMappingURL=arrow-up-down.js.map\n","'use client'\n\nimport React, { useState, useEffect } from 'react'\nimport { searchCompetitors, CompetitorSearchResponse } from '@/lib/api'\nimport { formatCurrency } from '@/lib/formatters'\nimport {\n  ShoppingCart,\n  RefreshCw,\n  Search,\n  BarChart,\n  MapPin,\n  AlertTriangle,\n  Users,\n  DollarSign,\n  TrendingUp,\n  TrendingDown,\n  AlertCircle,\n  Flame,\n  CheckCircle2,\n  Lightbulb,\n  ArrowUpDown,\n  Info\n} from 'lucide-react'\n\ninterface CompetitorAnalysisProps {\n  productId: number\n  currentPrice: number\n}\n\n// Helper-Funktionen fr localStorage\nconst getStorageKey = (productId: number) => `competitor_analysis_${productId}`\n\nconst loadCachedData = (productId: number): CompetitorSearchResponse | null => {\n  if (typeof window === 'undefined') return null\n  \n  try {\n    const cached = localStorage.getItem(getStorageKey(productId))\n    if (cached) {\n      const data = JSON.parse(cached)\n      const cacheAge = Date.now() - (data.cached_at || 0)\n      const maxAge = 24 * 60 * 60 * 1000 // 24 Stunden\n      \n      if (cacheAge < maxAge) {\n        return data.data\n      } else {\n        localStorage.removeItem(getStorageKey(productId))\n      }\n    }\n  } catch (error) {\n    console.error('Fehler beim Laden aus Cache:', error)\n  }\n  return null\n}\n\nconst saveCachedData = (productId: number, data: CompetitorSearchResponse) => {\n  if (typeof window === 'undefined') return\n  \n  try {\n    localStorage.setItem(getStorageKey(productId), JSON.stringify({\n      data,\n      cached_at: Date.now()\n    }))\n  } catch (error) {\n    console.error('Fehler beim Speichern im Cache:', error)\n  }\n}\n\n// Helper: Bestimme Produktzustand\nconst getCondition = (competitor: any): 'new' | 'used' | 'refurbished' => {\n  const titleLower = (competitor.title || '').toLowerCase()\n  const sourceLower = (competitor.source || '').toLowerCase()\n  \n  if (\n    titleLower.includes('gebraucht') ||\n    titleLower.includes('used') ||\n    sourceLower.includes('kleinanzeigen') ||\n    sourceLower.includes('willhaben')\n  ) {\n    return 'used'\n  } else if (\n    titleLower.includes('refurbished') ||\n    titleLower.includes('generalberholt')\n  ) {\n    return 'refurbished'\n  }\n  return 'new'\n}\n\nexport function CompetitorAnalysis({ productId, currentPrice }: CompetitorAnalysisProps) {\n  const [loading, setLoading] = useState(false)\n  const [data, setData] = useState<CompetitorSearchResponse | null>(null)\n  const [error, setError] = useState<string | null>(null)\n  const [filter, setFilter] = useState<'all' | 'new' | 'used' | 'refurbished'>('all')\n  \n  // Lade gecachte Daten beim Mount\n  useEffect(() => {\n    const cachedData = loadCachedData(productId)\n    if (cachedData) {\n      setData(cachedData)\n    }\n  }, [productId])\n  \n  const handleSearch = async (forceRefresh = false) => {\n    setLoading(true)\n    setError(null)\n    \n    try {\n      const result = await searchCompetitors(productId, { \n        maxResults: 5,\n        forceRefresh \n      })\n      setData(result)\n      saveCachedData(productId, result)\n    } catch (err: any) {\n      console.error('[CompetitorAnalysis] Fehler beim Laden:', err)\n      \n      let errorMessage = 'Fehler beim Laden der Wettbewerber-Daten'\n      \n      if (err?.response?.status === 404) {\n        errorMessage = 'Produkt nicht gefunden. Prfe Shop-Auswahl und Produkt-ID.'\n      } else if (err?.response?.status === 429) {\n        errorMessage = 'API-Limit erreicht. Bitte spter erneut versuchen.'\n      } else if (err?.response?.status === 500) {\n        errorMessage = 'Server-Fehler. Bitte spter erneut versuchen oder Support kontaktieren.'\n      } else if (err?.message) {\n        errorMessage = err.message\n      }\n      \n      setError(errorMessage)\n    } finally {\n      setLoading(false)\n    }\n  }\n  \n  // Berechne Metriken aus Daten\n  const calculateMetrics = () => {\n    if (!data || !data.competitors || data.competitors.length === 0) {\n      return null\n    }\n\n    const prices = data.competitors.map(c => c.price)\n    const minPrice = Math.min(...prices)\n    const maxPrice = Math.max(...prices)\n    const avgPrice = prices.reduce((a, b) => a + b, 0) / prices.length\n    const priceSpread = maxPrice - minPrice\n    const yourPriceDiff = currentPrice - avgPrice\n    const percentAboveAvg = avgPrice > 0 ? ((currentPrice - avgPrice) / avgPrice) * 100 : 0\n\n    // Gruppiere nach Zustand\n    const newOffers = data.competitors.filter(c => getCondition(c) === 'new')\n    const usedOffers = data.competitors.filter(c => getCondition(c) === 'used')\n    const refurbishedOffers = data.competitors.filter(c => getCondition(c) === 'refurbished')\n\n    const newMin = newOffers.length > 0 ? Math.min(...newOffers.map(c => c.price)) : null\n    const newMax = newOffers.length > 0 ? Math.max(...newOffers.map(c => c.price)) : null\n    const usedMin = usedOffers.length > 0 ? Math.min(...usedOffers.map(c => c.price)) : null\n\n    return {\n      minPrice,\n      maxPrice,\n      avgPrice,\n      priceSpread,\n      yourPriceDiff,\n      percentAboveAvg,\n      competitorCount: data.competitors.length,\n      newCount: newOffers.length,\n      usedCount: usedOffers.length,\n      refurbishedCount: refurbishedOffers.length,\n      newMin,\n      newMax,\n      usedMin\n    }\n  }\n\n  const metrics = calculateMetrics()\n  \n  // Bestimme Datenqualitt\n  const getDataQuality = () => {\n    if (!metrics) return { label: 'Unbekannt', color: 'gray', explanation: '' }\n    \n    const hasHighSpread = metrics.priceSpread / metrics.avgPrice > 0.4\n    const hasFewCompetitors = metrics.competitorCount < 3\n    \n    if (hasHighSpread || hasFewCompetitors) {\n      return {\n        label: 'Eingeschrnkt zuverlssig',\n        color: 'orange',\n        explanation: hasHighSpread ? 'sehr hohe Preisstreuung' : 'zu wenig vergleichbare Angebote'\n      }\n    }\n    \n    return {\n      label: 'Zuverlssig',\n      color: 'green',\n      explanation: ''\n    }\n  }\n\n  const dataQuality = getDataQuality()\n  \n  // Berechne Position auf Scale (0-100%)\n  const getYourPricePosition = () => {\n    if (!metrics) return 100\n    const range = metrics.maxPrice - metrics.minPrice\n    if (range === 0) return 100\n    const position = ((currentPrice - metrics.minPrice) / range) * 100\n    return Math.min(100, Math.max(0, position))\n  }\n\n  // Filtere und sortiere Competitors\n  const filteredCompetitors = data?.competitors ? data.competitors.filter(comp => {\n    if (filter === 'all') return true\n    return getCondition(comp) === filter\n  }).sort((a, b) => a.price - b.price) : []\n\n  // Zhle nach Zustand\n  const newCount = data?.competitors ? data.competitors.filter(c => getCondition(c) === 'new').length : 0\n  const refurbishedCount = data?.competitors ? data.competitors.filter(c => getCondition(c) === 'refurbished').length : 0\n\n  // Loading State\n  if (loading) {\n    return (\n      <div className=\"competitor-content\">\n        <div className=\"text-center py-12\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Suche Wettbewerber-Preise...</p>\n        </div>\n      </div>\n    )\n  }\n\n  // Error State\n  if (error) {\n    return (\n      <div className=\"competitor-content\">\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700\">\n          <p className=\"text-sm font-medium mb-1\"> Fehler</p>\n          <p className=\"text-sm\">{error}</p>\n        </div>\n      </div>\n    )\n  }\n\n  // Initial State\n  if (!data) {\n    return (\n      <div className=\"competitor-content\">\n        <div className=\"text-center py-12 text-gray-500\">\n          <p className=\"mb-2\">Noch keine Wettbewerber-Daten geladen.</p>\n          <button\n            onClick={() => handleSearch(false)}\n            className=\"btn-search\"\n          >\n            <Search className=\"h-4 w-4\" />\n            Wettbewerber suchen\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  // Results\n  if (!metrics) {\n    return (\n      <div className=\"competitor-content\">\n        <div className=\"text-center py-8 text-gray-500\">\n          <p>Keine Wettbewerber-Daten verfgbar.</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"competitor-content\">\n      \n      {/* Header with Actions */}\n      <div className=\"competitor-header\">\n        <div className=\"competitor-title-row\">\n          <div className=\"competitor-icon-main\">\n            <ShoppingCart className=\"h-7 w-7 text-white\" />\n          </div>\n          <h3 className=\"competitor-title\">Wettbewerbsanalyse</h3>\n        </div>\n        \n        <div className=\"competitor-actions\">\n          {data && (\n            <button \n              className=\"btn-refresh\"\n              onClick={() => handleSearch(true)}\n              disabled={loading}\n            >\n              <RefreshCw className=\"h-4 w-4\" />\n              Aktualisieren\n            </button>\n          )}\n          <button\n            className=\"btn-search\"\n            onClick={() => handleSearch(false)}\n            disabled={loading}\n          >\n            <Search className=\"h-4 w-4\" />\n            Erneut suchen\n          </button>\n        </div>\n      </div>\n\n      {/* Price Position Visualization - HERO */}\n      <div className=\"price-position-hero\">\n        <div className=\"price-position-header\">\n          <div className=\"price-position-icon\">\n            <BarChart className=\"h-6 w-6 text-green-600\" />\n          </div>\n          <h4 className=\"price-position-title\">\n             Deine Marktposition auf einen Blick\n          </h4>\n        </div>\n        \n        {/* Price Scale */}\n        <div className=\"price-scale-container\">\n          {/* Labels */}\n          <div className=\"price-scale-labels\">\n            <div className=\"price-scale-label cheapest\">\n              <div className=\"price-scale-label-icon\"></div>\n              <div className=\"price-scale-label-text\">Gnstigster</div>\n              <div className=\"price-scale-value\">{formatCurrency(metrics.minPrice)}</div>\n            </div>\n            \n            <div className=\"price-scale-label average\">\n              <div className=\"price-scale-label-icon\"></div>\n              <div className=\"price-scale-label-text\">-Preis</div>\n              <div className=\"price-scale-value\">{formatCurrency(metrics.avgPrice)}</div>\n            </div>\n            \n            <div className=\"price-scale-label expensive\">\n              <div className=\"price-scale-label-icon\"></div>\n              <div className=\"price-scale-label-text\">Teuerster</div>\n              <div className=\"price-scale-value\">{formatCurrency(metrics.maxPrice)}</div>\n            </div>\n          </div>\n          \n          {/* Gradient Bar with Marker */}\n          <div className=\"price-scale-bar\">\n            {/* Your Price Marker */}\n            <div className=\"your-price-marker\" style={{ left: `${getYourPricePosition()}%` }}>\n              <div className=\"price-marker-pin\">\n                <MapPin className=\"price-marker-icon\" />\n              </div>\n              <div className=\"price-marker-label\">\n                DU\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        {/* Warning Box */}\n        {metrics.percentAboveAvg > 50 && (\n          <div className=\"price-position-warning\">\n            <AlertTriangle className=\"warning-icon\" />\n            <div className=\"warning-content\">\n              <h4> Du bist {metrics.percentAboveAvg.toFixed(1)}% teurer als der Durchschnitt</h4>\n              <p>\n                Kunden werden wahrscheinlich zur Konkurrenz wechseln.\n              </p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Market Stats Grid */}\n      <div className=\"market-stats-grid\">\n        {/* Gefundene Anbieter */}\n        <div className=\"group relative overflow-hidden rounded-xl bg-slate-800/80 border border-slate-700/50 p-6 hover:border-blue-500/50 transition-all\">\n          <div className=\"flex items-center gap-3 mb-3\">\n            <div className=\"w-10 h-10 rounded-lg bg-blue-500/10 border border-blue-500/20 flex items-center justify-center\">\n              <Users className=\"w-5 h-5 text-blue-400\" />\n            </div>\n            <span className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider\">\n              Gefundene Anbieter\n            </span>\n          </div>\n          <span className=\"text-3xl font-bold text-white\">{metrics.competitorCount}</span>\n        </div>\n        \n        {/* Durchschnittspreis */}\n        <div className=\"group relative overflow-hidden rounded-xl bg-slate-800/80 border border-slate-700/50 p-6 hover:border-green-500/50 transition-all\">\n          <div className=\"flex items-center gap-3 mb-3\">\n            <div className=\"w-10 h-10 rounded-lg bg-green-500/10 border border-green-500/20 flex items-center justify-center\">\n              <TrendingUp className=\"w-5 h-5 text-green-400\" />\n            </div>\n            <span className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider\">\n              Durchschnittspreis\n            </span>\n          </div>\n          <span className=\"text-3xl font-bold text-white\">{formatCurrency(metrics.avgPrice)}</span>\n        </div>\n        \n        {/* Preisspanne */}\n        <div className=\"group relative overflow-hidden rounded-xl bg-slate-800/80 border border-slate-700/50 p-6 hover:border-purple-500/50 transition-all\">\n          <div className=\"flex items-center gap-3 mb-3\">\n            <div className=\"w-10 h-10 rounded-lg bg-purple-500/10 border border-purple-500/20 flex items-center justify-center\">\n              <ArrowUpDown className=\"w-5 h-5 text-purple-400\" />\n            </div>\n            <span className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider\">\n              Preisspanne\n            </span>\n          </div>\n          <span className=\"text-3xl font-bold text-white\">{formatCurrency(metrics.priceSpread)}</span>\n        </div>\n        \n        {/* Abweichung vom Durchschnitt */}\n        <div className=\"group relative overflow-hidden rounded-xl bg-slate-800/80 border border-slate-700/50 p-6 hover:border-orange-500/50 transition-all\">\n          <div className=\"flex items-center gap-3 mb-3\">\n            <div className=\"w-10 h-10 rounded-lg bg-orange-500/10 border border-orange-500/20 flex items-center justify-center\">\n              <AlertCircle className=\"w-5 h-5 text-orange-400\" />\n            </div>\n            <span className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider\">\n              Abweichung\n            </span>\n          </div>\n          <div className=\"flex items-baseline gap-2\">\n            <span className=\"text-3xl font-bold text-orange-400\">+{formatCurrency(metrics.yourPriceDiff)}</span>\n            <span className=\"text-sm text-slate-400\">teurer</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Product Status */}\n      {metrics.newCount > 0 && (\n        <div className=\"product-status-box\">\n          <div className=\"status-row\">\n            <span className=\"status-label\"> Produktzustand:</span>\n            <span className=\"status-value\">\n              Neuware: {metrics.newCount} Anbieter bieten von{' '}\n              {metrics.newMin && formatCurrency(metrics.newMin)} - {metrics.newMax && formatCurrency(metrics.newMax)}\n            </span>\n          </div>\n        </div>\n      )}\n\n      {/* Competitors List Header */}\n      <div className=\"competitors-section-header\">\n        <div className=\"competitors-section-title\">\n          <div className=\"competitors-section-icon\">\n            <Flame className=\"h-4 w-4 text-white\" />\n          </div>\n          <span> {metrics.competitorCount} Wettbewerber im Vergleich</span>\n        </div>\n        \n        {/* Filter Tabs */}\n        <div className=\"filter-tabs\">\n          <button \n            className={`filter-tab ${filter === 'all' ? 'active' : ''}`}\n            onClick={() => setFilter('all')}\n          >\n            Alle\n          </button>\n          {newCount > 0 && (\n            <button \n              className={`filter-tab ${filter === 'new' ? 'active' : ''}`}\n              onClick={() => setFilter('new')}\n            >\n              Nur Neuware ({newCount})\n            </button>\n          )}\n          {refurbishedCount > 0 && (\n            <button \n              className={`filter-tab ${filter === 'refurbished' ? 'active' : ''}`}\n              onClick={() => setFilter('refurbished')}\n            >\n              Nur Refurbished ({refurbishedCount})\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Competitors Cards */}\n      <div className=\"competitors-list\">\n        {filteredCompetitors.map((competitor, idx) => {\n          const condition = getCondition(competitor)\n          const priceDiff = currentPrice - competitor.price\n          const priceDiffPct = competitor.price > 0 ? (priceDiff / competitor.price) * 100 : 0\n          const isCheapest = idx === 0\n          const isExpensive = idx === filteredCompetitors.length - 1\n          \n          // Avatar basierend auf Position\n          let avatarClass = 'avatar-gray'\n          let avatarEmoji = ''\n          if (isCheapest) {\n            avatarClass = 'avatar-gray'\n            avatarEmoji = ''\n          } else if (isExpensive) {\n            avatarClass = 'avatar-gray'\n            avatarEmoji = ''\n          } else {\n            avatarClass = 'avatar-gold'\n            avatarEmoji = ''\n          }\n          \n          return (\n            <div key={idx} className=\"competitor-card group relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-slate-700/50 backdrop-blur-sm p-6 hover:border-slate-600/50 hover:shadow-xl hover:shadow-blue-500/10 transition-all duration-300\">\n              {/* Glow Effect */}\n              <div className={`absolute -top-20 -right-20 w-40 h-40 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 ${\n                isCheapest ? 'bg-green-500/5' : isExpensive ? 'bg-red-500/5' : 'bg-blue-500/5'\n              }`} />\n              \n              {/* Rank Badge - Prominenter */}\n              <div className=\"absolute top-4 left-4 flex items-center gap-2\">\n                <div className={`w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg shadow-lg ${\n                  isCheapest \n                    ? 'bg-green-500/20 border-2 border-green-500/50 text-green-400' \n                    : isExpensive \n                    ? 'bg-red-500/20 border-2 border-red-500/50 text-red-400'\n                    : 'bg-blue-500/20 border-2 border-blue-500/50 text-blue-400'\n                }`}>\n                  #{idx + 1}\n                </div>\n                {isExpensive && (\n                  <span className=\"px-2 py-0.5 rounded-md bg-red-500/20 border border-red-500/30 text-xs font-semibold text-red-400\">\n                    Teuerster\n                  </span>\n                )}\n              </div>\n              \n              {/* Card Content */}\n              <div className=\"pl-16\">\n                {/* Competitor Info */}\n                <div className=\"flex items-center gap-4 mb-4\">\n                  <div className={`w-14 h-14 rounded-xl flex items-center justify-center text-2xl shadow-md ${\n                    isCheapest \n                      ? 'bg-green-500/20 border border-green-500/30' \n                      : isExpensive \n                      ? 'bg-red-500/20 border border-red-500/30'\n                      : 'bg-blue-500/20 border border-blue-500/30'\n                  }`}>\n                    {avatarEmoji}\n                  </div>\n                  \n                  <div className=\"flex-1\">\n                    <p className=\"text-lg font-bold text-white mb-1\">\n                      {competitor.source || 'Unbekannt'}\n                    </p>\n                    <p className=\"text-sm text-slate-400 line-clamp-2 mb-2\">\n                      {competitor.title || 'Kein Titel verfgbar'}\n                    </p>\n                    <div className=\"competitor-badges\">\n                      {competitor.rating && (\n                        <span className=\"competitor-badge badge-rating\">\n                           {competitor.rating.toFixed(1)} Sterne\n                        </span>\n                      )}\n                      {condition === 'new' && (\n                        <span className=\"competitor-badge badge-new\">\n                          Neuware\n                        </span>\n                      )}\n                      {condition === 'refurbished' && (\n                        <span className=\"competitor-badge badge-refurbished\">\n                          Refurbished\n                        </span>\n                      )}\n                      {condition === 'used' && (\n                        <span className=\"competitor-badge badge-condition\">\n                          Gebraucht\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                  \n                  {/* Price - Prominenter */}\n                  <div className=\"text-right\">\n                    <p className=\"text-3xl font-bold text-white mb-1\">\n                      {formatCurrency(competitor.price)}\n                    </p>\n                    <div className={`inline-flex items-center gap-1.5 px-3 py-1 rounded-lg ${\n                      priceDiff < 0\n                        ? 'bg-green-500/10 border border-green-500/20'\n                        : 'bg-red-500/10 border border-red-500/20'\n                    }`}>\n                      {priceDiff < 0 ? (\n                        <TrendingDown className=\"w-3.5 h-3.5 text-green-400\" />\n                      ) : (\n                        <TrendingUp className=\"w-3.5 h-3.5 text-red-400\" />\n                      )}\n                      <span className={`text-xs font-bold ${\n                        priceDiff < 0 ? 'text-green-400' : 'text-red-400'\n                      }`}>\n                        {priceDiff < 0 ? '' : '+'}{formatCurrency(Math.abs(priceDiff))}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )\n        })}\n      </div>\n\n      {/* Data Quality Footer */}\n      <div className=\"rounded-xl bg-slate-800/50 border border-slate-700/50 p-6\">\n        {/* Header */}\n        <div className=\"flex items-center gap-3 mb-4\">\n          <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${\n            dataQuality.label === 'Eingeschrnkt zuverlssig' \n              ? 'bg-yellow-500/10 border border-yellow-500/20' \n              : 'bg-green-500/10 border border-green-500/20'\n          }`}>\n            {dataQuality.label === 'Eingeschrnkt zuverlssig' ? (\n              <AlertCircle className=\"w-5 h-5 text-yellow-400\" />\n            ) : (\n              <CheckCircle2 className=\"w-5 h-5 text-green-400\" />\n            )}\n          </div>\n          <div>\n            <h3 className=\"text-lg font-bold text-white\">Datenqualitt & Aktualitt</h3>\n            <p className=\"text-sm text-slate-400\">\n              {dataQuality.label === 'Eingeschrnkt zuverlssig' ? ' Eingeschrnkt zuverlssig' : ' Zuverlssig'} - Heute aktualisiert\n            </p>\n          </div>\n        </div>\n        \n        {/* Quality Score Badge */}\n        <div className={`inline-flex items-center gap-2 px-4 py-2 rounded-lg mb-4 ${\n          dataQuality.label === 'Eingeschrnkt zuverlssig'\n            ? 'bg-yellow-500/10 border border-yellow-500/20'\n            : 'bg-green-500/10 border border-green-500/20'\n        }`}>\n          <div className=\"flex items-center gap-1\">\n            {dataQuality.label === 'Eingeschrnkt zuverlssig' ? (\n              <>\n                <div className=\"w-2 h-2 rounded-full bg-yellow-400\" />\n                <div className=\"w-2 h-2 rounded-full bg-yellow-400\" />\n                <div className=\"w-2 h-2 rounded-full bg-slate-600\" />\n              </>\n            ) : (\n              <>\n                <div className=\"w-2 h-2 rounded-full bg-green-400\" />\n                <div className=\"w-2 h-2 rounded-full bg-green-400\" />\n                <div className=\"w-2 h-2 rounded-full bg-green-400\" />\n              </>\n            )}\n          </div>\n          <span className={`text-sm font-bold ${\n            dataQuality.label === 'Eingeschrnkt zuverlssig' ? 'text-yellow-400' : 'text-green-400'\n          }`}>\n            Qualitt: {dataQuality.label === 'Eingeschrnkt zuverlssig' ? 'Mittel' : 'Hoch'}\n          </span>\n        </div>\n        \n        {/* Strukturierte Liste */}\n        <div className=\"space-y-3 mb-4\">\n          <div className=\"flex items-start gap-3\">\n            <Info className=\"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0\" />\n            <p className=\"text-sm text-slate-300\">\n              Die Produkte knnten unterschiedliche Varianten sein\n            </p>\n          </div>\n          \n          <div className=\"flex items-start gap-3\">\n            <Info className=\"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0\" />\n            <p className=\"text-sm text-slate-300\">\n              Einige Angebote knnten nicht mehr verfgbar sein\n            </p>\n          </div>\n          \n          <div className=\"flex items-start gap-3\">\n            <Info className=\"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0\" />\n            <p className=\"text-sm text-slate-300\">\n              Preise knnen sich schnell ndern\n            </p>\n          </div>\n        </div>\n        \n        {/* Was das bedeutet */}\n        <div className=\"px-4 py-3 rounded-lg bg-slate-900/50 border border-slate-700/30 mb-4\">\n          <p className=\"text-sm text-slate-400\">\n            <span className=\"font-semibold text-slate-300\">Das bedeutet:</span> {dataQuality.explanation \n              ? `Die Preise zeigen ${dataQuality.explanation}. Sie geben einen guten berblick, sollten aber vor finalen Entscheidungen verifiziert werden.`\n              : 'Die Preise geben einen guten berblick und knnen fr Preisentscheidungen verwendet werden.'}\n          </p>\n        </div>\n        \n        {/* CTA Button */}\n        <button \n          onClick={() => handleSearch(true)}\n          disabled={loading}\n          className=\"w-full px-4 py-3 rounded-lg bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600/50 disabled:cursor-not-allowed text-white font-semibold text-sm flex items-center justify-center gap-2 transition-colors\"\n        >\n          <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\n          <span>Daten jetzt aktualisieren</span>\n        </button>\n      </div>\n\n    </div>\n  )\n}\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M13 21h8\", key: \"1jsn5i\" }],\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ]\n];\nconst PenLine = createLucideIcon(\"pen-line\", __iconNode);\n\nexport { __iconNode, PenLine as default };\n//# sourceMappingURL=pen-line.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"6\", key: \"1vlfrh\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"2\", key: \"1c9p78\" }]\n];\nconst Target = createLucideIcon(\"target\", __iconNode);\n\nexport { __iconNode, Target as default };\n//# sourceMappingURL=target.js.map\n","'use client'\n\nimport React from 'react'\nimport { TrendingUp, TrendingDown, AlertTriangle, CheckCircle, CheckCircle2, DollarSign, Edit2, Edit3, Target, ShoppingCart, Calendar, LineChart, Zap, ArrowUpRight } from 'lucide-react'\nimport '@/app/styles/recommendations.css'\n\ninterface MarginDisplayProps {\n  marginData: {\n    has_cost_data: boolean\n    selling_price?: number\n    net_revenue?: number\n    costs?: {\n      purchase: number\n      shipping: number\n      packaging: number\n      payment_fee: number\n      total_variable: number\n    }\n    margin?: {\n      euro: number\n      percent: number\n    }\n    break_even_price?: number\n    recommended_min_price?: number\n    is_above_break_even?: boolean\n    is_above_min_margin?: boolean\n    vat_rate?: number\n    country_code?: string\n    payment_provider?: string\n  }\n  compact?: boolean\n  onAddCosts?: () => void\n  onEditCosts?: () => void\n}\n\nexport function MarginDisplay({ marginData, compact = false, onAddCosts, onEditCosts }: MarginDisplayProps) {\n  \n  if (!marginData.has_cost_data) {\n    return (\n      <div className=\"border p-4\" style={{ backgroundColor: '#1e293b', borderColor: '#475569' }}>\n        <div className=\"flex items-start gap-3\">\n          <div className=\"flex-shrink-0 w-8 h-8 flex items-center justify-center\" style={{ backgroundColor: '#334155' }}>\n            <span className=\"text-lg\"></span>\n          </div>\n          <div className=\"flex-1\">\n            <h3 className=\"text-sm font-semibold mb-1\" style={{ color: '#f1f5f9' }}>\n              Noch prziser mit Kostendaten\n            </h3>\n            <p className=\"text-xs mb-3\" style={{ color: '#cbd5e1' }}>\n              Die Preisempfehlung funktioniert auch ohne Kosten. \n              <strong> Mit Kostendaten</strong> knnen wir zustzlich deine <strong>Marge optimieren</strong> und \n              sicherstellen, dass du immer profitabel bleibst.\n            </p>\n            {onAddCosts && (\n              <button \n                onClick={onAddCosts}\n                className=\"text-xs font-medium transition\" style={{ color: '#60a5fa', textDecoration: 'none' }}\n              >\n                Kosten hinterlegen (optional)\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    )\n  }\n  \n  const marginColor = marginData.is_above_min_margin \n    ? 'text-green-600' \n    : marginData.is_above_break_even \n    ? 'text-orange-600' \n    : 'text-red-600'\n  \n  const marginBgColor = marginData.is_above_min_margin \n    ? { backgroundColor: '#064e3b', borderColor: '#10b981' }\n    : marginData.is_above_break_even \n    ? { backgroundColor: '#78350f', borderColor: '#f59e0b' }\n    : { backgroundColor: '#7f1d1d', borderColor: '#ef4444' }\n  \n  const marginIcon = marginData.is_above_min_margin \n    ? <CheckCircle className=\"w-5 h-5 text-green-600\" />\n    : marginData.is_above_break_even \n    ? <AlertTriangle className=\"w-5 h-5 text-orange-600\" />\n    : <TrendingDown className=\"w-5 h-5 text-red-600\" />\n  \n  // Compact version (for inline use)\n  if (compact) {\n    return (\n      <div className=\"inline-flex items-center gap-2 px-3 py-1.5 border-2\" style={marginBgColor}>\n        {marginIcon}\n        <span className={`font-semibold ${marginColor}`}>\n          {marginData.margin?.percent.toFixed(1)}% Marge\n        </span>\n        <span className=\"text-sm\" style={{ color: '#94a3b8' }}>\n          ({marginData.margin?.euro.toFixed(2)})\n        </span>\n      </div>\n    )\n  }\n  \n  // Full version\n  return (\n    <div className=\"margin-content\">\n      \n      {/* Header with Success Badge */}\n      <div className=\"margin-header\">\n        <h3 className=\"margin-title\">\n          <DollarSign className=\"margin-title-icon\" />\n          Margin-Analyse\n        </h3>\n        \n        <div className=\"flex items-center gap-3\">\n          {marginData.margin && (\n            <div className=\"margin-success-badge\">\n              <CheckCircle2 className=\"h-6 w-6\" style={{ color: '#a7f3d0' }} />\n              <span className=\"margin-success-percentage\">\n                {marginData.margin.percent.toFixed(1)}%\n              </span>\n            </div>\n          )}\n          \n          {/* Edit Button */}\n          {marginData.has_cost_data && onEditCosts && (\n            <button\n              onClick={onEditCosts}\n              className=\"margin-edit-button\"\n              title=\"Kosten bearbeiten\"\n              aria-label=\"Kostendaten bearbeiten\"\n            >\n              <Edit3 className=\"h-4 w-4\" />\n              Bearbeiten\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Premium Price Grid with Icons & Gradients */}\n      <div className=\"price-grid\">\n        {/* Verkaufspreis Card */}\n        <div className=\"group relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-slate-700/50 backdrop-blur-sm p-6 hover:border-slate-600/50 hover:shadow-xl hover:shadow-purple-500/10 transition-all duration-300\">\n          {/* Glow Effect */}\n          <div className=\"absolute -top-20 -right-20 w-40 h-40 bg-purple-500/5 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\n          \n          <div className=\"relative z-10\">\n            {/* Icon */}\n            <div className=\"inline-flex items-center justify-center w-12 h-12 rounded-xl bg-purple-500/10 border border-purple-500/20 mb-4\">\n              <DollarSign className=\"w-6 h-6 text-purple-400\" />\n            </div>\n            \n            {/* Label */}\n            <div className=\"price-box-label\">Verkaufspreis</div>\n            \n            {/* Value */}\n            <div className=\"price-box-value\">\n              {marginData.selling_price?.toFixed(2) || '0.00'}\n            </div>\n          </div>\n        </div>\n        \n        {/* Nettoerls Card */}\n        <div className=\"group relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-slate-700/50 backdrop-blur-sm p-6 hover:border-slate-600/50 hover:shadow-xl hover:shadow-blue-500/10 transition-all duration-300\">\n          {/* Glow Effect */}\n          <div className=\"absolute -top-20 -right-20 w-40 h-40 bg-blue-500/5 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\n          \n          <div className=\"relative z-10\">\n            {/* Icon */}\n            <div className=\"inline-flex items-center justify-center w-12 h-12 rounded-xl bg-blue-500/10 border border-blue-500/20 mb-4\">\n              <Target className=\"w-6 h-6 text-blue-400\" />\n            </div>\n            \n            {/* Label */}\n            <div className=\"price-box-label\">Nettoerls</div>\n            \n            {/* Value */}\n            <div className=\"price-box-value\">\n              {marginData.net_revenue?.toFixed(2) || '0.00'}\n            </div>\n            \n            {/* Meta */}\n            {marginData.vat_rate && (\n              <div className=\"price-box-meta\">\n                (nach {(marginData.vat_rate * 100).toFixed(0)}% MwSt)\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Variable Costs */}\n      {marginData.costs && (\n        <div className=\"variable-costs-section\">\n          <div className=\"section-label\">Variable Kosten:</div>\n          \n          <div className=\"costs-list\">\n            <div className=\"cost-item\">\n              <div className=\"cost-item-label\">\n                <span className=\"cost-item-bullet\"></span>\n                Einkauf:\n              </div>\n              <div className=\"cost-item-value\">\n                {marginData.costs.purchase.toFixed(2)}\n              </div>\n            </div>\n            \n            <div className=\"cost-item\">\n              <div className=\"cost-item-label\">\n                <span className=\"cost-item-bullet\"></span>\n                Versand:\n              </div>\n              <div className=\"cost-item-value\">\n                {marginData.costs.shipping.toFixed(2)}\n              </div>\n            </div>\n            \n            <div className=\"cost-item\">\n              <div className=\"cost-item-label\">\n                <span className=\"cost-item-bullet\"></span>\n                Verpackung:\n              </div>\n              <div className=\"cost-item-value\">\n                {marginData.costs.packaging.toFixed(2)}\n              </div>\n            </div>\n            \n            <div className=\"cost-item\">\n              <div className=\"cost-item-label\">\n                <span className=\"cost-item-bullet\"></span>\n                Payment Fee\n                {marginData.payment_provider && (\n                  <span className=\"text-xs text-gray-500\">({marginData.payment_provider})</span>\n                )}:\n              </div>\n              <div className=\"cost-item-value\">\n                {marginData.costs.payment_fee.toFixed(2)}\n              </div>\n            </div>\n            \n            <div className=\"cost-item total-row\">\n              <div className=\"cost-item-label\">\n                Gesamt:\n              </div>\n              <div className=\"cost-item-value\">\n                {marginData.costs.total_variable.toFixed(2)}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Contribution Margin - HERO BOX */}\n      {marginData.margin && (\n        <div className=\"contribution-margin-box\">\n          <div className=\"contribution-margin-header\">\n            <CheckCircle2 className=\"contribution-check-icon\" />\n            <span className=\"contribution-label\">Deckungsbeitrag I:</span>\n          </div>\n          <div className=\"contribution-amount\">\n            {marginData.margin.euro.toFixed(2)}\n          </div>\n          <div className=\"contribution-percentage\">\n            ({marginData.margin.percent.toFixed(1)}%)\n          </div>\n        </div>\n      )}\n\n      {/* Break-Even & Min. Recommendation */}\n      <div className=\"insights-grid\">\n        {marginData.break_even_price && (\n          <div className=\"insight-box warning\">\n            <div className=\"insight-header\">\n              <AlertTriangle className=\"insight-icon warning\" />\n              <span className=\"insight-label\">Break-Even:</span>\n            </div>\n            <div className=\"insight-value\">\n              {marginData.break_even_price.toFixed(2)}\n            </div>\n          </div>\n        )}\n        \n        {marginData.recommended_min_price && (\n          <div className=\"insight-box success\">\n            <div className=\"insight-header\">\n              <CheckCircle2 className=\"insight-icon success\" />\n              <span className=\"insight-label\">Min. empfohlen (20%):</span>\n            </div>\n            <div className=\"insight-value\">\n              {marginData.recommended_min_price.toFixed(2)}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Health Banner */}\n      {!marginData.is_above_break_even && (\n        <div className=\"health-banner\" style={{ background: 'linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)', borderColor: '#f87171' }}>\n          <AlertTriangle className=\"health-icon\" style={{ color: '#dc2626' }} />\n          <div className=\"health-content\">\n            <div className=\"health-title\" style={{ color: '#991b1b' }}> KRITISCH: Unter Break-Even</div>\n            <div className=\"health-description\" style={{ color: '#7f1d1d' }}>\n              Dieser Preis liegt unter deinen Kosten. Du machst Verlust bei jedem Verkauf!\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {marginData.is_above_break_even && !marginData.is_above_min_margin && (\n        <div className=\"health-banner\" style={{ background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)', borderColor: '#fbbf24' }}>\n          <AlertTriangle className=\"health-icon\" style={{ color: '#f59e0b' }} />\n          <div className=\"health-content\">\n            <div className=\"health-title\" style={{ color: '#92400e' }}> NIEDRIGE MARGE</div>\n            <div className=\"health-description\" style={{ color: '#78350f' }}>\n              Marge liegt unter der empfohlenen Mindestmarge von 20%. Bercksichtige Fixkosten und unerwartete Ausgaben.\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {marginData.is_above_min_margin && (\n        <div className=\"health-banner\">\n          <CheckCircle2 className=\"health-icon\" />\n          <div className=\"health-content\">\n            <div className=\"health-title\"> Gesunde Marge</div>\n            <div className=\"health-description\">\n              Marge ber 20% - gute Profitabilitt! Genug Puffer fr Fixkosten und Gewinn.\n            </div>\n          </div>\n        </div>\n      )}\n      \n    </div>\n  )\n}\n\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ]\n];\nconst Pen = createLucideIcon(\"pen\", __iconNode);\n\nexport { __iconNode, Pen as default };\n//# sourceMappingURL=pen.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]];\nconst LoaderCircle = createLucideIcon(\"loader-circle\", __iconNode);\n\nexport { __iconNode, LoaderCircle as default };\n//# sourceMappingURL=loader-circle.js.map\n","'use client'\r\n\r\nimport React, { useState, useEffect } from 'react'\r\nimport { X, Info, TrendingUp, Loader2, Edit2, Check, X as XIcon } from 'lucide-react'\r\nimport { API_URL, getProductCosts, getCategoryDefaults, estimateCostsFromPrice, updateProductCosts, saveProductCosts } from '@/lib/api'\r\n\r\ninterface CostInputModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  productId: string\r\n  productTitle: string\r\n  currentPrice?: number\r\n  shopId: string\r\n  onSave: (costData: ProductCostData) => Promise<void>\r\n}\r\n\r\ninterface ProductCostData {\r\n  purchase_cost: number\r\n  shipping_cost: number\r\n  packaging_cost: number\r\n  payment_provider: string\r\n  country_code: string\r\n  category?: string\r\n}\r\n\r\ninterface CategoryDefaults {\r\n  typical_margin: number\r\n  shipping_estimate: number\r\n  packaging_estimate: number\r\n}\r\n\r\nexport function CostInputModal({\r\n  isOpen,\r\n  onClose,\r\n  productId,\r\n  productTitle,\r\n  currentPrice,\r\n  shopId,\r\n  onSave\r\n}: CostInputModalProps) {\r\n  const [costData, setCostData] = useState<ProductCostData>({\r\n    purchase_cost: 0,\r\n    shipping_cost: 0,\r\n    packaging_cost: 0,\r\n    payment_provider: 'stripe',\r\n    country_code: 'DE',\r\n    category: undefined\r\n  })\r\n  \r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [isSaving, setIsSaving] = useState(false)\r\n  const [showEstimates, setShowEstimates] = useState(false)\r\n  const [categoryDefaults, setCategoryDefaults] = useState<CategoryDefaults | null>(null)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [isEditing, setIsEditing] = useState(false)\r\n  const [savedCostData, setSavedCostData] = useState<ProductCostData | null>(null)\r\n  \r\n  const categories = ['fashion', 'electronics', 'beauty', 'home', 'food']\r\n  const paymentProviders = [\r\n    { value: 'stripe', label: 'Stripe (2.9% + 0.30)' },\r\n    { value: 'paypal', label: 'PayPal (2.49% + 0.35)' },\r\n    { value: 'klarna', label: 'Klarna (4.5%)' },\r\n    { value: 'custom', label: 'Custom' }\r\n  ]\r\n  \r\n  // Load existing cost data\r\n  useEffect(() => {\r\n    if (isOpen && productId) {\r\n      loadExistingCosts()\r\n    }\r\n  }, [isOpen, productId])\r\n  \r\n  const loadExistingCosts = async () => {\r\n    try {\r\n      setIsLoading(true)\r\n      setError(null)\r\n      const data = await getProductCosts(productId)\r\n      if (data) {\r\n        // Save original data for view mode\r\n        setSavedCostData({\r\n          purchase_cost: data.purchase_cost,\r\n          shipping_cost: data.shipping_cost,\r\n          packaging_cost: data.packaging_cost,\r\n          payment_provider: data.payment_provider,\r\n          country_code: data.country_code,\r\n          category: data.category\r\n        })\r\n        // Populate form with saved data\r\n        setCostData({\r\n          purchase_cost: data.purchase_cost,\r\n          shipping_cost: data.shipping_cost,\r\n          packaging_cost: data.packaging_cost,\r\n          payment_provider: data.payment_provider,\r\n          country_code: data.country_code,\r\n          category: data.category\r\n        })\r\n        setIsEditing(false) // Start in view mode\r\n      } else {\r\n        // 404 - No cost data exists yet, show empty form\r\n        setSavedCostData(null)\r\n        setCostData({\r\n          purchase_cost: 0,\r\n          shipping_cost: 0,\r\n          packaging_cost: 0,\r\n          payment_provider: 'stripe',\r\n          country_code: 'DE',\r\n          category: undefined\r\n        })\r\n        setIsEditing(true) // Auto-enable edit for new costs\r\n        setError(null) // No error for 404 - this is expected\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Failed to load costs:', error)\r\n      // Only show error if it's not a 404\r\n      if (error?.response?.status !== 404 && error?.status !== 404) {\r\n        setError('Fehler beim Laden der Kosten')\r\n      } else {\r\n        // 404 is expected - no cost data exists yet\r\n        setSavedCostData(null)\r\n        setIsEditing(true)\r\n        setError(null)\r\n      }\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n  \r\n  // Load category defaults when category changes\r\n  useEffect(() => {\r\n    if (costData.category) {\r\n      loadCategoryDefaults(costData.category)\r\n    }\r\n  }, [costData.category])\r\n  \r\n  const loadCategoryDefaults = async (category: string) => {\r\n    try {\r\n      const data = await getCategoryDefaults(category)\r\n      setCategoryDefaults(data)\r\n    } catch (error) {\r\n      console.error('Failed to load category defaults:', error)\r\n    }\r\n  }\r\n  \r\n  const handleEstimateCosts = async () => {\r\n    if (!currentPrice || !costData.category) {\r\n      setError('Bitte whle zuerst eine Kategorie')\r\n      return\r\n    }\r\n    \r\n    setIsLoading(true)\r\n    setError(null)\r\n    \r\n    try {\r\n      const estimates = await estimateCostsFromPrice(\r\n        currentPrice,\r\n        costData.category,\r\n        costData.country_code\r\n      )\r\n      \r\n      setCostData(prev => ({\r\n        ...prev,\r\n        purchase_cost: estimates.estimated_purchase_cost,\r\n        shipping_cost: estimates.estimated_shipping_cost,\r\n        packaging_cost: estimates.estimated_packaging_cost\r\n      }))\r\n      setShowEstimates(true)\r\n    } catch (error) {\r\n      console.error('Failed to estimate costs:', error)\r\n      setError('Fehler beim Schtzen der Kosten')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n  \r\n  const handleApplyDefaults = () => {\r\n    if (categoryDefaults) {\r\n      setCostData(prev => ({\r\n        ...prev,\r\n        shipping_cost: categoryDefaults.shipping_estimate,\r\n        packaging_cost: categoryDefaults.packaging_estimate\r\n      }))\r\n    }\r\n  }\r\n  \r\n  const handleSave = async () => {\r\n    // Validation\r\n    if (costData.purchase_cost <= 0) {\r\n      setError('Einkaufspreis muss grer als 0 sein')\r\n      return\r\n    }\r\n    \r\n    setIsSaving(true)\r\n    setError(null)\r\n    \r\n    try {\r\n      // Use PUT for update, POST for create\r\n      if (savedCostData) {\r\n        // Update existing\r\n        await updateProductCosts(productId, costData)\r\n      } else {\r\n        // Create new\r\n        await saveProductCosts(productId, costData)\r\n      }\r\n      \r\n      // Call parent callback\r\n      await onSave(costData)\r\n      \r\n      // Reload to get updated data\r\n      await loadExistingCosts()\r\n      //  WICHTIG: Nach Save direkt editierbar bleiben (nicht zurck zu View-Mode)\r\n      setIsEditing(true) // Direct edit mode after save!\r\n    } catch (error: any) {\r\n      console.error('Failed to save costs:', error)\r\n      //  Verbesserte Error-Message\r\n      const errorMessage = error?.message || error?.detail || 'Fehler beim Speichern der Kosten'\r\n      setError(errorMessage)\r\n    } finally {\r\n      setIsSaving(false)\r\n    }\r\n  }\r\n\r\n  const handleCancelEdit = () => {\r\n    // Reset form to saved data\r\n    if (savedCostData) {\r\n      setCostData({ ...savedCostData })\r\n    }\r\n    setIsEditing(false)\r\n    setError(null)\r\n  }\r\n  \r\n  if (!isOpen) return null\r\n  \r\n  const totalCosts = costData.purchase_cost + costData.shipping_cost + costData.packaging_cost\r\n  const estimatedMargin = currentPrice \r\n    ? ((currentPrice / 1.19 - totalCosts) / (currentPrice / 1.19) * 100)\r\n    : 0\r\n  \r\n  return (\r\n    <>\r\n      {/* Backdrop */}\r\n      <div \r\n        className=\"fixed inset-0 bg-black bg-opacity-50 z-40\"\r\n        onClick={onClose}\r\n      />\r\n      \r\n      {/* Modal */}\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-50 p-4\">\r\n        <div className=\"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n          \r\n          {/* Header */}\r\n          <div className=\"flex items-start justify-between p-6 border-b sticky top-0 bg-white z-10\">\r\n            <div className=\"flex-1\">\r\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-1\">\r\n                Kosten hinterlegen\r\n              </h2>\r\n              <p className=\"text-sm text-gray-600\">{productTitle}</p>\r\n            </div>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-2 hover:bg-gray-100 rounded-full transition\"\r\n            >\r\n              <X className=\"w-6 h-6\" />\r\n            </button>\r\n          </div>\r\n          \r\n          {/* Error Message */}\r\n          {error && (\r\n            <div className=\"mx-6 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\">\r\n              {error}\r\n            </div>\r\n          )}\r\n        \r\n        {/* Body */}\r\n        <div className=\"p-6 space-y-6\">\r\n          \r\n          {/* VIEW MODE: Show Saved Data + Prominent Edit Button */}\r\n          {savedCostData && !isEditing && (\r\n            <div className=\"bg-green-50 border-2 border-green-300 rounded-xl p-6 mb-8 shadow-md\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <div>\r\n                  <h3 className=\"text-xl font-bold text-green-800 mb-1\"> Gespeicherte Kosten</h3>\r\n                  <p className=\"text-sm text-green-700\">Klicke Bearbeiten um Werte anzupassen</p>\r\n                </div>\r\n                {/*  PROMINENTER EDIT-BUTTON */}\r\n                <button \r\n                  onClick={() => setIsEditing(true)}\r\n                  className=\"px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 flex items-center gap-2 shadow-md transition-all hover:scale-105\"\r\n                  title=\"Kosten bearbeiten\"\r\n                >\r\n                  <Edit2 className=\"w-4 h-4\" />\r\n                  Bearbeiten\r\n                </button>\r\n              </div>\r\n              \r\n              {/* Read-only Kosten-Grid */}\r\n              <div className=\"grid grid-cols-2 gap-4 text-sm mb-6\">\r\n                <div>\r\n                  <span className=\"text-gray-600\">Einkauf:</span>\r\n                  <span className=\"font-bold ml-2 text-gray-900\">{savedCostData.purchase_cost.toFixed(2)}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-gray-600\">Versand:</span>\r\n                  <span className=\"font-bold ml-2 text-gray-900\">{savedCostData.shipping_cost.toFixed(2)}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-gray-600\">Verpackung:</span>\r\n                  <span className=\"font-bold ml-2 text-gray-900\">{savedCostData.packaging_cost.toFixed(2)}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-gray-600\">Payment:</span>\r\n                  <span className=\"font-bold ml-2 text-gray-900\">{savedCostData.payment_provider}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-gray-600\">MwSt:</span>\r\n                  <span className=\"font-bold ml-2 text-gray-900\">{savedCostData.country_code}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-gray-600\">Kategorie:</span>\r\n                  <span className=\"font-bold ml-2 text-gray-900\">{savedCostData.category || 'N/A'}</span>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"pt-4 border-t border-green-300\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"font-bold text-gray-900\">Gesamt Kosten:</span>\r\n                  <span className=\"text-2xl font-bold text-green-600\">\r\n                    {(savedCostData.purchase_cost + savedCostData.shipping_cost + savedCostData.packaging_cost).toFixed(2)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {/* EDIT MODE: Show Form */}\r\n          {(isEditing || !savedCostData) && (\r\n            <>\r\n          \r\n          {/* Category Selection */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Kategorie\r\n            </label>\r\n            <select\r\n              value={costData.category || ''}\r\n              onChange={(e) => setCostData(prev => ({ ...prev, category: e.target.value }))}\r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              <option value=\"\">Kategorie whlen...</option>\r\n              {categories.map(cat => (\r\n                <option key={cat} value={cat}>\r\n                  {cat.charAt(0).toUpperCase() + cat.slice(1)}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            \r\n            {categoryDefaults && (\r\n              <div className=\"mt-2 p-3 bg-blue-50 rounded-lg\">\r\n                <div className=\"flex items-start gap-2\">\r\n                  <Info className=\"w-4 h-4 text-blue-600 mt-0.5\" />\r\n                  <div className=\"text-sm text-blue-900\">\r\n                    <p className=\"font-medium\">Typisch fr {costData.category}:</p>\r\n                    <p>Versand: {categoryDefaults.shipping_estimate.toFixed(2)}, \r\n                       Verpackung: {categoryDefaults.packaging_estimate.toFixed(2)}</p>\r\n                      <button\r\n                        onClick={handleApplyDefaults}\r\n                        className=\"text-blue-600 hover:text-blue-800 font-medium mt-1 underline\"\r\n                      >\r\n                         Werte bernehmen\r\n                      </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n            {/* Estimate Button */}\r\n          {currentPrice && costData.category && (\r\n            <button\r\n              onClick={handleEstimateCosts}\r\n              disabled={isLoading}\r\n              className=\"w-full flex items-center justify-center gap-2 py-3 px-4 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {isLoading ? (\r\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n              ) : (\r\n                <TrendingUp className=\"w-4 h-4\" />\r\n              )}\r\n              <span>\r\n                {isLoading ? 'Schtze...' : `Kosten schtzen (Verkaufspreis: ${currentPrice.toFixed(2)})`}\r\n              </span>\r\n            </button>\r\n          )}\r\n          \r\n          {showEstimates && (\r\n            <div className=\"p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800\">\r\n               Dies sind Schtzungen basierend auf Branchendurchschnitten. \r\n              Bitte mit echten Daten ersetzen!\r\n            </div>\r\n          )}\r\n          \r\n          {/* Cost Inputs */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            \r\n            {/* Purchase Cost */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                 Einkaufspreis (netto) *\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                  value={costData.purchase_cost || ''}\r\n                  onChange={(e) => setCostData(prev => ({ \r\n                    ...prev, \r\n                    purchase_cost: parseFloat(e.target.value) || 0 \r\n                  }))}\r\n                    className=\"w-full px-4 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    placeholder=\"0.00\"\r\n                    required\r\n                  />\r\n                  <span className=\"absolute right-3 top-2.5 text-gray-500\"></span>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Shipping Cost */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                 Versandkosten (pro Stck)\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                  value={costData.shipping_cost || ''}\r\n                  onChange={(e) => setCostData(prev => ({ \r\n                    ...prev, \r\n                    shipping_cost: parseFloat(e.target.value) || 0 \r\n                  }))}\r\n                    className=\"w-full px-4 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    placeholder=\"0.00\"\r\n                  />\r\n                  <span className=\"absolute right-3 top-2.5 text-gray-500\"></span>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Packaging Cost */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                 Verpackung (pro Stck)\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                  value={costData.packaging_cost || ''}\r\n                  onChange={(e) => setCostData(prev => ({ \r\n                    ...prev, \r\n                    packaging_cost: parseFloat(e.target.value) || 0 \r\n                  }))}\r\n                    className=\"w-full px-4 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    placeholder=\"0.00\"\r\n                  />\r\n                  <span className=\"absolute right-3 top-2.5 text-gray-500\"></span>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Payment Provider */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                 Payment Provider\r\n              </label>\r\n              <select\r\n                value={costData.payment_provider}\r\n                onChange={(e) => setCostData(prev => ({ ...prev, payment_provider: e.target.value }))}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                {paymentProviders.map(provider => (\r\n                  <option key={provider.value} value={provider.value}>\r\n                    {provider.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            \r\n            {/* Country Code */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                 Land (MwSt)\r\n              </label>\r\n              <select\r\n                value={costData.country_code}\r\n                onChange={(e) => setCostData(prev => ({ ...prev, country_code: e.target.value }))}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"DE\">Deutschland (19%)</option>\r\n                <option value=\"AT\">sterreich (20%)</option>\r\n                <option value=\"CH\">Schweiz (7.7%)</option>\r\n                <option value=\"GB\">UK (20%)</option>\r\n                <option value=\"US\">USA (0%)</option>\r\n              </select>\r\n            </div>\r\n            \r\n          </div>\r\n          \r\n          {/* Cost Summary */}\r\n          <div className=\"bg-gray-50 rounded-lg p-4 space-y-2\">\r\n            <div className=\"flex justify-between text-sm\">\r\n              <span className=\"text-gray-600\">Summe variable Kosten:</span>\r\n              <span className=\"font-semibold\">{totalCosts.toFixed(2)}</span>\r\n            </div>\r\n            \r\n            {currentPrice && (\r\n              <>\r\n                <div className=\"flex justify-between text-sm\">\r\n                  <span className=\"text-gray-600\">Aktueller Preis:</span>\r\n                  <span className=\"font-semibold\">{currentPrice.toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between text-lg font-bold pt-2 border-t\">\r\n                  <span>Geschtzte Marge:</span>\r\n                  <span className={estimatedMargin >= 20 ? 'text-green-600' : 'text-orange-600'}>\r\n                    {estimatedMargin.toFixed(1)}%\r\n                  </span>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n            </>\r\n          )}\r\n          \r\n        </div>\r\n        \r\n          {/* Footer */}\r\n          <div className=\"flex gap-3 p-6 border-t bg-gray-50 sticky bottom-0\">\r\n            {savedCostData && isEditing ? (\r\n              <>\r\n                <button\r\n                  onClick={handleCancelEdit}\r\n                  disabled={isSaving}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition disabled:opacity-50 flex items-center justify-center gap-2\"\r\n                >\r\n                  <XIcon className=\"w-4 h-4\" />\r\n                  Abbrechen\r\n                </button>\r\n                <button\r\n                  onClick={handleSave}\r\n                  disabled={isSaving || costData.purchase_cost === 0}\r\n                  className=\"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                >\r\n                  {isSaving ? (\r\n                    <>\r\n                      <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                      <span>Speichern...</span>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Check className=\"w-4 h-4\" />\r\n                      <span>Speichern</span>\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <button\r\n                  onClick={onClose}\r\n                  disabled={isSaving}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition disabled:opacity-50\"\r\n                >\r\n                  {savedCostData ? 'Schlieen' : 'Abbrechen'}\r\n                </button>\r\n                {!savedCostData && (\r\n                  <button\r\n                    onClick={handleSave}\r\n                    disabled={isSaving || costData.purchase_cost === 0}\r\n                    className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                  >\r\n                    {isSaving ? (\r\n                      <>\r\n                        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                        <span>Speichern...</span>\r\n                      </>\r\n                    ) : (\r\n                      <span>Kosten erfassen</span>\r\n                    )}\r\n                  </button>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n          \r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m18 15-6-6-6 6\", key: \"153udz\" }]];\nconst ChevronUp = createLucideIcon(\"chevron-up\", __iconNode);\n\nexport { __iconNode, ChevronUp as default };\n//# sourceMappingURL=chevron-up.js.map\n","'use client'\n\nimport { useState, useEffect, Suspense } from 'react'\nimport { Link } from '@/navigation'\nimport { useSearchParams, usePathname } from 'next/navigation'\nimport { ShopSwitcher } from '@/components/ShopSwitcher'\nimport { useShop } from '@/hooks/useShop'\nimport LatestRecommendation from '@/components/LatestRecommendation'\nimport { CompetitorAnalysis } from '@/components/CompetitorAnalysis'\nimport { MarginDisplay } from '@/components/margin/MarginDisplay'\nimport { CostInputModal } from '@/components/margin/CostInputModal'\nimport { fetchProducts, calculateMargin, saveProductCosts } from '@/lib/api'\nimport { ChevronDown, ChevronUp, Info, Package, DollarSign, BarChart, ShoppingCart, ArrowLeft, LayoutDashboard, Lightbulb } from 'lucide-react'\nimport '../../styles/recommendations.css'\n\nfunction RecommendationsContent() {\n  const pathname = usePathname()\n  const searchParams = useSearchParams()\n  const productIdParam = searchParams.get('product_id')\n  const [productId, setProductId] = useState(productIdParam ? Number(productIdParam) : 1)\n  const [currentPrice, setCurrentPrice] = useState<number>(0)\n  const [marginData, setMarginData] = useState<any>(null)\n  const [showCostModal, setShowCostModal] = useState(false)\n  const [productTitle, setProductTitle] = useState<string>('')\n  \n  // State fr Accordion-Bereiche (welche sind geffnet)\n  const [openSections, setOpenSections] = useState<{\n    margin: boolean\n    price: boolean\n    competitor: boolean\n  }>({\n    margin: false, //  Alle standardmig zugeklappt\n    price: false,\n    competitor: false\n  })\n\n  // State fr Info-Tooltips\n  const [showInfoTooltip, setShowInfoTooltip] = useState<{\n    margin: boolean\n    price: boolean\n    competitor: boolean\n  }>({\n    margin: false,\n    price: false,\n    competitor: false\n  })\n\n  const { isDemoMode, currentShop } = useShop()\n  \n  // Toggle-Funktion fr Accordion-Bereiche\n  const toggleSection = (section: 'margin' | 'price' | 'competitor') => {\n    setOpenSections(prev => ({\n      ...prev,\n      [section]: !prev[section]\n    }))\n  }\n\n  // Lade Produkt-Preis und Margin-Daten\n  useEffect(() => {\n    if (!productId || !currentShop) {\n      console.log('[RecommendationsPage] Missing productId or currentShop, skipping load')\n      return\n    }\n    \n    const loadProductData = async () => {\n      try {\n        console.log('[RecommendationsPage] Loading product data:', { productId, shopId: currentShop.id, isDemoMode })\n        const products = await fetchProducts() // Backend nutzt ShopContext\n        \n        // Debug: Log product types\n        console.log('[RecommendationsPage] Products received:', products.length, 'First ID type:', typeof products[0]?.id)\n        console.log('[RecommendationsPage] Searching for:', productId, 'Type:', typeof productId)\n        \n        // WICHTIG: Loose comparison fr Type-Mismatch (String vs Number)\n        const product = products.find((p: any) => String(p.id) === String(productId))\n        \n        if (!product) {\n          console.error('[RecommendationsPage] Product not found in current shop', { \n            productId, \n            productIdType: typeof productId,\n            currentShop, \n            productsCount: products.length,\n            availableIds: products.slice(0, 5).map((p: any) => ({ id: p.id, idType: typeof p.id }))\n          })\n          setMarginData({ has_cost_data: false, error: `Produkt ${productId} nicht im aktuellen Shop gefunden. Bitte Shop wechseln oder Produkt-ID prfen.` })\n          setCurrentPrice(0)\n          setProductTitle(`Product ${productId} (nicht gefunden)`)\n          return\n        }\n        \n        console.log('[RecommendationsPage] Product found:', { id: product.id, title: product.title, price: product.price })\n        \n        setCurrentPrice(product.price || 0)\n        setProductTitle(product.title || product.name || `Product ${productId}`)\n        \n        // Lade Margin-Daten wenn Preis vorhanden\n        if (product.price && product.price > 0) {\n          try {\n            const margin = await calculateMargin(productId.toString(), product.price)\n            setMarginData(margin)\n          } catch (error) {\n            // Keine Kostendaten vorhanden - das ist OK\n            setMarginData({ has_cost_data: false })\n          }\n        }\n      } catch (error) {\n        console.error('[RecommendationsPage] Fehler beim Laden der Produktdaten:', error)\n        setMarginData({ has_cost_data: false, error: 'Fehler beim Laden der Produktdaten.' })\n      }\n    }\n    \n    loadProductData()\n  }, [productId, currentShop?.id, isDemoMode])\n  \n  // Hre auf Shop-Wechsel Events\n  useEffect(() => {\n    const handleShopSwitch = (event: CustomEvent) => {\n      console.log('[RecommendationsPage] Shop switched event received:', event.detail)\n      // Reload product data when shop changes\n      if (productId) {\n        setTimeout(() => {\n          const loadProductData = async () => {\n            try {\n              const products = await fetchProducts()\n              // WICHTIG: Loose comparison fr Type-Mismatch (String vs Number)\n              const product = products.find((p: any) => String(p.id) === String(productId))\n              if (product) {\n                console.log('[RecommendationsPage] Product reloaded after shop switch:', { id: product.id, title: product.title, price: product.price })\n                setCurrentPrice(product.price || 0)\n                setProductTitle(product.title || product.name || `Product ${productId}`)\n              } else {\n                setMarginData({ has_cost_data: false, error: `Produkt ${productId} nicht im neuen Shop gefunden.` })\n              }\n            } catch (error) {\n              console.error('[RecommendationsPage] Error reloading product after shop switch:', error)\n            }\n          }\n          loadProductData()\n        }, 300)\n      }\n    }\n    \n    window.addEventListener('shop-switched', handleShopSwitch as EventListener)\n    return () => window.removeEventListener('shop-switched', handleShopSwitch as EventListener)\n  }, [productId])\n\n  // Schliee Tooltips beim Klick auerhalb\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      const target = event.target as HTMLElement\n      // Prfe ob Klick auerhalb der Info-Icons war\n      if (!target.closest('.info-tooltip-button')) {\n        setShowInfoTooltip({\n          margin: false,\n          price: false,\n          competitor: false\n        })\n      }\n    }\n\n    if (showInfoTooltip.margin || showInfoTooltip.price || showInfoTooltip.competitor) {\n      document.addEventListener('click', handleClickOutside)\n      return () => document.removeEventListener('click', handleClickOutside)\n    }\n  }, [showInfoTooltip])\n\n  return (\n    <div className=\"min-h-screen flex recommendations-page\" style={{ backgroundColor: '#0f172a' }}>\n      {/* Sidebar mit Shop-Switcher */}\n      <aside className=\"w-80 border-r p-6 overflow-y-auto shadow-sm\" style={{ background: 'linear-gradient(to bottom, #1e293b, #0f172a, #1e293b)', borderColor: '#334155' }}>\n        <div className=\"px-4 pt-6 pb-4 border-b border-gray-800/30\">\n          {/* Logo & Brand */}\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"relative group cursor-pointer\">\n              {/* Icon mit Premium Glow */}\n              <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/25 transition-all duration-300 group-hover:shadow-xl group-hover:shadow-blue-500/40 group-hover:scale-105\">\n                <span className=\"text-xl\"></span>\n              </div>\n              {/* Subtle Glow Background */}\n              <div className=\"absolute inset-0 bg-blue-500/10 blur-xl rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10\" />\n            </div>\n            \n            <div className=\"flex-1\">\n              <h2 className=\"text-lg font-bold text-white tracking-tight leading-none\">\n                PriceIQ\n              </h2>\n              <p className=\"text-[10px] font-semibold text-blue-400 uppercase tracking-widest mt-0.5\">\n                Pricing Intelligence\n              </p>\n            </div>\n          </div>\n          \n          {/* Shop Switcher */}\n          <div className=\"mb-5\">\n            <ShopSwitcher />\n          </div>\n        </div>\n        \n        {/* Navigation */}\n        <nav className=\"space-y-1 px-2\">\n          {/* Navigation Label */}\n          <div className=\"px-3 mb-2\">\n            <p className=\"text-xs font-semibold text-gray-500 uppercase tracking-wider\">\n              Navigation\n            </p>\n          </div>\n          \n          {/* Dashboard Link */}\n          <Link \n            href=\"/\" \n            className={`\n              group flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200\n              ${pathname === '/' || pathname === '/de' || pathname === '/en'\n                ? 'bg-blue-500/10 text-blue-400 shadow-sm' \n                : 'text-gray-400 hover:text-gray-200 hover:bg-slate-800/50'\n              }\n            `}\n          >\n            <div className={`\n              p-1.5 rounded-md transition-colors\n              ${pathname === '/' || pathname === '/de' || pathname === '/en'\n                ? 'bg-blue-500/20' \n                : 'bg-slate-800/50 group-hover:bg-slate-800'\n              }\n            `}>\n              <LayoutDashboard className=\"w-4 h-4\" />\n            </div>\n            <span className=\"text-sm font-medium\">Dashboard</span>\n            \n            {/* Active Indicator */}\n            {(pathname === '/' || pathname === '/de' || pathname === '/en') && (\n              <div className=\"ml-auto w-1.5 h-1.5 rounded-full bg-blue-400\"></div>\n            )}\n          </Link>\n          \n          {/* Products Link */}\n          <Link \n            href=\"/products\" \n            className={`\n              group flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200\n              ${pathname?.includes('/products')\n                ? 'bg-blue-500/10 text-blue-400 shadow-sm' \n                : 'text-gray-400 hover:text-gray-200 hover:bg-slate-800/50'\n              }\n            `}\n          >\n            <div className={`\n              p-1.5 rounded-md transition-colors\n              ${pathname?.includes('/products')\n                ? 'bg-blue-500/20' \n                : 'bg-slate-800/50 group-hover:bg-slate-800'\n              }\n            `}>\n              <Package className=\"w-4 h-4\" />\n            </div>\n            <span className=\"text-sm font-medium\">Produkte</span>\n            \n            {pathname?.includes('/products') && (\n              <div className=\"ml-auto w-1.5 h-1.5 rounded-full bg-blue-400\"></div>\n            )}\n          </Link>\n          \n          {/* Recommendations Link */}\n          <Link \n            href=\"/recommendations\" \n            className={`\n              group flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200\n              ${pathname?.includes('/recommendations')\n                ? 'bg-blue-500/10 text-blue-400 shadow-sm' \n                : 'text-gray-400 hover:text-gray-200 hover:bg-slate-800/50'\n              }\n            `}\n          >\n            <div className={`\n              p-1.5 rounded-md transition-colors\n              ${pathname?.includes('/recommendations')\n                ? 'bg-blue-500/20' \n                : 'bg-slate-800/50 group-hover:bg-slate-800'\n              }\n            `}>\n              <Lightbulb className=\"w-4 h-4\" />\n            </div>\n            <span className=\"text-sm font-medium\">Empfehlungen</span>\n            \n            {pathname?.includes('/recommendations') && (\n              <div className=\"ml-auto w-1.5 h-1.5 rounded-full bg-blue-400\"></div>\n            )}\n          </Link>\n        </nav>\n      </aside>\n      \n      {/* Main Content */}\n      <main className=\"flex-1 overflow-y-auto\">\n        <div className=\"max-w-7xl mx-auto px-8 py-8\">\n          <div className=\"space-y-8\">\n        {/* Page Header */}\n        <div className=\"recommendations-header\">\n          <div className=\"header-icon-container\">\n            <div className=\"header-main-icon\">\n              <BarChart className=\"h-10 w-10 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"header-title\">Produkt-Analysen</h1>\n              <p className=\"header-subtitle\">\n                Vollstndige Analyse fr optimale Preisentscheidungen\n              </p>\n            </div>\n          </div>\n          \n          {/* Product Info Card */}\n          <div className=\"product-info-card\">\n            <div className=\"product-icon\">\n              <Package className=\"h-8 w-8 text-white\" />\n            </div>\n            <div className=\"product-details\">\n              <h2>{productTitle || `Produkt ${productId}`}</h2>\n              {currentPrice > 0 && (\n                <p className=\"product-price-display\">\n                  Aktueller Preis: <strong>{currentPrice.toFixed(2)} </strong>\n                </p>\n              )}\n            </div>\n            <Link\n              href=\"/\"\n              className=\"back-button ml-auto\"\n            >\n              <ArrowLeft className=\"h-4 w-4\" />\n              Zurck\n            </Link>\n          </div>\n        </div>\n\n        {/* Collapsible Sections */}\n        <div className=\"space-y-4\">\n          {/*  SECTION 1: MARGIN ANALYSIS (Risk First!) */}\n          {currentPrice > 0 && marginData && (\n            <div className=\"collapsible-card\">\n                  <div \n                    className=\"collapsible-header\"\n                    onClick={() => toggleSection('margin')}\n                  >\n                    <div className=\"section-icon icon-margin\">\n                      <DollarSign className=\"h-8 w-8 text-white\" />\n                    </div>\n                    <div className=\"section-content\">\n                      <h3 className=\"section-title\">\n                        Margen-Analyse\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation()\n                            setShowInfoTooltip(prev => ({ ...prev, margin: !prev.margin }))\n                          }}\n                          className=\"info-tooltip-button\"\n                        >\n                          <Info className=\"w-4 h-4 transition-colors\" style={{ color: '#94a3b8' }} />\n                          {showInfoTooltip.margin && (\n                            <div className=\"info-tooltip-content\">\n                              <h4>Was passiert hier?</h4>\n                              <p>\n                                Die Margen-Analyse zeigt dir, ob dein aktueller Preis ber deinen Kosten liegt und wie viel Gewinn du pro Verkauf machst.\n                              </p>\n                              <p>\n                                <strong>Wichtig:</strong> Bevor du Preise nderst, solltest du immer prfen, dass du nicht unter deine Kosten verkaufst!\n                              </p>\n                              <p>\n                                Hier kannst du auch Kosten fr dein Produkt hinterlegen (Einkaufspreis, Versand, Verpackung, etc.).\n                              </p>\n                            </div>\n                          )}\n                        </button>\n                      </h3>\n                      <p className=\"section-subtitle\">\n                        Prfe deine Kosten und Margen vor Preisnderungen\n                      </p>\n                    </div>\n                    {openSections.margin ? (\n                      <ChevronUp className=\"chevron-arrow\" />\n                    ) : (\n                      <ChevronDown className=\"chevron-arrow\" />\n                    )}\n                  </div>\n                  \n                  {openSections.margin && (\n                    <div className=\"px-8 pb-6\">\n                      <MarginDisplay \n                        marginData={marginData || { has_cost_data: false }}\n                        onAddCosts={() => setShowCostModal(true)}\n                        onEditCosts={() => setShowCostModal(true)}\n                      />\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/*  SECTION 2: PRICE RECOMMENDATION (Action!) */}\n              <div className=\"collapsible-card\">\n                  <div \n                    className=\"collapsible-header\"\n                    onClick={() => toggleSection('price')}\n                  >\n                    <div className=\"section-icon icon-recommendation\">\n                      <DollarSign className=\"h-8 w-8 text-white\" />\n                    </div>\n                    <div className=\"section-content\">\n                      <h3 className=\"section-title\">\n                        Preisempfehlung\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation()\n                            setShowInfoTooltip(prev => ({ ...prev, price: !prev.price }))\n                          }}\n                          className=\"info-tooltip-button\"\n                        >\n                          <Info className=\"w-4 h-4 transition-colors\" style={{ color: '#94a3b8' }} />\n                          {showInfoTooltip.price && (\n                            <div className=\"info-tooltip-content\">\n                              <h4>Was passiert hier?</h4>\n                              <p>\n                                Unsere KI analysiert verschiedene Faktoren wie Nachfrage, Lagerbestand, Wettbewerbspreise und deine Kosten, um dir eine optimale Preisempfehlung zu geben.\n                              </p>\n                              <p>\n                                <strong>Die Empfehlung bercksichtigt:</strong>\n                              </p>\n                              <ul>\n                                <li>Verkaufsdaten der letzten 30 Tage</li>\n                                <li>Aktuelle Preise deiner Konkurrenten</li>\n                                <li>Deine Lagerbestnde</li>\n                                <li>Deine Kosten und Margen</li>\n                              </ul>\n                              <p>\n                                Du kannst die Empfehlung direkt anwenden oder erst die Details ansehen.\n                              </p>\n                            </div>\n                          )}\n                        </button>\n                      </h3>\n                      <p className=\"section-subtitle\">\n                        KI-basierte Preisempfehlung basierend auf Marktdaten\n                      </p>\n                    </div>\n                    {openSections.price ? (\n                      <ChevronUp className=\"chevron-arrow\" />\n                    ) : (\n                      <ChevronDown className=\"chevron-arrow\" />\n                    )}\n                  </div>\n                \n                  {openSections.price && (\n                    <div className=\"px-8 pb-6\">\n                      <div className=\"rounded-lg border p-6 transition-all duration-300 ease-in-out\" style={{ backgroundColor: '#1e293b', borderColor: '#475569' }}>\n                        <LatestRecommendation productId={productId} />\n                      </div>\n                    </div>\n                  )}\n              </div>\n\n              {/*  SECTION 3: COMPETITOR ANALYSIS (Context Last!) */}\n              {currentPrice > 0 && (\n                <div className=\"collapsible-card\">\n                    <div \n                      className=\"collapsible-header\"\n                      onClick={() => toggleSection('competitor')}\n                    >\n                      <div className=\"section-icon icon-competitor\">\n                        <ShoppingCart className=\"h-8 w-8 text-white\" />\n                      </div>\n                      <div className=\"section-content\">\n                        <h3 className=\"section-title\">\n                          Wettbewerbsanalyse\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              setShowInfoTooltip(prev => ({ ...prev, competitor: !prev.competitor }))\n                            }}\n                            className=\"info-tooltip-button\"\n                          >\n                            <Info className=\"w-4 h-4 transition-colors\" style={{ color: '#94a3b8' }} />\n                            {showInfoTooltip.competitor && (\n                              <div className=\"info-tooltip-content\">\n                                <h4>Was passiert hier?</h4>\n                                <p>\n                                  Die Wettbewerbsanalyse zeigt dir, wie dein Preis im Vergleich zu anderen Anbietern steht.\n                                </p>\n                                <p>\n                                  <strong>Du siehst:</strong>\n                                </p>\n                                <ul>\n                                  <li>Preise deiner Konkurrenten (Neuware, Gebraucht, etc.)</li>\n                                  <li>Deine Marktposition (gnstigster, teuerster, Durchschnitt)</li>\n                                  <li>Durchschnittspreis und Preisspanne</li>\n                                  <li>Datenqualitt der Analyse</li>\n                                </ul>\n                                <p>\n                                  Nutze diese Informationen, um deine Preise strategisch anzupassen.\n                                </p>\n                              </div>\n                            )}\n                          </button>\n                        </h3>\n                        <p className=\"section-subtitle\">\n                          Vergleiche deine Preise mit der Konkurrenz\n                        </p>\n                      </div>\n                      {openSections.competitor ? (\n                        <ChevronUp className=\"chevron-arrow\" />\n                      ) : (\n                        <ChevronDown className=\"chevron-arrow\" />\n                      )}\n                    </div>\n                  \n                    {openSections.competitor && (\n                      <div className=\"px-8 pb-6\">\n                        <div className=\"rounded-lg border p-6 transition-all duration-300 ease-in-out\" style={{ backgroundColor: '#1e293b', borderColor: '#475569' }}>\n                          <CompetitorAnalysis productId={productId} currentPrice={currentPrice} />\n                        </div>\n                      </div>\n                    )}\n            </div>\n          )}\n        </div>\n          </div>\n        </div>\n      </main>\n\n      {/* Cost Input Modal */}\n      <CostInputModal\n        isOpen={showCostModal}\n        onClose={() => setShowCostModal(false)}\n        productId={productId.toString()}\n        productTitle={productTitle || `Product ${productId}`}\n        currentPrice={currentPrice}\n        shopId={currentShop?.id?.toString() || 'demo'}\n        onSave={async (costData) => {\n          try {\n            await saveProductCosts(productId.toString(), costData)\n            setShowCostModal(false)\n            \n            // Reload margin data\n            if (currentPrice > 0) {\n              const margin = await calculateMargin(productId.toString(), currentPrice)\n              setMarginData(margin)\n            }\n          } catch (error) {\n            console.error('Fehler beim Speichern der Kosten:', error)\n            throw error\n          }\n        }}\n      />\n    </div>\n  )\n}\n\nexport default function RecommendationsPage() {\n  return (\n    <Suspense fallback={<div className=\"min-h-screen p-8\">Lade...</div>}>\n      <RecommendationsContent />\n    </Suspense>\n  )\n}\n\n","// extracted by mini-css-extract-plugin"],"names":["ArrowLeft","_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__","Z","d","key","ChevronDown","CircleCheckBig","Flame","RefreshCw","TrendingUp","Promise","resolve","then","__webpack_require__","bind","applyRecommendedPrice","request","response","fetch","concat","API_URL","method","headers","credentials","body","JSON","stringify","ok","error","json","detail","CircleCheck","createLucideIcon","cx","cy","r","Calculator","width","height","x","y","rx","x1","x2","y1","y2","TriangleAlert","Clock","o","t","n","production_react","T_","Gb","CircleAlert","CircleQuestionMark","ConfidenceIndicator","param","confidence","reasoning","compact","confidenceBasis","useTranslations","confidencePct","current","config","high","icon","CheckCircle","color","bgColor","borderColor","textColor","barColor","gradientBar","medium","AlertCircle","low","HelpCircle","Icon","jsx_runtime","jsxs","div","className","jsx","span","toFixed","compCount","competitor_count","sales_30d","Check","h3","style","h4","ul","li","Math","max","ml_models","p","X","formatCurrency","amount","currency","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","ActionButtons","marginAnalysis","recommendedPrice","onApply","onDismiss","isApplying","isDisabled","tCommon","tActions","showSchedule","setShowSchedule","useState","hasMarginWarning","is_safe","estimatedMonthlyImpact","details","margin","euro","button","onClick","disabled","Fragment","CheckCircle2","price","label","input","type","defaultValue","AlertTriangle","message","TrendingDown","DollarSign","Info","ChartNoAxesColumnIncreasing","PriceReasoningStory","currentPrice","strategyDetails","competitorData","productName","productId","onRefresh","createdAt","validConfidence","min","showDetails","setShowDetails","priceChange","priceChangePct","getQualityBadge","scorePct","strategyConfig","competitive","emoji","title","getStory","data","avgPrice","avg","competitorCount","prices","length","diff","diffPct","abs","getBasedOn","colorClass","demand","sales","previousSales","growth","inventory","stock","daysOfStock","avgDaily","cost","getPriceImpact","impact","strategy","recommended_price","value","formatted","isIncrease","isDecrease","sortedStrategies","sort","a","b","impactA","impactB","weightedContributions","map","idx","weight","weightedImpact","reduce","sum","w","round","Date","toLocaleString","backgroundColor","minHeight","fontSize","border","maxWidth","overflow","Lightbulb","Package","prev","item","itemIdx","strong","weightPct","BarChart","PriceRecommendationCard","recommendation","setIsApplying","isRefreshing","setIsRefreshing","displayedPrice","displayedPriceChange","current_price","displayedPriceChangePct","priceIncrease","noChange","margin_analysis","isCriticalWarning","warnings","some","severity","rawConfidence","undefined","overall_confidence","recommendationTexts","generateRecommendationTexts","absChangePct","price_change_pct","headline","reason","bulletPoints","generateBulletPoints","bullets","competitor_context","ctx","positionText","position","diffText","price_diff_pct","push","formatPrice","avg_price","strategies","inv","includes","stockMatch","match","marginMatch","targetMargin","margin_pct","slice","generateConfidenceText","mlConfidence","ml_predictions","combined_ml_confidence","parts","factors","join","parseFloat","insights","generateInsightsText","has_insights","product_title","product_name","extractStrategies","strategy_details","Array","isArray","forEach","extractCompetitorContext","competitor_data","yourPrice","min_price","max_price","extractMLPredictions","reasoningText","handleApply","console","handleRefresh","productTitle","product_id","timestamp","generated_at","created_at","toISOString","background","h2","borderRadius","padding","display","alignItems","justifyContent","boxShadow","fontWeight","transition","marginTop","lineHeight","marginBottom","textTransform","letterSpacing","listStyle","flexDirection","gap","marginLeft","paddingTop","borderTop","formatPercentage","decimals","confidence_basis","filter","warning","formatTimeAgo","now","diffMins","floor","diffMs","getTime","diffHours","diffDays","EmptyAnalysisState","salesDataDays","onRunAnalysis","LatestRecommendation","competitorContext","setRecommendation","loading","setLoading","generating","setGenerating","setError","currentShop","isDemoMode","useShop","loadLatestRecommendation","productIdNum","parseInt","isNaN","log","generateRecommendation","rec","product","reasoningParsed","parse","e","feature_confidence","displayConfidence","toast","success","description","err","handleGenerate","alert","handleApplyPrice","id","result","shopId","new_price","useEffect","hasInvalidConfidence","Infinity","competitor_avg_price","sales_7d","reasoningObj","Object","entries","sources","source","transformedRecommendation","price_change","summary","status","ml_confidence","base_confidence","applied_at","applied_price","Search","ShoppingCart","MapPin","Users","ArrowUpDown","getStorageKey","loadCachedData","cached","localStorage","getItem","cacheAge","cached_at","removeItem","saveCachedData","setItem","getCondition","titleLower","competitor","toLowerCase","sourceLower","CompetitorAnalysis","setData","setFilter","cachedData","handleSearch","forceRefresh","searchCompetitors","maxResults","errorMessage","metrics","calculateMetrics","competitors","c","minPrice","maxPrice","newOffers","usedOffers","refurbishedOffers","newMin","newMax","usedMin","priceSpread","yourPriceDiff","percentAboveAvg","newCount","usedCount","refurbishedCount","dataQuality","getDataQuality","explanation","hasHighSpread","hasFewCompetitors","filteredCompetitors","comp","left","getYourPricePosition","range","condition","priceDiff","isCheapest","isExpensive","avatarEmoji","rating","PenLine","Target","MarginDisplay","marginData","onAddCosts","onEditCosts","has_cost_data","textDecoration","marginColor","is_above_min_margin","is_above_break_even","marginBgColor","marginIcon","percent","aria-label","Edit3","selling_price","net_revenue","vat_rate","costs","purchase","shipping","packaging","payment_provider","payment_fee","total_variable","break_even_price","recommended_min_price","Pen","LoaderCircle","CostInputModal","isOpen","onClose","onSave","costData","setCostData","purchase_cost","shipping_cost","packaging_cost","country_code","category","isLoading","setIsLoading","isSaving","setIsSaving","showEstimates","setShowEstimates","categoryDefaults","setCategoryDefaults","isEditing","setIsEditing","savedCostData","setSavedCostData","loadExistingCosts","getProductCosts","loadCategoryDefaults","getCategoryDefaults","handleEstimateCosts","estimates","estimateCostsFromPrice","estimated_purchase_cost","estimated_shipping_cost","estimated_packaging_cost","handleSave","updateProductCosts","saveProductCosts","totalCosts","estimatedMargin","Edit2","select","onChange","target","option","categories","cat","charAt","toUpperCase","shipping_estimate","packaging_estimate","Loader2","step","placeholder","required","paymentProviders","provider","XIcon","ChevronUp","RecommendationsContent","pathname","usePathname","productIdParam","searchParams","useSearchParams","get","setProductId","Number","setCurrentPrice","setMarginData","showCostModal","setShowCostModal","setProductTitle","openSections","setOpenSections","showInfoTooltip","setShowInfoTooltip","toggleSection","section","loadProductData","products","fetchProducts","find","String","productIdType","productsCount","availableIds","idType","name","calculateMargin","toString","handleShopSwitch","event","setTimeout","window","addEventListener","removeEventListener","handleClickOutside","closest","document","aside","ShopSwitcher","nav","Link","href","LayoutDashboard","main","h1","stopPropagation","RecommendationsPage","Suspense","fallback"],"sourceRoot":""}