(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[124],{7903:function(e,r,s){Promise.resolve().then(s.bind(s,5346))},5346:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return d}});var t=s(7437),n=s(2265),o=s(826),i=s(5996),a=s(7307),l=s(5967);function d(){let[e,r]=(0,n.useState)([]),[s,d]=(0,n.useState)(!1),{currentShop:c,isDemoMode:h,refresh:u}=(0,a.L)();(0,n.useEffect)(()=>{if(!c){console.log("[ProductsPage] No current shop, skipping load");return}console.log("[ProductsPage] Shop changed, reloading products:",c.name,"isDemoMode:",h),g()},[null==c?void 0:c.id,h]),(0,n.useEffect)(()=>{let e=e=>{console.log("[ProductsPage] Shop switched event received:",e.detail),setTimeout(()=>{g()},300)};return window.addEventListener("shop-switched",e),()=>window.removeEventListener("shop-switched",e)},[]);let g=async()=>{d(!0);try{console.log("[ProductsPage] Loading products, currentShop:",null==c?void 0:c.name,"isDemoMode:",h);let e=await (0,o.t2)();console.log("[ProductsPage] Products loaded:",e.length,"products"),r(e||[])}catch(e){console.error("[ProductsPage] Fehler beim Laden der Produkte:",e),r([])}finally{d(!1)}},m=async()=>{if(h){alert("Demo-Shop: Produkte k\xf6nnen nicht synchronisiert werden. Nutze einen echten Shopify-Shop.");return}if(!c||"demo"===c.type){alert("Bitte w\xe4hle einen echten Shopify-Shop aus!");return}d(!0);try{await (0,o.gU)(c.id),await g()}catch(e){console.error("Fehler beim Synchronisieren:",e),alert("Fehler beim Synchronisieren. Pr\xfcfe die Konsole f\xfcr Details.")}finally{d(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,t.jsxs)("aside",{className:"w-80 bg-gradient-to-b from-white via-gray-50 to-white border-r border-gray-200 p-6 overflow-y-auto shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-8 pb-6 border-b border-gray-200",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform",children:(0,t.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCA1"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"PriceIQ"})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)(i.D,{})}),(0,t.jsxs)("nav",{className:"space-y-2",children:[(0,t.jsx)(l.rU,{href:"/",className:"block px-4 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Dashboard"}),(0,t.jsx)(l.rU,{href:"/products",className:"block px-4 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors bg-gray-100",children:"Produkte"}),(0,t.jsx)(l.rU,{href:"/recommendations",className:"block px-4 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Empfehlungen"})]})]}),(0,t.jsx)("main",{className:"flex-1 p-8 overflow-y-auto",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"Produkte"}),(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[c&&(0,t.jsxs)("div",{className:"px-4 py-2 bg-gray-100 rounded text-gray-700 text-sm",children:[c.name," ",h&&"(Demo)"]}),!h&&c&&"shopify"===c.type&&(0,t.jsx)("button",{onClick:m,disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:s?"Synchronisiere...":"Produkte synchronisieren"}),h&&(0,t.jsx)("div",{className:"px-4 py-2 bg-blue-50 border border-blue-200 rounded text-blue-700 text-sm",children:"Demo-Mode: Keine Synchronisation m\xf6glich"}),(0,t.jsx)(l.rU,{href:"/",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition",children:"Zur\xfcck"})]})]}),s&&0===e.length?(0,t.jsx)("div",{className:"text-center py-12 text-gray-600",children:"Lade Produkte..."}):0===e.length?(0,t.jsx)("div",{className:"text-center py-12",children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Demo-Shop: Produkte werden automatisch geladen. Falls keine angezeigt werden, pr\xfcfe die Browser-Console."}),(0,t.jsx)("button",{onClick:()=>g(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Produkte neu laden"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Keine Produkte gefunden. Synchronisiere zuerst deine Produkte."}),(0,t.jsx)("button",{onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Produkte synchronisieren"})]})}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,t.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow border border-gray-200",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2 text-gray-900",children:e.title}),(0,t.jsxs)("p",{className:"text-gray-600 mb-2",children:["Preis: ",(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:["€",e.price.toFixed(2)]})]}),(0,t.jsxs)("p",{className:"text-gray-600 mb-4",children:["Lager: ",(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:e.inventory})]}),(0,t.jsx)(l.rU,{href:"/recommendations?product_id=".concat(e.id),className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:"Preisempfehlungen anzeigen →"})]},e.id))})]})})]})}}},function(e){e.O(0,[146,75,971,938,744],function(){return e(e.s=7903)}),_N_E=e.O()}]);