(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61],{8063:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(5531).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},4530:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(5531).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4322:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(5531).Z)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},5056:function(e,s,r){Promise.resolve().then(r.bind(r,7941))},7941:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return j}});var t=r(7437),l=r(2265),a=r(4033),n=r(5967),i=r(5996),o=r(7307),c=r(826),d=r(8063),m=r(4322),h=r(5531);let x=(0,h.Z)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);var u=r(4530);let g=(0,h.Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),p=(0,h.Z)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);var b=r(5790);function f(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(e)}function j(){let{currentShop:e,isDemoMode:s,shops:r,loading:d,switchToShop:m}=(0,o.L)(),h=(0,a.useSearchParams)(),[x,u]=(0,l.useState)(null),[g,p]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let s=null==h?void 0:h.get("shop_id"),r=null==h?void 0:h.get("mode"),t=null==h?void 0:h.get("installed");if(s&&"live"===r&&"true"===t){console.log("[Home] Auto-switching to installed shop from URL:",s),m(parseInt(s),!1),window.history.replaceState({},"",window.location.pathname);return}if(!s){let s=localStorage.getItem("current_shop_id"),r=localStorage.getItem("shop_mode");if(s&&!e){console.log("[Home] Auto-switching to shop from localStorage:",s);let e=parseInt(s);isNaN(e)||m(e,"demo"===r).catch(e=>{console.error("[Home] Error switching to shop from localStorage:",e)})}}},[h,m,e]),(0,l.useEffect)(()=>{e&&!d&&(p(!0),(0,c.z2)().then(e=>{console.log("Dashboard stats:",e),u(e)}).catch(e=>{console.error("Error loading stats:",e),u(null)}).finally(()=>p(!1)))},[null==e?void 0:e.id,s,d]),(0,l.useEffect)(()=>{let e=e=>{console.log("[Home] Shop switched event received:",e.detail),setTimeout(()=>{p(!0),(0,c.z2)().then(e=>{console.log("[Home] Dashboard stats reloaded after shop switch:",e),u(e)}).catch(e=>{console.error("[Home] Error reloading stats after shop switch:",e),u(null)}).finally(()=>p(!1))},300)};return window.addEventListener("shop-switched",e),()=>window.removeEventListener("shop-switched",e)},[]),(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,t.jsxs)("aside",{className:"w-80 bg-gradient-to-b from-white via-gray-50 to-white border-r border-gray-200 p-6 overflow-y-auto shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-8 pb-6 border-b border-gray-200",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform",children:(0,t.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCA1"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"PriceIQ"})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)(i.D,{})}),(0,t.jsxs)("nav",{className:"space-y-2",children:[(0,t.jsx)(n.rU,{href:"/",className:"block px-4 py-2 text-gray-700 rounded-lg bg-gray-100 transition-colors",children:"Dashboard"}),(0,t.jsx)(n.rU,{href:"/products",className:"block px-4 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Produkte"}),(0,t.jsx)(n.rU,{href:"/recommendations",className:"block px-4 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Empfehlungen"})]})]}),(0,t.jsx)("main",{className:"flex-1 p-8 overflow-y-auto",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto",children:g||d?(0,t.jsx)("div",{className:"text-center py-12 text-gray-600",children:"Lade Dashboard..."}):x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{stats:x}),(0,t.jsx)(y,{stats:x}),(0,t.jsx)(N,{stats:x}),(0,t.jsx)(w,{stats:x})]}):(0,t.jsx)("div",{className:"text-center py-12 text-red-600",children:"Fehler beim Laden der Dashboard-Daten"})})})]})}function v(e){let{stats:s}=e,{total:r,product_count:l,recommendation_count:a}=s.missed_revenue;return 0===l?null:(0,t.jsx)("div",{className:"bg-gradient-to-br from-red-50 to-orange-50 rounded-xl border-2 border-red-200 p-8 mb-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center",children:(0,t.jsx)(d.Z,{className:"w-8 h-8 text-white"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-red-900 mb-2",children:"\uD83D\uDCB8 Du verlierst aktuell Geld!"}),(0,t.jsxs)("p",{className:"text-red-800 mb-6",children:[l," ",1===l?"Produkt hat":"Produkte haben"," suboptimale Preise.",a&&a!==l&&(0,t.jsxs)("span",{className:"text-sm text-red-700 ml-2",children:["(",a," Empfehlungen verf\xfcgbar)"]})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg border-2 border-green-300 p-6 mb-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 uppercase tracking-wide mb-2",children:"POTENZIAL DIESEN MONAT"}),(0,t.jsxs)("div",{className:"text-5xl font-bold text-green-600 mb-2",children:["+ ",f(r)]}),(0,t.jsx)("div",{className:"text-gray-600",children:"mehr Umsatz m\xf6glich"})]})}),(0,t.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:(0,t.jsxs)("ul",{className:"space-y-2 text-sm text-gray-700",children:[(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:l})," ",1===l?"Produkt":"Produkte"," mit Optimierungspotenzial"]})]}),a&&a!==l&&(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:a})," Preisempfehlungen insgesamt"]})]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:["\xd8 ",(0,t.jsx)("strong",{children:f(r/l)})," pro Produkt/Monat"]})]})]})}),(0,t.jsx)(n.rU,{href:"/products",children:(0,t.jsxs)("button",{className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-6 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,t.jsx)(m.Z,{className:"w-5 h-5"}),"Produkte optimieren"]})})]})]})})}function y(e){var s;let{stats:r}=e,{level:l,points:a,next_level_points:i,points_needed:o,completed_steps:c,pending_steps:d}=r.progress,m=a/i*100,h={bronze:{name:"\uD83E\uDD49 Bronze - Anf\xe4nger",color:"from-orange-400 to-orange-600"},silver:{name:"\uD83E\uDD48 Silber - Fortgeschritten",color:"from-gray-300 to-gray-500"},gold:{name:"\uD83E\uDD47 Gold - Profi",color:"from-yellow-400 to-yellow-600"},platinum:{name:"\uD83D\uDC8E Platin - Experte",color:"from-purple-400 to-purple-600"}},p=h[l]||h.bronze,b=e=>{switch(e){case"products":return"/products";case"recommendations":return"/recommendations";default:return"/"}};return(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,t.jsx)(x,{className:"w-6 h-6 text-yellow-500"}),"Deine Optimierungs-Reise"]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("div",{className:"text-lg font-semibold mb-3",children:p.name}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r ".concat(p.color," transition-all duration-500"),style:{width:"".concat(Math.min(m,100),"%")}})}),(0,t.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round(m),"% zum n\xe4chsten Level (",a,"/",i," Punkte)",o&&o>0&&(0,t.jsxs)("span",{className:"text-gray-500 ml-2",children:["• Noch ",o," Punkte bis ",(null===(s=h["bronze"===l?"silver":"silver"===l?"gold":"platinum"])||void 0===s?void 0:s.name.split(" - ")[1])||"n\xe4chstes Level"]})]})]})]}),c.length>0&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Abgeschlossen:"}),(0,t.jsx)("div",{className:"space-y-2",children:c.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-3 text-green-700",children:[(0,t.jsx)(u.Z,{className:"w-5 h-5 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-sm",children:e})]},s))})]}),d&&d.length>0&&(0,t.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Noch zu erledigen (bis zum n\xe4chsten Level):"}),(0,t.jsx)("div",{className:"space-y-2",children:d.map((e,s)=>(0,t.jsx)(n.rU,{href:b(e.action),children:(0,t.jsxs)("div",{className:"flex items-center gap-3 text-gray-600 hover:text-blue-600 transition-colors cursor-pointer p-2 rounded hover:bg-gray-50",children:[(0,t.jsx)("div",{className:"w-5 h-5 flex-shrink-0 flex items-center justify-center border-2 border-gray-300 rounded-full",children:(0,t.jsx)("span",{className:"text-xs font-bold",children:e.points})}),(0,t.jsx)("span",{className:"text-sm flex-1",children:e.text}),(0,t.jsx)(g,{className:"w-4 h-4 flex-shrink-0 opacity-50"})]})},s))})]})]})}function N(e){let{stats:s}=e,r=[{icon:(0,t.jsx)(m.Z,{className:"w-8 h-8"}),title:"Produkte",value:s.products_count,description:"synchronisiert",href:"/products",color:"from-blue-50 to-blue-100 border-blue-200 text-blue-700"},{icon:(0,t.jsx)(p,{className:"w-8 h-8"}),title:"Empfehlungen",value:s.recommendations_pending,description:"ausstehend",href:"/recommendations",color:"from-yellow-50 to-yellow-100 border-yellow-200 text-yellow-700"},{icon:(0,t.jsx)(b.Z,{className:"w-8 h-8"}),title:"Umgesetzt",value:s.recommendations_applied,description:"Empfehlungen",href:"/recommendations",color:"from-green-50 to-green-100 border-green-200 text-green-700"}];return(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-4",children:"⚡ Schnellaktionen"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.map((e,s)=>{var r;return(0,t.jsx)(n.rU,{href:e.href,children:(0,t.jsxs)("div",{className:"bg-gradient-to-br ".concat(e.color," border-2 rounded-xl p-6 hover:shadow-lg transition-all cursor-pointer"),children:[(0,t.jsx)("div",{className:"mb-4",children:e.icon}),(0,t.jsx)("h4",{className:"font-bold text-lg mb-1",children:e.title}),(0,t.jsx)("div",{className:"text-3xl font-bold mb-2",children:(r=e.value,new Intl.NumberFormat("de-DE",{maximumFractionDigits:0}).format(r))}),(0,t.jsx)("div",{className:"text-sm opacity-80",children:e.description})]})},s)})})]})}function w(e){let{stats:s}=e;return 0===s.next_steps.length?null:(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-4",children:"\uD83D\uDCCC N\xe4chste Schritte"}),(0,t.jsx)("div",{className:"space-y-3",children:s.next_steps.map((e,s)=>(0,t.jsx)("div",{className:"".concat(e.urgent?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"," border-2 rounded-lg p-4"),children:(0,t.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-semibold mb-2",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-700 mb-3",children:e.description}),(0,t.jsx)(n.rU,{href:e.href,children:(0,t.jsxs)("button",{className:"text-sm font-medium text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.action," ",(0,t.jsx)(g,{className:"w-4 h-4"})]})})]})})},s))})]})}}},function(e){e.O(0,[146,529,971,938,744],function(){return e(e.s=5056)}),_N_E=e.O()}]);