exports.id=242,exports.ids=[242],exports.modules={7476:(e,t,s)=>{var r={"./de.json":[7029,29],"./en.json":[9316,316]};function o(e){if(!s.o(r,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],o=t[0];return s.e(t[1]).then(()=>s.t(o,19))}o.keys=()=>Object.keys(r),o.id=7476,e.exports=o},7422:(e,t,s)=>{Promise.resolve().then(s.bind(s,417)),Promise.resolve().then(s.bind(s,1222)),Promise.resolve().then(s.bind(s,7448))},7393:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},5303:()=>{},417:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ErrorBoundaryWrapper:()=>i});var r=s(2295),o=s(3729);class n extends o.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null})},this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("[ErrorBoundary] Caught error:",e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[r.jsx("div",{className:"text-red-600 text-5xl mb-4",children:"⚠️"}),r.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900",children:"Etwas ist schiefgelaufen"}),r.jsx("pre",{className:"text-sm text-red-600 mb-4 bg-red-50 p-4 rounded overflow-auto max-h-40",children:this.state.error?.message||"Unbekannter Fehler"}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("button",{onClick:this.handleReset,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Neu laden"}),r.jsx("button",{onClick:()=>window.location.href="/",className:"block w-full px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition",children:"Zur Startseite"})]})]})}):this.props.children}}function i({children:e}){return r.jsx(n,{children:e})}},1222:(e,t,s)=>{"use strict";s.r(t),s.d(t,{LanguageSwitcher:()=>a});var r=s(2295),o=s(2186),n=s(8632),i=s(3729);function a(){let e=(0,n.bU)(),t=(0,o.tv)(),s=(0,o.jD)(),[a,l]=(0,i.useTransition)(),d=r=>{l(()=>{let o=s.split("/");o[1]===e?(o[1]=r,t.replace(o.join("/"))):t.replace(`/${r}`)})};return(0,r.jsxs)("div",{className:"flex items-center gap-2 rounded-lg border border-gray-200 bg-white p-1 shadow-sm",children:[r.jsx("button",{onClick:()=>d("de"),disabled:a||"de"===e,className:`px-3 py-1.5 text-sm font-medium rounded transition-all ${"de"===e?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}`,"aria-label":"Sprache auf Deutsch wechseln",children:"\uD83C\uDDE9\uD83C\uDDEA DE"}),r.jsx("button",{onClick:()=>d("en"),disabled:a||"en"===e,className:`px-3 py-1.5 text-sm font-medium rounded transition-all ${"en"===e?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}`,"aria-label":"Switch language to English",children:"\uD83C\uDDEC\uD83C\uDDE7 EN"})]})}},2542:(e,t,s)=>{"use strict";s.d(t,{D:()=>a});var r=s(2295),o=s(3729),n=s(531),i=s(8117);function a({className:e=""}){let{shops:t,currentShop:s,isDemoMode:a,loading:l,error:d,switchToShop:c,refresh:h}=(0,n.L)(),[u,m]=(0,o.useState)(""),p=async(e,t)=>{if((e||t)&&e)try{console.log(`[ShopSwitcher] Switching to shop ${e.id}, demo: ${t}`),await c(e.id,t),console.log("[ShopSwitcher] Shop switched successfully")}catch(e){console.error("[ShopSwitcher] Failed to switch shop:",e)}},x=()=>{let e=u.trim();if(!e){alert("Bitte gib deine Shopify-Domain ein, z.B. dein-shop.myshopify.com");return}if(!e.includes(".")){alert("Bitte gib eine vollst\xe4ndige Domain ein, z.B. dein-shop.myshopify.com");return}i.T5,encodeURIComponent(e)},g=async()=>{console.log("[ShopSwitcher] \uD83D\uDD18 Live Button clicked");let e=t.filter(e=>999!==e.id&&"shopify"===e.type);if(console.log("[ShopSwitcher] realLiveShops (filtered):",e.map(e=>({id:e.id,name:e.name,type:e.type}))),e.length>0)console.log("[ShopSwitcher] → Switching to real shop:",e[0].name),await p(e[0],!1);else if(console.log("[ShopSwitcher] → No real shops, showing connect card"),y)try{console.log("[ShopSwitcher] Switching to Live Mode (no shop installed)"),await c(y.id,!1)}catch(e){console.error("[ShopSwitcher] Error switching to Live Mode:",e),await h()}},f=async()=>{let e=t.find(e=>"demo"===e.type);e&&await p(e,!0)};if(l&&0===t.length)return(0,r.jsxs)("div",{className:`shop-switcher ${e}`,children:[r.jsx("div",{className:"p-4 text-center text-gray-500",children:"Lade Shops..."}),d&&r.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-600",children:d})]});if(d&&0===t.length)return r.jsx("div",{className:`shop-switcher ${e}`,children:(0,r.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx("p",{className:"text-sm text-red-600 font-medium mb-2",children:"Fehler beim Laden der Shops"}),r.jsx("p",{className:"text-xs text-red-500",children:d}),r.jsx("button",{onClick:()=>h(),className:"mt-2 px-3 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Erneut versuchen"})]})});let y=t.find(e=>"demo"===e.type||999===e.id),b=t.filter(e=>"shopify"===e.type&&999!==e.id),w=b.filter(e=>999!==e.id&&"shopify"===e.type),v=t.filter(e=>"demo"===e.type||999===e.id);v.length>1&&console.warn("[ShopSwitcher] ⚠️ MEHRERE DEMO SHOPS GEFUNDEN:",v.map(e=>({id:e.id,name:e.name,type:e.type})));let S=b.find(e=>999===e.id||"demo"===e.type);return S&&console.error("[ShopSwitcher] ❌ BUG: Demo Shop in liveShops gefunden!",S),console.log("[ShopSwitcher] Render:",{shopsCount:t.length,shops:t.map(e=>({id:e.id,name:e.name,type:e.type})),demoShop:y?{id:y.id,name:y.name,type:y.type}:null,demoShopsCount:v.length,liveShopsCount:b.length,liveShops:b.map(e=>({id:e.id,name:e.name,type:e.type})),currentShop:s?{id:s.id,name:s.name,type:s.type}:null,isDemoMode:a,demoInLiveShops:S?"BUG!":"OK"}),(0,r.jsxs)("div",{className:`shop-switcher ${e} relative`,children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Aktiver Shop"}),(0,r.jsxs)("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[r.jsx("button",{onClick:g,disabled:l,className:`flex-1 px-4 py-2 rounded-md font-medium transition-all ${a?"text-gray-600 hover:text-gray-900":"bg-white text-blue-600 shadow-sm"} ${l?"opacity-50 cursor-not-allowed":""}`,children:"Live"}),r.jsx("button",{onClick:f,disabled:l||!y,className:`flex-1 px-4 py-2 rounded-md font-medium transition-all ${a?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"} ${l||!y?"opacity-50 cursor-not-allowed":""}`,children:"Demo"})]})]}),a?y&&(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-lg",children:"\uD83E\uDDEA"}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-semibold text-blue-900 text-sm",children:"Demo-Modus Aktiv"}),r.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Du testest mit 20 synthetischen Produkten. Wechsle zu Live um echte Shopify-Daten zu nutzen."})]})]})}),r.jsx("div",{className:"border-2 border-green-500 bg-green-50 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"text-2xl",children:"\uD83E\uDDEA"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"font-semibold text-gray-900",children:y.name}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-green-600 font-medium text-sm",children:"Aktiv"}),r.jsx("span",{className:"text-green-600",children:"✓"})]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[y.product_count," Produkte • 90 Tage Verlauf"]})]})]})})]}):r.jsx("div",{className:"space-y-2",children:w.length>0?w.map(e=>r.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${e.is_active?"border-green-500 bg-green-50":"border-gray-300 bg-white hover:bg-gray-50"} ${l?"opacity-50 cursor-not-allowed":""}`,onClick:async()=>{l||await p(e,!1)},children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"text-2xl",children:"\uD83C\uDFEA"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-semibold text-gray-900",children:e.name||e.shop_url||"Shopify Shop"}),e.shop_url&&r.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:e.shop_url})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:`font-medium text-sm ${e.is_active?"text-green-600":"text-gray-500"}`,children:e.is_active?"Aktiv":"Verf\xfcgbar"}),e.is_active&&r.jsx("span",{className:"text-green-600",children:"✓"})]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 mt-2",children:[e.product_count||0," Produkte • Verbunden via Shopify"]})]})]})},e.id)):r.jsx("div",{className:"border-2 border-gray-300 border-dashed rounded-lg p-6 bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-5xl mb-4",children:"\uD83C\uDFEA"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Shopify Shop verbinden"}),r.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Installiere PriceIQ in deinem Shopify Store um automatisch Preis-Optimierungen zu erhalten."}),(0,r.jsxs)("div",{className:"max-w-sm mx-auto space-y-3 mb-4",children:[r.jsx("input",{type:"text",placeholder:"dein-shop.myshopify.com",value:u,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onKeyDown:e=>{"Enter"===e.key&&x()}}),r.jsx("button",{onClick:x,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors",children:"Shop verbinden"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Oder installiere PriceIQ direkt aus dem"," ",r.jsx("a",{href:"https://apps.shopify.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline font-medium",children:"Shopify App Store"})]})]})})}),l&&r.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-50 flex items-center justify-center rounded-lg",children:r.jsx("div",{className:"text-sm text-gray-600",children:"Wechselt..."})})]})}},531:(e,t,s)=>{"use strict";s.d(t,{L:()=>n});var r=s(3729),o=s(8117);function n(){let[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(!1),[i,a]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0),[c,h]=(0,r.useState)(null),u=async(e=!1)=>{try{h(null);let r=await (0,o.a5)();console.log("[useShop] getAvailableShops response:",r);let i=r.shops||[],l=i.filter(e=>"demo"===e.type);l.length>1&&console.warn("[useShop] ⚠️ BACKEND GIBT MEHRERE DEMO SHOPS ZUR\xdcCK:",l.map(e=>({id:e.id,name:e.name})));let c=i.reduce((e,t)=>("demo"===t.type&&e.some(e=>"demo"===e.type)?console.warn("[useShop] ⚠️ Doppelten Demo Shop entfernt:",t.name):e.push(t),e),[]);a(c),e||n(r.is_demo_mode||!1);let u=r.active_shop_id,m=e?s:r.is_demo_mode||!1,p=null;m?p=r.shops?.find(e=>"demo"===e.type)||null:(p=r.shops?.find(e=>e.id===u&&"shopify"===e.type&&999!==e.id)||null)||!r.shops||(p=r.shops.find(e=>"shopify"===e.type&&999!==e.id)||null),!p&&r.shops&&(p=r.shops.find(e=>e.is_active)||null),!p&&r.shops&&r.shops.length>0&&(p=r.shops[0],console.warn("[useShop] Using first shop as fallback:",p.name)),t(p),console.log("[useShop] Active shop set to:",p?.name||"null","isDemoMode:",m),d(!1)}catch(e){h(e.message||"Fehler beim Laden der Shops"),console.error("Error loading shops:",e),0===i.length&&(a([{id:999,name:"Demo Shop",type:"demo",shop_url:null,product_count:20,is_active:!0}]),t({id:999,name:"Demo Shop",type:"demo",shop_url:null,product_count:20,is_active:!0}),n(!0)),d(!1)}},m=async(e=!1)=>{try{await u(e),console.log("[useShop] Refresh completed")}catch(e){console.error("[useShop] Error during refresh:",e),d(!1)}},p=async(e,s)=>{try{console.log(`[useShop] Switching to shop ${e}, demo: ${s}`),d(!0),h(null);let r=await (0,o.YZ)(e,s);console.log("[useShop] Switch API response:",r),n(s);let a=i.find(t=>t.id===e);!a&&(r.active_shop?a={id:r.active_shop.id,name:r.active_shop.name,type:r.active_shop.type,shop_url:null,product_count:0,is_active:!0}:s&&(a={id:999,name:"Demo Shop",type:"demo",shop_url:null,product_count:0,is_active:!0})),a&&(t(a),console.log(`[useShop] Optimistic update: currentShop = ${a.name} isDemoMode = ${s}`)),window.dispatchEvent(new CustomEvent("shop-switched",{detail:{shopId:e,useDemo:s,mode:s?"demo":"live"}})),console.log("[useShop] shop-switched event dispatched"),await x(),console.log("[useShop] Data refreshed after switch")}catch(e){throw console.error("[useShop] Switch failed:",e),h(e.message||"Fehler beim Wechseln des Shops"),e}finally{d(!1)}},x=async()=>{try{let e=await (0,o.a5)();console.log("[useShop] getAvailableShops response:",e),a(e.shops||[]),console.log("[useShop] Shops list refreshed (without changing currentShop)")}catch(e){console.error("[useShop] Refresh failed:",e)}};return(0,r.useEffect)(()=>{m();let e=e=>{console.log("[useShop] shop-switched event received:",e.detail),e.detail?.shopId,m(!0).then(()=>{e.detail?.useDemo!==void 0&&n(e.detail.useDemo)})};return window.addEventListener("shop-switched",e),()=>window.removeEventListener("shop-switched",e)},[]),{currentShop:e,isDemoMode:s,shops:i,loading:l,error:c,refresh:m,switchToShop:p}}},8117:(e,t,s)=>{"use strict";s.d(t,{$m:()=>f,Ow:()=>u,QJ:()=>m,R5:()=>y,Rd:()=>p,T5:()=>r,YH:()=>c,YZ:()=>h,_M:()=>x,a5:()=>d,gU:()=>a,ku:()=>g,n8:()=>l,t2:()=>i,z2:()=>o});let r="http://localhost:8000";async function o(){let e=await fetch(`${r}/api/dashboard/stats`,{headers:n()});if(!e.ok)throw Error((await e.json()).detail||"Fehler beim Laden der Dashboard-Daten");return e.json()}function n(){let e={"Content-Type":"application/json"},t="server-session";return t&&(e["X-Session-ID"]=t),e}async function i(e){let t=e?`${r}/products/?shop_id=${e}`:`${r}/products/`,s=await fetch(t,{headers:n()});if(!s.ok)throw Error((await s.json()).detail||"Fehler beim Laden der Produkte");return s.json()}async function a(e){return(await fetch(`${r}/products/sync/${e}`,{method:"POST"})).json()}async function l(e){let t=await fetch(`${r}/recommendations/generate/${e}`,{method:"POST",headers:n()});if(!t.ok)throw Error((await t.json()).detail||"Fehler beim Generieren der Empfehlung");return t.json()}async function d(){let e=await fetch(`${r}/shops`,{headers:n()});if(!e.ok)throw Error((await e.json()).detail||"Fehler beim Laden der Shops");return e.json()}async function c(){let e=await fetch(`${r}/shops/current`,{headers:n()});if(!e.ok)throw Error((await e.json()).detail||"Fehler beim Laden des aktuellen Shops");return e.json()}async function h(e,t){let s=await fetch(`${r}/shops/switch`,{method:"POST",headers:n(),body:JSON.stringify({shop_id:e,use_demo:t})});if(!s.ok)throw Error((await s.json()).detail||"Fehler beim Wechseln des Shops");return s.json()}async function u(e,t){let s=new URLSearchParams;t?.maxResults&&s.set("max_results",String(t.maxResults)),t?.forceRefresh&&s.set("force_refresh","true");let o=await fetch(`${r}/competitors/products/${e}/competitor-search?${s}`,{method:"POST",headers:n(),credentials:"include"});if(!o.ok)throw Error((await o.json()).detail||"Competitor search failed");return o.json()}async function m(e,t){let s=await fetch(`${r}/margin/costs`,{method:"POST",headers:n(),credentials:"include",body:JSON.stringify({product_id:e,...t})});if(!s.ok)throw Error((await s.json()).detail||"Fehler beim Speichern der Kosten");return s.json()}async function p(e){let t=await fetch(`${r}/margin/costs/${e}`,{headers:n(),credentials:"include"});if(404===t.status)return null;if(!t.ok)throw Error((await t.json()).detail||"Fehler beim Laden der Kosten");return t.json()}async function x(e,t){let s=await fetch(`${r}/margin/costs/${e}`,{method:"PUT",headers:n(),credentials:"include",body:JSON.stringify(t)});if(!s.ok)throw Error((await s.json()).detail||"Fehler beim Aktualisieren der Kosten");return s.json()}async function g(e,t){let s=await fetch(`${r}/margin/calculate/${e}`,{method:"POST",headers:n(),credentials:"include",body:JSON.stringify({selling_price:t,save_to_history:!0,triggered_by:"manual"})});if(!s.ok)throw Error((await s.json()).detail||"Fehler beim Berechnen der Marge");return s.json()}async function f(e){let t=await fetch(`${r}/margin/category-defaults/${e}`,{headers:n(),credentials:"include"});if(!t.ok)throw Error((await t.json()).detail||"Fehler beim Laden der Category-Defaults");return t.json()}async function y(e,t,s="DE"){let o=await fetch(`${r}/margin/estimate-costs?selling_price=${e}&category=${t}&country_code=${s}`,{method:"POST",headers:n(),credentials:"include"});if(!o.ok)throw Error((await o.json()).detail||"Fehler beim Sch\xe4tzen der Kosten");return o.json()}},2186:(e,t,s)=>{"use strict";s.d(t,{rU:()=>n,jD:()=>a,tv:()=>l});var r=s(3869);let o=(0,s(6191).Z)({locales:["de","en"],defaultLocale:"de",localePrefix:"as-needed"}),{Link:n,redirect:i,usePathname:a,useRouter:l}=(0,r.Z)(o)},3471:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y,generateStaticParams:()=>f});var r=s(5036),o=s(2241),n=s(6043),i=s(4551),a=s(6843);let l=(0,a.createProxy)(String.raw`C:\Users\Kujti\Desktop\Trading Tools\MVP PRICE\frontend\components\LanguageSwitcher.tsx`),{__esModule:d,$$typeof:c}=l;l.default;let h=(0,a.createProxy)(String.raw`C:\Users\Kujti\Desktop\Trading Tools\MVP PRICE\frontend\components\LanguageSwitcher.tsx#LanguageSwitcher`),u=(0,a.createProxy)(String.raw`C:\Users\Kujti\Desktop\Trading Tools\MVP PRICE\frontend\components\ErrorBoundaryWrapper.tsx`),{__esModule:m,$$typeof:p}=u;u.default;let x=(0,a.createProxy)(String.raw`C:\Users\Kujti\Desktop\Trading Tools\MVP PRICE\frontend\components\ErrorBoundaryWrapper.tsx#ErrorBoundaryWrapper`);s(7272);let g=["de","en"];function f(){return g.map(e=>({locale:e}))}async function y({children:e,params:t}){let s=await Promise.resolve(t),a=s?.locale||"de";g.includes(a)||(0,i.notFound)();let l=await (0,n.Z)({locale:a});return r.jsx(x,{children:(0,r.jsxs)(o.Z,{messages:l,children:[(0,r.jsxs)("nav",{className:"flex items-center justify-between p-4 border-b bg-white",children:[r.jsx("div",{className:"flex items-center gap-4"}),r.jsx(h,{})]}),r.jsx("main",{children:e})]})})}},2917:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>o});var r=s(5036);let o={title:"PriceIQ",description:"Shopify Pricing Optimization Tool"};function n({children:e}){return r.jsx("html",{children:r.jsx("body",{children:e})})}},9122:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(7821);let o=(0,s(8369).Z)({locales:["de","en"],defaultLocale:"de",localePrefix:"as-needed"}),n=(0,r.Z)(async({requestLocale:e})=>{let t=await e||o.defaultLocale;return{locale:t,messages:(await s(7476)(`./${t}.json`)).default}})},7272:()=>{}};