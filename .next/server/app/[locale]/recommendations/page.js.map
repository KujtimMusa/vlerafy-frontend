{"version":3,"file":"../app/[locale]/recommendations/page.js","mappings":"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","sources":["webpack://pricing-optimizer-frontend/external commonjs \"@sentry/nextjs\"","webpack://pricing-optimizer-frontend/external commonjs \"next/dist/client/components/action-async-storage.external\"","webpack://pricing-optimizer-frontend/external commonjs \"next/dist/client/components/request-async-storage.external\"","webpack://pricing-optimizer-frontend/external commonjs \"next/dist/client/components/request-async-storage.external.js\"","webpack://pricing-optimizer-frontend/external commonjs \"next/dist/client/components/static-generation-async-storage.external\"","webpack://pricing-optimizer-frontend/external commonjs \"next/dist/compiled/next-server/app-page.runtime.prod.js\"","webpack://pricing-optimizer-frontend/external commonjs \"next/dist\\\\client\\\\components\\\\action-async-storage.external.js\"","webpack://pricing-optimizer-frontend/external commonjs \"next/dist\\\\client\\\\components\\\\request-async-storage.external.js\"","webpack://pricing-optimizer-frontend/external commonjs \"next/dist\\\\client\\\\components\\\\static-generation-async-storage.external.js\"","webpack://pricing-optimizer-frontend/external node-commonjs \"assert\"","webpack://pricing-optimizer-frontend/external node-commonjs \"async_hooks\"","webpack://pricing-optimizer-frontend/external node-commonjs \"child_process\"","webpack://pricing-optimizer-frontend/external node-commonjs \"diagnostics_channel\"","webpack://pricing-optimizer-frontend/external node-commonjs \"domain\"","webpack://pricing-optimizer-frontend/external node-commonjs \"fs\"","webpack://pricing-optimizer-frontend/external node-commonjs \"http\"","webpack://pricing-optimizer-frontend/external node-commonjs \"https\"","webpack://pricing-optimizer-frontend/external node-commonjs \"inspector\"","webpack://pricing-optimizer-frontend/external node-commonjs \"net\"","webpack://pricing-optimizer-frontend/external node-commonjs \"os\"","webpack://pricing-optimizer-frontend/external node-commonjs \"path\"","webpack://pricing-optimizer-frontend/external node-commonjs \"stream\"","webpack://pricing-optimizer-frontend/external node-commonjs \"tls\"","webpack://pricing-optimizer-frontend/external node-commonjs \"url\"","webpack://pricing-optimizer-frontend/external node-commonjs \"util\"","webpack://pricing-optimizer-frontend/external node-commonjs \"zlib\"","webpack://pricing-optimizer-frontend/./lib/shopifyService.ts","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/circle-check.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/calculator.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/triangle-alert.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/clock.js","webpack://pricing-optimizer-frontend/./node_modules/next-intl/dist/esm/production/react-client/index.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/circle-alert.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/circle-question-mark.js","webpack://pricing-optimizer-frontend/./components/pricing/ConfidenceIndicator.tsx","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/x.js","webpack://pricing-optimizer-frontend/./lib/formatters.ts","webpack://pricing-optimizer-frontend/./components/pricing/ActionButtons.tsx","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/trending-down.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/dollar-sign.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/info.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/chart-no-axes-column-increasing.js","webpack://pricing-optimizer-frontend/./components/pricing/PriceReasoningStory.tsx","webpack://pricing-optimizer-frontend/./lib/recommendationTexts.ts","webpack://pricing-optimizer-frontend/./components/pricing/PriceRecommendationCard.tsx","webpack://pricing-optimizer-frontend/./components/EmptyAnalysisState.tsx","webpack://pricing-optimizer-frontend/./components/LatestRecommendation.tsx","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/search.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/shopping-cart.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/map-pin.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/users.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/arrow-up-down.js","webpack://pricing-optimizer-frontend/./components/CompetitorAnalysis.tsx","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/pen-line.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/target.js","webpack://pricing-optimizer-frontend/./components/margin/MarginDisplay.tsx","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/pen.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/loader-circle.js","webpack://pricing-optimizer-frontend/./components/margin/CostInputModal.tsx","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/chevron-up.js","webpack://pricing-optimizer-frontend/app/[locale]/recommendations/page.tsx","webpack://pricing-optimizer-frontend/sentry-wrapper-module","webpack://pricing-optimizer-frontend/?32b9","webpack://pricing-optimizer-frontend/?62dc","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/arrow-left.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/chevron-down.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/circle-check-big.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/flame.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/refresh-cw.js","webpack://pricing-optimizer-frontend/./node_modules/lucide-react/dist/esm/icons/trending-up.js","webpack://pricing-optimizer-frontend/./app/styles/recommendations.css","webpack://pricing-optimizer-frontend/<anon>"],"sourcesContent":["module.exports = require(\"@sentry/nextjs\");","module.exports = require(\"next/dist/client/components/action-async-storage.external\");","module.exports = require(\"next/dist/client/components/request-async-storage.external\");","module.exports = require(\"next/dist/client/components/request-async-storage.external.js\");","module.exports = require(\"next/dist/client/components/static-generation-async-storage.external\");","module.exports = require(\"next/dist/compiled/next-server/app-page.runtime.prod.js\");","module.exports = require(\"next/dist\\\\client\\\\components\\\\action-async-storage.external.js\");","module.exports = require(\"next/dist\\\\client\\\\components\\\\request-async-storage.external.js\");","module.exports = require(\"next/dist\\\\client\\\\components\\\\static-generation-async-storage.external.js\");","module.exports = require(\"assert\");","module.exports = require(\"async_hooks\");","module.exports = require(\"child_process\");","module.exports = require(\"diagnostics_channel\");","module.exports = require(\"domain\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"inspector\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"stream\");","module.exports = require(\"tls\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"zlib\");","/**\r\n * Shopify GraphQL Service\r\n * Frontend Service fr Shopify GraphQL API Integration\r\n */\r\n\r\nimport { API_URL } from './api'\r\n\r\n// ============================================\r\n// TYPES\r\n// ============================================\r\n\r\nexport interface ShopifyVariant {\r\n  id: string\r\n  price: number\r\n  compare_at_price?: number | null\r\n  sku?: string | null\r\n  inventory_quantity: number\r\n  title: string\r\n}\r\n\r\nexport interface ShopifyProduct {\r\n  id: string\r\n  title: string\r\n  handle: string\r\n  status: string\r\n  vendor?: string | null\r\n  product_type?: string | null\r\n  variants: ShopifyVariant[]\r\n}\r\n\r\nexport interface ShopifyProductsResponse {\r\n  products: ShopifyProduct[]\r\n  page_info: {\r\n    has_next_page: boolean\r\n    end_cursor?: string | null\r\n  }\r\n  total: number\r\n}\r\n\r\nexport interface ApplyPriceRequest {\r\n  product_id: number\r\n  recommended_price: number\r\n  variant_id?: string\r\n}\r\n\r\nexport interface ApplyPriceResponse {\r\n  success: boolean\r\n  new_price: number\r\n  variant_id: string\r\n  message?: string | null\r\n}\r\n\r\nexport interface BulkUpdateRequest {\r\n  updates: Array<{\r\n    variant_id: string\r\n    new_price: number\r\n  }>\r\n}\r\n\r\nexport interface BulkUpdateResponse {\r\n  success: boolean\r\n  results: Array<{\r\n    variant_id: string\r\n    success: boolean\r\n    result?: any\r\n    error?: string\r\n  }>\r\n  total: number\r\n  successful: number\r\n}\r\n\r\n// ============================================\r\n// API FUNCTIONS\r\n// ============================================\r\n\r\n/**\r\n * Holt alle Produkte von Shopify via GraphQL\r\n */\r\nexport async function getShopifyProducts(\r\n  shopId: number,\r\n  first: number = 50\r\n): Promise<ShopifyProductsResponse> {\r\n  const response = await fetch(\r\n    `${API_URL}/api/shopify/products?shop_id=${shopId}&first=${first}`,\r\n    {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      credentials: 'include',\r\n    }\r\n  )\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json()\r\n    throw new Error(error.detail || 'Fehler beim Laden der Shopify Produkte')\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n/**\r\n * Wendet empfohlenen Preis auf Shopify an (via GraphQL)\r\n */\r\nexport async function applyRecommendedPrice(\r\n  request: ApplyPriceRequest\r\n): Promise<ApplyPriceResponse> {\r\n  const response = await fetch(`${API_URL}/api/shopify/apply-price`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    credentials: 'include',\r\n    body: JSON.stringify(request),\r\n  })\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json()\r\n    throw new Error(error.detail || 'Fehler beim Anwenden des Preises')\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n/**\r\n * Aktualisiert mehrere Preise gleichzeitig\r\n */\r\nexport async function bulkUpdatePrices(\r\n  shopId: number,\r\n  request: BulkUpdateRequest\r\n): Promise<BulkUpdateResponse> {\r\n  const response = await fetch(\r\n    `${API_URL}/api/shopify/bulk-update-prices?shop_id=${shopId}`,\r\n    {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      credentials: 'include',\r\n      body: JSON.stringify(request),\r\n    }\r\n  )\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json()\r\n    throw new Error(error.detail || 'Fehler beim Bulk Update')\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n/**\r\n * Holt ein einzelnes Produkt von Shopify\r\n */\r\nexport async function getShopifyProduct(\r\n  productId: string,\r\n  shopId: number\r\n): Promise<ShopifyProduct> {\r\n  const response = await fetch(\r\n    `${API_URL}/api/shopify/product/${productId}?shop_id=${shopId}`,\r\n    {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      credentials: 'include',\r\n    }\r\n  )\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json()\r\n    throw new Error(error.detail || 'Fehler beim Laden des Produkts')\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n];\nconst CircleCheck = createLucideIcon(\"circle-check\", __iconNode);\n\nexport { __iconNode, CircleCheck as default };\n//# sourceMappingURL=circle-check.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"16\", height: \"20\", x: \"4\", y: \"2\", rx: \"2\", key: \"1nb95v\" }],\n  [\"line\", { x1: \"8\", x2: \"16\", y1: \"6\", y2: \"6\", key: \"x4nwl0\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"14\", y2: \"18\", key: \"wjye3r\" }],\n  [\"path\", { d: \"M16 10h.01\", key: \"1m94wz\" }],\n  [\"path\", { d: \"M12 10h.01\", key: \"1nrarc\" }],\n  [\"path\", { d: \"M8 10h.01\", key: \"19clt8\" }],\n  [\"path\", { d: \"M12 14h.01\", key: \"1etili\" }],\n  [\"path\", { d: \"M8 14h.01\", key: \"6423bh\" }],\n  [\"path\", { d: \"M12 18h.01\", key: \"mhygvu\" }],\n  [\"path\", { d: \"M8 18h.01\", key: \"lrp35t\" }]\n];\nconst Calculator = createLucideIcon(\"calculator\", __iconNode);\n\nexport { __iconNode, Calculator as default };\n//# sourceMappingURL=calculator.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\",\n      key: \"wmoenq\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n];\nconst TriangleAlert = createLucideIcon(\"triangle-alert\", __iconNode);\n\nexport { __iconNode, TriangleAlert as default };\n//# sourceMappingURL=triangle-alert.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 6v6l4 2\", key: \"mmk7yg\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n];\nconst Clock = createLucideIcon(\"clock\", __iconNode);\n\nexport { __iconNode, Clock as default };\n//# sourceMappingURL=clock.js.map\n","import{useFormatter as r,useTranslations as t}from\"use-intl\";function o(r,t){return(...r)=>{try{return t(...r)}catch{throw new Error(void 0)}}}const n=o(0,t),e=o(0,r);export{e as useFormatter,n as useTranslations};\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n];\nconst CircleAlert = createLucideIcon(\"circle-alert\", __iconNode);\n\nexport { __iconNode, CircleAlert as default };\n//# sourceMappingURL=circle-alert.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\", key: \"1u773s\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n];\nconst CircleQuestionMark = createLucideIcon(\"circle-question-mark\", __iconNode);\n\nexport { __iconNode, CircleQuestionMark as default };\n//# sourceMappingURL=circle-question-mark.js.map\n","'use client'\n\nimport React from 'react'\nimport { CheckCircle, AlertCircle, HelpCircle, Check } from 'lucide-react'\nimport { useTranslations } from 'next-intl'\n\ninterface ConfidenceBasis {\n  ml_models?: number\n  competitor_count?: number\n  sales_30d?: number\n  margin_stable?: boolean\n  margin_pct?: number | null\n}\n\ninterface ConfidenceIndicatorProps {\n  confidence: number // 0-1 or 0-100\n  reasoning?: string\n  compact?: boolean\n  confidenceBasis?: ConfidenceBasis\n}\n\nexport function ConfidenceIndicator({ \n  confidence, \n  reasoning, \n  compact = false,\n  confidenceBasis\n}: ConfidenceIndicatorProps) {\n  const t = useTranslations('confidence')\n  \n  // Normalize confidence to 0-100\n  const confidencePct = confidence > 1 ? confidence : confidence * 100\n  \n  // Determine level\n  const level = \n    confidencePct >= 85 ? 'high' :\n    confidencePct >= 60 ? 'medium' :\n    'low'\n  \n  const config = {\n    high: {\n      icon: CheckCircle,\n      color: 'green',\n      bgColor: 'bg-gradient-to-r from-green-50 to-emerald-50',\n      borderColor: 'border-green-200',\n      textColor: 'text-green-700',\n      barColor: 'bg-green-500',\n      gradientBar: 'bg-gradient-to-r from-green-500 to-emerald-600'\n    },\n    medium: {\n      icon: AlertCircle,\n      color: 'yellow',\n      bgColor: 'bg-gradient-to-r from-yellow-50 to-amber-50',\n      borderColor: 'border-yellow-200',\n      textColor: 'text-yellow-700',\n      barColor: 'bg-yellow-500',\n      gradientBar: 'bg-gradient-to-r from-yellow-500 to-amber-600'\n    },\n    low: {\n      icon: HelpCircle,\n      color: 'red',\n      bgColor: 'bg-gradient-to-r from-red-50 to-orange-50',\n      borderColor: 'border-red-200',\n      textColor: 'text-red-700',\n      barColor: 'bg-red-500',\n      gradientBar: 'bg-gradient-to-r from-red-500 to-orange-600'\n    }\n  }\n  \n  const current = config[level]\n  const Icon = current.icon\n  \n  // Compact version (for header badge)\n  if (compact) {\n    return (\n      <div className={`inline-flex items-center gap-2 px-3 py-1.5 rounded-full border ${current.bgColor} ${current.borderColor}`}>\n        <Icon className={`w-4 h-4 ${current.textColor}`} />\n        <span className={`text-sm font-semibold ${current.textColor}`}>\n          {confidencePct.toFixed(0)}%\n        </span>\n      </div>\n    )\n  }\n  \n  // Get competitor count and sales data\n  const compCount = confidenceBasis?.competitor_count || 0\n  const sales30d = confidenceBasis?.sales_30d || 0\n  \n  // Full version - New improved design\n  return (\n    <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-2xl border-l-4 border-blue-500 space-y-4\">\n      \n      {/* HEADLINE: Grte Schrift + Progressbar */}\n      <div className=\"flex items-center gap-3\">\n        <div className=\"w-12 h-12 bg-blue-500 rounded-2xl flex items-center justify-center flex-shrink-0\">\n          <Check className=\"w-6 h-6 text-white\" />\n        </div>\n        <div className=\"flex-1\">\n          <h3 className=\"text-2xl font-bold text-gray-900\">\n            {t('title', { confidence: confidencePct.toFixed(0) })}\n          </h3>\n          {/* Progress Bar */}\n          <div className=\"w-full bg-gray-200 rounded-full h-2 mt-2\">\n            <div \n              className=\"bg-gradient-to-r from-blue-500 to-indigo-600 h-2 rounded-full transition-all duration-500\"\n              style={{width: `${confidencePct}%`}}\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* NEUE ERKLRUNG: Klar + konkret */}\n      <div className=\"p-4 bg-white/50 rounded-xl border\">\n        <h4 className=\"font-semibold text-gray-900 mb-3 flex items-center gap-2\">\n           <span>{t('whatAnalyzes')}</span>\n        </h4>\n        <ul className=\"space-y-2 text-sm text-gray-700\">\n          <li> Echte Verkaufsdaten aus deinem Shopify-Shop</li>\n          <li> Aktuelle Preise deiner {compCount > 0 ? `${compCount}-${Math.max(compCount, 10)}` : '5-10'} wichtigsten Konkurrenten</li>\n          <li> {confidenceBasis?.ml_models || 4} spezialisierte Machine-Learning-Modelle (Umsatz, Konkurrenz, Marge, Saisonalitt)</li>\n          <li> Deine eingetragenen Kosten und bisherigen Margen</li>\n        </ul>\n      </div>\n\n      {/* WARUM-ERKLRUNG: Konkret statt \"strong signals\" */}\n      <div className=\"p-4 bg-yellow-50/80 border border-yellow-200 rounded-xl\">\n        <h4 className=\"font-semibold text-gray-900 mb-3 flex items-center gap-2\">\n           {t('why', { confidence: confidencePct.toFixed(0) })}\n        </h4>\n        <p className=\"text-sm text-gray-800 leading-relaxed\">\n          {t('whyText')}\n        </p>\n      </div>\n      \n    </div>\n  )\n}\n\n\n\n\n\n\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n];\nconst X = createLucideIcon(\"x\", __iconNode);\n\nexport { __iconNode, X as default };\n//# sourceMappingURL=x.js.map\n","/**\n * Utility functions for formatting currency, percentages, etc.\n */\n\nexport function formatCurrency(amount: number, currency: string = 'EUR'): string {\n  return new Intl.NumberFormat('de-DE', {\n    style: 'currency',\n    currency: currency,\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2\n  }).format(amount);\n}\n\nexport function formatPercentage(value: number, decimals: number = 1): string {\n  return `${value >= 0 ? '+' : ''}${value.toFixed(decimals)}%`;\n}\n\nexport function formatNumber(value: number, decimals: number = 0): string {\n  return new Intl.NumberFormat('de-DE', {\n    minimumFractionDigits: decimals,\n    maximumFractionDigits: decimals\n  }).format(value);\n}\n\nexport function formatCompactNumber(value: number): string {\n  return new Intl.NumberFormat('de-DE', {\n    notation: 'compact',\n    compactDisplay: 'short'\n  }).format(value);\n}\n\nexport function formatTimeAgo(timestamp: string): string {\n  const now = new Date();\n  const then = new Date(timestamp);\n  const diffMs = now.getTime() - then.getTime();\n  const diffMins = Math.floor(diffMs / 60000);\n  \n  if (diffMins < 1) return 'just now';\n  if (diffMins === 1) return '1 minute ago';\n  if (diffMins < 60) return `${diffMins} minutes ago`;\n  \n  const diffHours = Math.floor(diffMins / 60);\n  if (diffHours === 1) return '1 hour ago';\n  if (diffHours < 24) return `${diffHours} hours ago`;\n  \n  const diffDays = Math.floor(diffHours / 24);\n  if (diffDays === 1) return '1 day ago';\n  return `${diffDays} days ago`;\n}\n\n","'use client'\n\nimport React, { useState } from 'react'\nimport { useTranslations } from 'next-intl'\nimport { CheckCircle2, X, AlertTriangle, Clock } from 'lucide-react'\nimport { formatCurrency } from '@/lib/formatters'\n\ninterface ActionButtonsProps {\n  recommendedPrice: number\n  onApply: () => Promise<void>\n  onDismiss: () => void\n  isApplying: boolean\n  isDisabled?: boolean\n  marginAnalysis?: {\n    is_safe: boolean\n    margin: number\n    warning: string | null\n    message: string\n    details?: {\n      margin?: {\n        euro: number\n      }\n    }\n  } | null\n}\n\nexport function ActionButtons({\n  recommendedPrice,\n  onApply,\n  onDismiss,\n  isApplying,\n  isDisabled = false,\n  marginAnalysis\n}: ActionButtonsProps) {\n  const t = useTranslations('pricing')\n  const tCommon = useTranslations('common')\n  const tActions = useTranslations('actions')\n  \n  const [showSchedule, setShowSchedule] = useState(false)\n  const hasMarginWarning = marginAnalysis && !marginAnalysis.is_safe\n  \n  // Calculate estimated revenue impact (placeholder - you'd calculate this properly)\n  const estimatedMonthlyImpact = marginAnalysis?.details?.margin?.euro \n    ? marginAnalysis.details.margin.euro * 30 // Rough estimate: margin * 30 days\n    : null\n  \n  return (\n    <div className=\"space-y-3\">\n      \n      {/* Primary Actions */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n        \n        {/* Apply Button */}\n        <button\n          onClick={onApply}\n          disabled={isApplying || isDisabled}\n          className={`\n            flex items-center justify-center gap-2 px-6 py-3 rounded-lg font-semibold\n            transition-all duration-200 transform hover:scale-105\n            disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none\n            ${isDisabled \n              ? 'bg-gray-300 text-gray-600' \n              : hasMarginWarning\n                ? 'bg-orange-600 hover:bg-orange-700 text-white shadow-lg hover:shadow-xl'\n                : 'bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl'\n            }\n          `}\n        >\n          {isApplying ? (\n            <>\n              <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n              <span>{t('applying')}</span>\n            </>\n          ) : (\n            <>\n              <CheckCircle2 className=\"w-5 h-5\" />\n              <div className=\"flex flex-col items-start\">\n                <span>{t('apply_price', { price: formatCurrency(recommendedPrice) })}</span>\n                {estimatedMonthlyImpact && (\n                  <span className=\"text-xs opacity-80 font-normal\">\n                    +{formatCurrency(estimatedMonthlyImpact)}{tActions('month_est')}\n                  </span>\n                )}\n              </div>\n            </>\n          )}\n        </button>\n        \n        {/* Dismiss Button */}\n        <button\n          onClick={onDismiss}\n          disabled={isApplying}\n          className=\"flex items-center justify-center gap-2 px-6 py-3 rounded-lg font-semibold\n                     border-2 border-gray-300 text-gray-700 hover:bg-gray-50\n                     transition-all disabled:opacity-50\"\n        >\n          <X className=\"w-5 h-5\" />\n          <span>{tCommon('dismiss')}</span>\n        </button>\n        \n      </div>\n      \n      {/* Secondary Action: Schedule */}\n      <button\n        onClick={() => setShowSchedule(!showSchedule)}\n        className=\"w-full flex items-center justify-center gap-2 px-4 py-2 text-sm\n                   text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n      >\n        <Clock className=\"w-4 h-4\" />\n        <span>{t('schedule_later')}</span>\n      </button>\n      \n      {/* Schedule Panel (if shown) */}\n      {showSchedule && (\n        <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-200 space-y-3\">\n          <p className=\"text-sm font-medium text-blue-900\">\n            {tActions('schedule_price_change')}\n          </p>\n          \n          <div className=\"grid grid-cols-2 gap-3\">\n            <div>\n              <label className=\"block text-xs text-blue-700 mb-1\">{tActions('date')}</label>\n              <input\n                type=\"date\"\n                className=\"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-xs text-blue-700 mb-1\">{tActions('time')}</label>\n              <input\n                type=\"time\"\n                defaultValue=\"09:00\"\n                className=\"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm\"\n              />\n            </div>\n          </div>\n          \n          <button\n            className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium\n                       hover:bg-blue-700 transition-colors\"\n          >\n            {tActions('schedule_change')}\n          </button>\n        </div>\n      )}\n      \n      {/* Warning Message (if disabled) */}\n      {isDisabled && (\n        <div className=\"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg\">\n          <X className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n          <p className=\"text-sm text-red-800\">\n            {tActions('cannot_apply_warning')}\n          </p>\n        </div>\n      )}\n      \n      {/* Margin Warning */}\n      {hasMarginWarning && !isDisabled && (\n        <div className=\"flex items-start gap-2 p-3 bg-orange-50 border border-orange-200 rounded-lg\">\n          <AlertTriangle className=\"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5\" />\n          <div className=\"flex-1\">\n            <p className=\"text-sm font-medium text-orange-900 mb-1\">{tActions('margin_warning')}</p>\n            <p className=\"text-xs text-orange-800\">{marginAnalysis?.message}</p>\n          </div>\n        </div>\n      )}\n      \n    </div>\n  )\n}\n\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 17h6v-6\", key: \"t6n2it\" }],\n  [\"path\", { d: \"m22 17-8.5-8.5-5 5L2 7\", key: \"x473p\" }]\n];\nconst TrendingDown = createLucideIcon(\"trending-down\", __iconNode);\n\nexport { __iconNode, TrendingDown as default };\n//# sourceMappingURL=trending-down.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"22\", key: \"7eqyqh\" }],\n  [\"path\", { d: \"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6\", key: \"1b0p4s\" }]\n];\nconst DollarSign = createLucideIcon(\"dollar-sign\", __iconNode);\n\nexport { __iconNode, DollarSign as default };\n//# sourceMappingURL=dollar-sign.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n];\nconst Info = createLucideIcon(\"info\", __iconNode);\n\nexport { __iconNode, Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M5 21v-6\", key: \"1hz6c0\" }],\n  [\"path\", { d: \"M12 21V9\", key: \"uvy0l4\" }],\n  [\"path\", { d: \"M19 21V3\", key: \"11j9sm\" }]\n];\nconst ChartNoAxesColumnIncreasing = createLucideIcon(\"chart-no-axes-column-increasing\", __iconNode);\n\nexport { __iconNode, ChartNoAxesColumnIncreasing as default };\n//# sourceMappingURL=chart-no-axes-column-increasing.js.map\n","'use client'\n\nimport React, { useState } from 'react'\nimport { formatCurrency } from '@/lib/formatters'\nimport {\n  CheckCircle2,\n  TrendingDown,\n  TrendingUp,\n  Lightbulb,\n  Package,\n  DollarSign,\n  Info,\n  Calculator,\n  AlertCircle,\n  BarChart,\n  X,\n  RefreshCw,\n  Clock\n} from 'lucide-react'\n\ninterface StrategyDetail {\n  strategy: string\n  recommended_price: number\n  confidence: number\n  reasoning?: string\n  competitor_context?: any\n}\n\ninterface PriceReasoningStoryProps {\n  recommendedPrice: number\n  currentPrice: number\n  strategyDetails: StrategyDetail[]\n  competitorData?: {\n    avg: number\n    min?: number\n    max?: number\n    prices?: Array<{ source: string; price: number }>\n  }\n  productName?: string\n  productId?: string | number\n  confidence?: number\n  onApply?: (price: number) => Promise<void>\n  onDismiss?: () => void\n  onRefresh?: () => Promise<void>\n  createdAt?: string\n}\n\nexport function PriceReasoningStory({\n  recommendedPrice,\n  currentPrice,\n  strategyDetails = [],\n  competitorData,\n  productName = 'Produkt',\n  productId,\n  confidence,\n  onApply,\n  onDismiss,\n  onRefresh,\n  createdAt\n}: PriceReasoningStoryProps) {\n  //  FIX: Ensure confidence is always valid (0-1 range)\n  const validConfidence = Math.max(0, Math.min(1, confidence || 0.5))\n  \n  const [showDetails, setShowDetails] = useState<Record<number, boolean>>({})\n  \n  const priceChange = recommendedPrice - currentPrice\n  const priceChangePct = (priceChange / currentPrice) * 100\n  \n  // Datenqualitt Badge Funktion\n  const getQualityBadge = (confidence: number) => {\n    const scorePct = validConfidence * 100\n    if (scorePct >= 90) {\n      return <span className=\"strategy-badge excellent\">Datenqualitt: Exzellent</span>\n    }\n    if (scorePct >= 80) {\n      return <span className=\"strategy-badge excellent\">Datenqualitt: Sehr gut</span>\n    }\n    if (scorePct >= 70) {\n      return <span className=\"strategy-badge good\">Datenqualitt: Gut</span>\n    }\n    return <span className=\"strategy-badge good\">Datenqualitt: Ausreichend</span>\n  }\n  \n  // Strategie-Konfiguration\n  const strategyConfig: Record<string, {\n    emoji: string\n    title: string\n    getStory: (data: any) => string\n    getBasedOn: (data: any) => string[]\n    colorClass: string\n  }> = {\n    competitive: {\n      emoji: '',\n      title: 'Du bist teurer als der Markt',\n      getStory: (data) => {\n        const avgPrice = data.competitorData?.avg || 0\n        const competitorCount = data.competitorData?.prices?.length || 5\n        const diff = currentPrice - avgPrice\n        const diffPct = avgPrice > 0 ? ((diff / avgPrice) * 100).toFixed(0) : '0'\n        const priceChange = currentPrice - recommendedPrice\n        \n        if (diff > 0) {\n          return `Wir haben ${competitorCount} Wettbewerber analysiert. Der durchschnittliche Preis liegt bei ${formatCurrency(avgPrice)}. Du bist ${diffPct}% teurer als der Durchschnitt. Du solltest den Preis um ${formatCurrency(Math.abs(priceChange))} ${priceChange > 0 ? 'senken' : 'erhhen'} um wettbewerbsfhig zu bleiben.`\n        } else {\n          return `Wir haben ${competitorCount} Wettbewerber analysiert. Der durchschnittliche Preis liegt bei ${formatCurrency(avgPrice)}. Du bist bereits wettbewerbsfhig positioniert.`\n        }\n      },\n      getBasedOn: (data) => {\n        const competitorCount = data.competitorData?.prices?.length || 5\n        return [\n          `Echtzeitpreise von ${competitorCount} Konkurrenten`,\n          'Aktuelle Marktdaten (heute aktualisiert)',\n          'Preisvergleich mit hnlichen Produkten'\n        ]\n      },\n      colorClass: 'competitive'\n    },\n    demand: {\n      emoji: '',\n      title: 'Die Nachfrage steigt stark',\n      getStory: (data) => {\n        const sales = data.sales || 64\n        const previousSales = data.previousSales || 54\n        const growth = previousSales > 0 ? (((sales - previousSales) / previousSales) * 100).toFixed(0) : '19'\n        return `In den letzten 7 Tagen hast du ${sales} Verkufe gemacht (vorher: ${previousSales} Verkufe). Das ist ein +${growth}% Wachstum! Wenn die Nachfrage steigt, kannst du hhere Preise durchsetzen.`\n      },\n      getBasedOn: () => [\n        'Deine letzten 30 Tage Verkaufsdaten',\n        'Trendanalyse der letzten Woche',\n        'Machine-Learning Vorhersage fr nchste 7 Tage'\n      ],\n      colorClass: 'demand'\n    },\n    inventory: {\n      emoji: '',\n      title: 'Dein Lagerbestand ist niedrig',\n      getStory: (data) => {\n        const stock = data.stock || 45\n        const daysOfStock = data.daysOfStock || 20\n        return `Mit ${stock} Einheiten auf Lager hast du bei aktuellem Tempo noch ${daysOfStock} Tage Vorrat. Das ist knapp! Du solltest vorsichtig mit Preissenkungen sein.`\n      },\n      getBasedOn: (data) => {\n        const stock = data.stock || 45\n        const avgDaily = data.avgDaily || 2.25\n        return [\n          `Aktueller Lagerbestand: ${stock} Stck`,\n          `Durchschnittlicher Verkauf: ${avgDaily.toFixed(1)}/Tag`,\n          'Berechnung basierend auf letzten 7 Tagen Verkufen'\n        ]\n      },\n      colorClass: 'inventory'\n    },\n    cost: {\n      emoji: '',\n      title: 'Deine Kosten sind stabil',\n      getStory: () => {\n        return `Deine Einkaufskosten liegen bei einem stabilen Niveau. Die empfohlene Preisnderung bercksichtigt deine aktuellen Margen und stellt sicher, dass du profitabel bleibst.`\n      },\n      getBasedOn: () => [\n        'Deine hinterlegten Produktkosten',\n        'Aktuelle Marge-Berechnung',\n        'Historische Kostenentwicklung'\n      ],\n      colorClass: 'costs'\n    }\n  }\n  \n  // Berechne Preisimpact fr jede Strategie\n  const getPriceImpact = (strategy: StrategyDetail) => {\n    const impact = strategy.recommended_price - currentPrice\n    return {\n      value: impact,\n      formatted: formatCurrency(Math.abs(impact)),\n      isIncrease: impact > 0,\n      isDecrease: impact < 0\n    }\n  }\n  \n  // Sortiere Strategien nach Impact\n  const sortedStrategies = [...strategyDetails].sort((a, b) => {\n    const impactA = Math.abs(getPriceImpact(a).value)\n    const impactB = Math.abs(getPriceImpact(b).value)\n    return impactB - impactA\n  })\n  \n  // Berechne gewichtete Beitrge (vereinfacht)\n  const calculateWeightedContributions = () => {\n    return sortedStrategies.map((strategy, idx) => {\n      const impact = getPriceImpact(strategy)\n      const weight = strategy.confidence * (1 / sortedStrategies.length)\n      const weightedImpact = impact.value * weight\n      \n      return {\n        strategy: strategy.strategy,\n        impact: impact.value,\n        weightedImpact,\n        confidence: strategy.confidence,\n        weight: weight * 100\n      }\n    })\n  }\n  \n  const weightedContributions = calculateWeightedContributions()\n  const totalWeighted = weightedContributions.reduce((sum, w) => sum + w.weightedImpact, 0)\n  \n  return (\n    <div className=\"recommendation-content\">\n      \n      {/* ========== 1. PRODUCT HEADER ========== */}\n      <div className=\"recommendation-header\">\n        <div className=\"product-header-row\">\n          <div className=\"product-info-compact\">\n            <h3>{productName}</h3>\n            {productId && <p className=\"product-meta\">Produkt-ID: {productId}</p>}\n          </div>\n          <div className=\"confidence-badge-large\">\n            <CheckCircle2 className=\"h-6 w-6\" />\n            <span>{Math.round(validConfidence * 100)}% Sicherheit</span>\n          </div>\n        </div>\n        <p className=\"recommendation-text\">\n          Empfohlene Preis{priceChange < 0 ? 'senkung' : 'erhhung'} um {Math.abs(priceChangePct).toFixed(1)}% um wettbewerbsfhig zu bleiben.\n        </p>\n      </div>\n\n      {/* ========== 2. ACTION BUTTONS (GANZ OBEN!) ========== */}\n      {(onApply || onDismiss || onRefresh) && (\n        <>\n          <div className=\"action-buttons-top\">\n            {onApply && (\n              <button \n                className=\"action-button-primary\"\n                onClick={() => onApply(recommendedPrice)}\n              >\n                <CheckCircle2 className=\"h-5 w-5\" />\n                {formatCurrency(recommendedPrice)} anwenden\n              </button>\n            )}\n            \n            {onDismiss && (\n              <button \n                className=\"action-button-secondary\"\n                onClick={onDismiss}\n              >\n                <X className=\"h-5 w-5\" />\n                Verwerfen\n              </button>\n            )}\n            \n            {onRefresh && (\n              <button \n                className=\"action-button-update\"\n                onClick={onRefresh}\n              >\n                <RefreshCw className=\"h-4 w-4\" />\n                Aktualisieren\n              </button>\n            )}\n          </div>\n\n          {/* Last Updated */}\n          <div className=\"last-updated\">\n            <span className=\"flex items-center gap-2\">\n              <Clock className=\"h-4 w-4\" />\n              {createdAt ? new Date(createdAt).toLocaleString('de-DE') : 'just now'}\n            </span>\n            <span className=\"update-link\">Spter planen</span>\n          </div>\n        </>\n      )}\n\n      {/* ========== 3. PRICE COMPARISON - PREMIUM ========== */}\n      {/*  FIX: Price Comparison - Gleiche Gre mit grid */}\n      <div className=\"grid grid-cols-2 gap-4 mb-6\">\n        {/* CURRENT PRICE CARD */}\n        <div className=\"flex flex-col justify-between p-6 border-2 rounded-xl\" style={{ \n          backgroundColor: '#0f172a', \n          borderColor: '#475569',\n          minHeight: '140px' //  Gleiche Hhe\n        }}>\n          <div className=\"flex items-center gap-2 mb-4\">\n            <div className=\"w-3 h-3 rounded-full bg-slate-500\" />\n            <div className=\"price-label\" style={{ color: '#94a3b8' }}>Aktueller Preis</div>\n          </div>\n          \n          {/* Price -  Gleiche Schriftgre */}\n          <div className=\"price-amount\" style={{ fontSize: '36px', color: '#f1f5f9' }}>\n            {formatCurrency(currentPrice)}\n          </div>\n        </div>\n        \n        {/* RECOMMENDED PRICE CARD -  FIX: Dark Theme statt Blau */}\n        <div className=\"relative overflow-hidden rounded-xl border-2 p-6 flex flex-col justify-between\" style={{\n          backgroundColor: '#064e3b',\n          borderColor: '#10b981',\n          minHeight: '140px' //  Gleiche Hhe\n        }}>\n          {/* Recommended Badge */}\n          <div className=\"absolute top-4 right-4\">\n            <div className=\"px-3 py-1.5 rounded-lg\" style={{\n              backgroundColor: 'rgba(16, 185, 129, 0.2)',\n              border: '1px solid rgba(16, 185, 129, 0.5)'\n            }}>\n              <span className=\"text-xs font-bold\" style={{ color: '#86efac' }}> EMPFOHLEN</span>\n            </div>\n          </div>\n          \n          <div className=\"relative z-10 flex flex-col justify-between h-full\">\n            {/* Label */}\n            <div className=\"flex items-center gap-2 mb-4\">\n              <div className=\"w-3 h-3 rounded-full bg-green-400\" />\n              <div className=\"price-label\" style={{ color: '#86efac' }}>Empfohlener Preis</div>\n            </div>\n            \n            {/* Price -  Gleiche Schriftgre */}\n            <div className=\"price-amount\" style={{ fontSize: '36px', color: '#86efac' }}>\n              {formatCurrency(recommendedPrice)}\n            </div>\n            \n            {/* Price Change Indicator */}\n            <div className=\"mt-2 inline-flex items-center gap-2 px-3 py-1.5 rounded-lg\" style={{\n              backgroundColor: 'rgba(16, 185, 129, 0.2)',\n              border: '1px solid rgba(16, 185, 129, 0.3)'\n            }}>\n              {priceChange > 0 ? (\n                <TrendingUp className=\"w-4 h-4\" style={{ color: '#86efac' }} />\n              ) : (\n                <TrendingDown className=\"w-4 h-4\" style={{ color: '#86efac' }} />\n              )}\n              <span className=\"text-sm font-bold\" style={{ color: '#86efac' }}>\n                {priceChange > 0 ? '+' : ''}{formatCurrency(Math.abs(priceChange))} ({priceChange > 0 ? '+' : ''}{Math.abs(priceChangePct).toFixed(1)}%)\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* ========== 4. ML CONFIDENCE SECTION ========== */}\n      <div className=\"ml-confidence-section\">\n        <div className=\"confidence-header\">\n          <div className=\"confidence-icon\">\n            <CheckCircle2 className=\"h-6 w-6 text-white\" />\n          </div>\n          <h3 className=\"confidence-title\">Unsere KI ist {Math.round(validConfidence * 100)}% sicher</h3>\n        </div>\n        \n        {/* Progress Bar */}\n        <div className=\"confidence-progress-wrapper\">\n          <div className=\"confidence-progress-header\">\n            <span className=\"confidence-progress-label\">Sicherheitswert</span>\n            <span className=\"confidence-progress-value\">{Math.round(validConfidence * 100)}%</span>\n          </div>\n          <div className=\"confidence-progress-bar-container\" style={{ maxWidth: '100%', overflow: 'hidden' }}>\n            <div \n              className=\"confidence-progress-bar\"\n              style={{ \n                width: `${Math.min(Math.max(validConfidence * 100, 0), 100)}%`,\n                maxWidth: '100%'\n              }}\n            />\n          </div>\n        </div>\n        \n        {/* What we analyzed */}\n        <div className=\"analysis-factors\">\n          <div className=\"analysis-factors-title\">\n             Was analysiert unsere KI?\n          </div>\n          <div className=\"factors-grid\">\n            <div className=\"factor-item\">\n              <CheckCircle2 className=\"factor-check\" />\n              <span>Echte Verkaufsdaten aus deinem Shopify-Shop</span>\n            </div>\n            <div className=\"factor-item\">\n              <CheckCircle2 className=\"factor-check\" />\n              <span>Aktuelle Preise deiner 5-10 wichtigsten Konkurrenten</span>\n            </div>\n            <div className=\"factor-item\">\n              <CheckCircle2 className=\"factor-check\" />\n              <span>4 spezialisierte Machine-Learning-Modelle</span>\n            </div>\n            <div className=\"factor-item\">\n              <CheckCircle2 className=\"factor-check\" />\n              <span>Deine eingetragenen Kosten und bisherigen Margen</span>\n            </div>\n          </div>\n          \n          {/* Why confidence % */}\n          <div className=\"confidence-explanation\">\n            <div className=\"confidence-explanation-title\">\n               Warum genau {Math.round(validConfidence * 100)}% Sicherheit?\n            </div>\n            <p className=\"confidence-explanation-text\">\n              Deine Produkte verkaufen sich bei diesem Preis sehr gut. \n              Konkurrenten haben hnliche Preise und deine Marge bleibt stabil. \n              Alle Daten deuten auf Erfolg hin!\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* ========== 5. WHY WE RECOMMEND ========== */}\n      <div className=\"why-recommend-section\">\n        <div className=\"why-recommend-header\">\n          <div className=\"why-recommend-icon\">\n            <Lightbulb className=\"h-5 w-5 text-white\" />\n          </div>\n          <h3 className=\"why-recommend-title\"> Warum empfehlen wir {formatCurrency(recommendedPrice)}?</h3>\n        </div>\n        \n        <p className=\"why-recommend-subtitle\">\n          Unsere KI hat {strategyDetails.length} wichtige Marktfaktoren analysiert:\n        </p>\n        \n        <div className=\"strategy-cards\">\n          {sortedStrategies.map((strategy, idx) => {\n            const config = strategyConfig[strategy.strategy] || {\n              emoji: '',\n              title: strategy.strategy,\n              getStory: () => strategy.reasoning || 'Keine Details verfgbar.',\n              getBasedOn: () => ['Daten aus KI-Analyse'],\n              colorClass: 'competitive'\n            }\n            \n            const impact = getPriceImpact(strategy)\n            \n            return (\n              <div key={idx} className={`strategy-card ${config.colorClass}`}>\n                <div className=\"strategy-header\">\n                  <div className=\"strategy-title-row\">\n                    <div className=\"strategy-number\">{idx + 1}</div>\n                    <div className={`strategy-icon-container ${config.colorClass}`}>\n                      {config.colorClass === 'competitive' && <TrendingDown className=\"h-4 w-4 text-white\" />}\n                      {config.colorClass === 'demand' && <TrendingUp className=\"h-4 w-4 text-white\" />}\n                      {config.colorClass === 'inventory' && <Package className=\"h-4 w-4 text-white\" />}\n                      {config.colorClass === 'costs' && <DollarSign className=\"h-4 w-4 text-white\" />}\n                    </div>\n                    <h4 className=\"strategy-title\">{config.title}</h4>\n                  </div>\n                  {getQualityBadge(strategy.confidence)}\n                </div>\n                \n                <p className=\"strategy-text\">\n                  {config.getStory({\n                    competitorData,\n                    currentPrice,\n                    recommendedPrice,\n                    strategy\n                  })}\n                </p>\n                \n                <div className={`strategy-impact ${impact.isDecrease ? 'negative' : 'positive'}`}>\n                  {impact.isDecrease ? (\n                    <TrendingDown className=\"strategy-impact-icon\" />\n                  ) : (\n                    <TrendingUp className=\"strategy-impact-icon\" />\n                  )}\n                  <span>\n                    Preisimpact: {impact.isDecrease ? '-' : '+'}{impact.formatted} {impact.isDecrease ? 'Senkung empfohlen' : 'Erhhung empfohlen'}\n                  </span>\n                </div>\n                \n                <div className=\"strategy-details\">\n                  <button \n                    className=\"strategy-details-toggle\"\n                    onClick={() => setShowDetails(prev => ({ ...prev, [idx]: !prev[idx] }))}\n                  >\n                    <Info className=\"h-3 w-3\" />\n                    Basiert auf...\n                  </button>\n                  \n                  {showDetails[idx] && (\n                    <div className=\"mt-3 p-3 border\" style={{ backgroundColor: '#1e293b', borderColor: '#475569' }}>\n                      <ul className=\"list-disc list-inside space-y-1 text-sm\" style={{ color: '#cbd5e1' }}>\n                        {config.getBasedOn({\n                          competitorData,\n                          strategy,\n                          currentPrice\n                        }).map((item, itemIdx) => (\n                          <li key={itemIdx}>{item}</li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )\n          })}\n        </div>\n      </div>\n\n      {/* ========== 6. HOW IS IT CALCULATED ========== */}\n      <div className=\"calculation-section\">\n        <div className=\"calculation-header\">\n          <div className=\"calculation-icon\">\n            <Calculator className=\"h-5 w-5 text-white\" />\n          </div>\n          <h3 className=\"calculation-title\"> Wie wird {priceChange < 0 ? '-' : '+'}{formatCurrency(Math.abs(priceChange))} berechnet?</h3>\n        </div>\n        \n        <div className=\"calculation-notice\">\n          <AlertCircle className=\"calculation-notice-icon\" />\n          <div>\n            <strong>Warum nicht die einfache Summe?</strong> Jede Strategie wird basierend auf ihrer \n            <strong> Datenqualitt unterschiedlich stark gewichtet</strong>. Faktoren mit exzellenter \n            Datenqualitt (z.B. Wettbewerbspreise) haben mehr Einfluss als Faktoren mit guter \n            Datenqualitt (z.B. Nachfrage-Trends). Die gewichtete Berechnung stellt sicher, dass \n            weniger zuverlssige Daten nicht zu starken Einfluss haben.\n          </div>\n        </div>\n        \n        {/* Strategies List */}\n        <div className=\"weighted-section\">\n          <div className=\"weighted-header\">\n             Einzelne Strategien-Empfehlungen:\n          </div>\n          \n          <div className=\"strategies-list\">\n            {sortedStrategies.map((strategy, idx) => {\n              const impact = getPriceImpact(strategy)\n              const config = strategyConfig[strategy.strategy] || { colorClass: 'competitive' }\n              \n              return (\n                <div key={idx} className=\"strategy-row\">\n                  <div className=\"strategy-row-label\">\n                    {config.colorClass === 'competitive' && <TrendingDown className=\"strategy-row-icon text-red-500\" />}\n                    {config.colorClass === 'demand' && <TrendingUp className=\"strategy-row-icon text-green-500\" />}\n                    {config.colorClass === 'inventory' && <Package className=\"strategy-row-icon text-orange-500\" />}\n                    {config.colorClass === 'costs' && <DollarSign className=\"strategy-row-icon text-blue-500\" />}\n                    <span> {config.title || strategy.strategy} ({strategy.confidence >= 0.9 ? 'Datenqualitt: Exzellent' : strategy.confidence >= 0.8 ? 'Datenqualitt: Sehr gut' : 'Datenqualitt: Gut'})</span>\n                  </div>\n                  <div className={`strategy-row-value ${impact.isDecrease ? 'negative' : 'positive'}`}>\n                    {impact.isDecrease ? '-' : '+'}{impact.formatted}\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        </div>\n        \n        {/* Weighted Contributions */}\n        <div className=\"weighted-section\">\n          <div className=\"weighted-header\">\n             Gewichtete Beitrge (Datenqualitt  Basis-Gewicht):\n          </div>\n          \n          <div className=\"weighted-bars\">\n            {weightedContributions.map((w, idx) => {\n              const config = strategyConfig[sortedStrategies[idx]?.strategy] || { colorClass: 'demand' }\n              const weightPct = (w.weight / 100) * 100\n              \n              return (\n                <div key={idx} className=\"weighted-bar\">\n                  <div className=\"weighted-bar-header\">\n                    <span className=\"weighted-bar-label\">\n                      {strategyConfig[sortedStrategies[idx]?.strategy]?.title || sortedStrategies[idx]?.strategy}\n                    </span>\n                    <span className=\"weighted-bar-value\">\n                      {weightPct.toFixed(1)}%  Datenqualitt: {w.confidence >= 0.9 ? 'Exzellent' : w.confidence >= 0.8 ? 'Sehr gut' : 'Gut'} = <strong>{w.weightedImpact > 0 ? '+' : ''}{formatCurrency(w.weightedImpact)}</strong>\n                    </span>\n                  </div>\n                  <div className=\"weighted-bar-container\">\n                    <div \n                      className={`weighted-bar-fill ${config.colorClass}`}\n                      style={{ width: `${weightPct}%` }}\n                    />\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        </div>\n        \n        {/* Final Sum */}\n        <div className=\"final-sum-box\">\n          <div className=\"final-sum-header\">\n            <BarChart className=\"final-sum-icon\" />\n            <span className=\"final-sum-label\">\n               Finale Summe (Gewichteter Durchschnitt):\n            </span>\n          </div>\n          \n          <div className=\"final-sum-calculation\">\n            Summe aller gewichteten Beitrge\n          </div>\n          \n          <div className=\"final-sum-value\">{priceChange < 0 ? '-' : '+'}{formatCurrency(Math.abs(priceChange))}</div>\n          <div className=\"final-sum-percentage\">({priceChange < 0 ? '-' : '+'}{Math.abs(priceChangePct).toFixed(1)}%)</div>\n        </div>\n      </div>\n\n    </div>\n  )\n}\n","/**\r\n * UX-Writer: Generiert benutzerfreundliche UI-Texte aus Recommendation-Daten\r\n */\r\n\r\ninterface RecommendationData {\r\n  product_title?: string\r\n  product_name?: string\r\n  current_price: number\r\n  recommended_price: number\r\n  price_change_pct: number\r\n  confidence: number\r\n  strategies?: {\r\n    demand?: { price: number; confidence: number; strategy: string; reasoning: string }\r\n    inventory?: { price: number; confidence: number; strategy: string; reasoning: string }\r\n    cost?: { price: number; confidence: number; strategy: string; reasoning: string }\r\n    competitive?: { price: number; confidence: number; strategy: string; reasoning: string }\r\n  }\r\n  competitor_context?: {\r\n    position: string\r\n    avg_price: number\r\n    min_price: number\r\n    max_price: number\r\n    price_diff_pct: number\r\n    competitor_count: number\r\n  }\r\n  ml_predictions?: {\r\n    combined_ml_confidence?: number\r\n    meta_approved?: boolean\r\n  }\r\n  margin?: {\r\n    is_safe: boolean\r\n    margin_pct: number\r\n  }\r\n  has_insights?: boolean\r\n}\r\n\r\nexport interface RecommendationTexts {\r\n  headline: string\r\n  bulletPoints: string[]\r\n  confidence: string\r\n  insights: string\r\n}\r\n\r\n/**\r\n * Generiert UI-Texte aus Recommendation-Daten\r\n */\r\nexport function generateRecommendationTexts(data: RecommendationData): RecommendationTexts {\r\n  const priceChange = data.recommended_price - data.current_price\r\n  const isDecrease = priceChange < 0\r\n  const absChangePct = Math.abs(data.price_change_pct)\r\n  \r\n  // 1. HEADLINE (max. 15 Wrter)\r\n  const headline = generateHeadline(data, isDecrease, absChangePct)\r\n  \r\n  // 2. BULLET POINTS (3-5 Punkte)\r\n  const bulletPoints = generateBulletPoints(data)\r\n  \r\n  // 3. CONFIDENCE TEXT\r\n  const confidence = generateConfidenceText(data)\r\n  \r\n  // 4. INSIGHTS TEXT\r\n  const insights = generateInsightsText(data)\r\n  \r\n  return {\r\n    headline,\r\n    bulletPoints,\r\n    confidence,\r\n    insights\r\n  }\r\n}\r\n\r\nfunction generateHeadline(\r\n  data: RecommendationData,\r\n  isDecrease: boolean,\r\n  absChangePct: number\r\n): string {\r\n  const direction = isDecrease ? 'Preissenkung' : 'Preiserhhung'\r\n  const reason = isDecrease \r\n    ? 'um wettbewerbsfhig zu bleiben'\r\n    : 'aufgrund gestiegener Nachfrage'\r\n  \r\n  return `Empfohlene ${direction} um ${absChangePct.toFixed(1)}%, ${reason}.`\r\n}\r\n\r\nfunction generateBulletPoints(data: RecommendationData): string[] {\r\n  const bullets: string[] = []\r\n  \r\n  // Competitor Context (hchste Prioritt)\r\n  if (data.competitor_context) {\r\n    const ctx = data.competitor_context\r\n    const positionText = getPositionText(ctx.position)\r\n    const diffText = ctx.price_diff_pct > 0 \r\n      ? `${ctx.price_diff_pct.toFixed(1)}% ber`\r\n      : `${Math.abs(ctx.price_diff_pct).toFixed(1)}% unter`\r\n    \r\n    bullets.push(\r\n      `Du liegst aktuell ${diffText} dem durchschnittlichen Marktpreis (${formatPrice(ctx.avg_price)}).`\r\n    )\r\n    \r\n    if (positionText !== 'unknown') {\r\n      bullets.push(\r\n        `Deine Position: ${positionText} (${ctx.competitor_count} Wettbewerber analysiert).`\r\n      )\r\n    }\r\n  }\r\n  \r\n  // Inventory Strategy\r\n  if (data.strategies?.inventory) {\r\n    const inv = data.strategies.inventory\r\n    if (inv.reasoning.includes('Normaler Bestand') || inv.reasoning.includes('normal')) {\r\n      const stockMatch = inv.reasoning.match(/\\((\\d+)\\)/)\r\n      const stock = stockMatch ? stockMatch[1] : ''\r\n      bullets.push(\r\n        `Dein Bestand ist normal${stock ? ` (${stock} Stck)` : ''}  es besteht kein akuter Abverkaufsdruck.`\r\n      )\r\n    } else if (inv.reasoning.includes('Hoher Bestand') || inv.reasoning.includes('hoch')) {\r\n      bullets.push(\r\n        'Dein Bestand ist hoch  eine Preissenkung knnte den Absatz ankurbeln.'\r\n      )\r\n    } else if (inv.reasoning.includes('Niedriger Bestand') || inv.reasoning.includes('niedrig')) {\r\n      bullets.push(\r\n        'Dein Bestand ist niedrig  du knntest den Preis erhhen, ohne Absatz zu verlieren.'\r\n      )\r\n    }\r\n  }\r\n  \r\n  // Cost/Margin Strategy\r\n  if (data.strategies?.cost) {\r\n    const cost = data.strategies.cost\r\n    const marginMatch = cost.reasoning.match(/(\\d+)%/i)\r\n    const targetMargin = marginMatch ? marginMatch[1] : '30'\r\n    \r\n    bullets.push(\r\n      `Die empfohlene Anpassung hlt deine Zielmarge von ca. ${targetMargin}% ein.`\r\n    )\r\n  }\r\n  \r\n  // Margin Analysis\r\n  if (data.margin) {\r\n    if (data.margin.is_safe && data.margin.margin_pct >= 20) {\r\n      bullets.push(\r\n        `Deine Marge bleibt mit ${data.margin.margin_pct.toFixed(1)}% auf einem gesunden Niveau.`\r\n      )\r\n    } else if (data.margin.margin_pct < 20) {\r\n      bullets.push(\r\n        `Achtung: Deine Marge liegt bei ${data.margin.margin_pct.toFixed(1)}%  unter dem empfohlenen Minimum von 20%.`\r\n      )\r\n    }\r\n  }\r\n  \r\n  // Demand Strategy (nur wenn relevant)\r\n  if (data.strategies?.demand) {\r\n    const demand = data.strategies.demand\r\n    if (demand.confidence > 0.6 && !demand.reasoning.includes('Zu wenig Daten')) {\r\n      if (demand.reasoning.includes('wachsend') || demand.reasoning.includes('steigend')) {\r\n        bullets.push(\r\n          'Die Nachfrage zeigt einen positiven Trend  eine moderate Preiserhhung knnte mglich sein.'\r\n        )\r\n      } else if (demand.reasoning.includes('rcklufig') || demand.reasoning.includes('sinkend')) {\r\n        bullets.push(\r\n          'Die Nachfrage ist rcklufig  eine Preissenkung knnte den Absatz stabilisieren.'\r\n        )\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Fallback: Mindestens 2 Bullets\r\n  if (bullets.length < 2) {\r\n    bullets.push(\r\n      'Die Empfehlung basiert auf einer Analyse deiner aktuellen Preislage und Marktvergleichen.'\r\n    )\r\n    bullets.push(\r\n      'Der empfohlene Preis optimiert deine Wettbewerbsposition bei gleichbleibender Profitabilitt.'\r\n    )\r\n  }\r\n  \r\n  return bullets.slice(0, 5) // Max. 5 Bullets\r\n}\r\n\r\nfunction generateConfidenceText(data: RecommendationData): string {\r\n  const confidencePct = (data.confidence * 100).toFixed(1)\r\n  const mlConfidence = data.ml_predictions?.combined_ml_confidence\r\n    ? (data.ml_predictions.combined_ml_confidence * 100).toFixed(1)\r\n    : null\r\n  \r\n  const parts: string[] = []\r\n  \r\n  if (data.confidence >= 0.8) {\r\n    parts.push('Hohe Sicherheit')\r\n  } else if (data.confidence >= 0.6) {\r\n    parts.push('Moderate Sicherheit')\r\n  } else {\r\n    parts.push('Eingeschrnkte Sicherheit')\r\n  }\r\n  \r\n  parts.push(`${confidencePct}%`)\r\n  \r\n  const factors: string[] = []\r\n  if (data.competitor_context) {\r\n    factors.push('Wettbewerbsvergleich')\r\n  }\r\n  if (data.strategies?.cost) {\r\n    factors.push('Kosten')\r\n  }\r\n  if (data.strategies?.inventory) {\r\n    factors.push('Bestand')\r\n  }\r\n  if (mlConfidence) {\r\n    factors.push('historische Daten')\r\n  }\r\n  \r\n  if (factors.length > 0) {\r\n    parts.push(`basierend auf ${factors.join(', ')}`)\r\n  }\r\n  \r\n  if (mlConfidence && parseFloat(mlConfidence) > 90) {\r\n    parts.push(`und ML-Vorhersage (${mlConfidence}%)`)\r\n  }\r\n  \r\n  return parts.join(': ') + '.'\r\n}\r\n\r\nfunction generateInsightsText(data: RecommendationData): string {\r\n  if (data.has_insights) {\r\n    const insights: string[] = []\r\n    \r\n    // Extreme Preisposition\r\n    if (data.competitor_context) {\r\n      if (data.competitor_context.position === 'most_expensive' && data.competitor_context.price_diff_pct > 30) {\r\n        insights.push(\r\n          `Du bist deutlich teurer als der Markt (${data.competitor_context.price_diff_pct.toFixed(1)}% ber Durchschnitt).`\r\n        )\r\n      } else if (data.competitor_context.position === 'cheapest' && Math.abs(data.competitor_context.price_diff_pct) > 20) {\r\n        insights.push(\r\n          `Du bist deutlich gnstiger als der Markt  eine moderate Preiserhhung knnte mglich sein.`\r\n        )\r\n      }\r\n    }\r\n    \r\n    // Margin-Warnung\r\n    if (data.margin && !data.margin.is_safe) {\r\n      insights.push(\r\n        `Achtung: Die empfohlene Preisnderung wrde deine Marge auf ${data.margin.margin_pct.toFixed(1)}% reduzieren.`\r\n      )\r\n    }\r\n    \r\n    return insights.join(' ') || 'Aktuell liegen keine besonderen Aufflligkeiten vor.'\r\n  }\r\n  \r\n  return 'Aktuell liegen keine besonderen Aufflligkeiten vor. Die Empfehlung basiert auf Standardmodellen und den aktuellen Marktpreisen.'\r\n}\r\n\r\nfunction getPositionText(position: string): string {\r\n  const map: Record<string, string> = {\r\n    'most_expensive': 'Teuerste Option',\r\n    'above_average': 'ber dem Durchschnitt',\r\n    'average': 'Marktdurchschnitt',\r\n    'below_average': 'Unter dem Durchschnitt',\r\n    'cheapest': 'Gnstigste Option',\r\n    'unknown': 'Unbekannt'\r\n  }\r\n  return map[position] || 'Unbekannt'\r\n}\r\n\r\nfunction formatPrice(price: number): string {\r\n  return new Intl.NumberFormat('de-DE', {\r\n    style: 'currency',\r\n    currency: 'EUR',\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 2\r\n  }).format(price)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","'use client'\n\nimport React, { useState, useEffect } from 'react'\nimport { AlertTriangle, Clock, ChevronDown, ChevronUp, RefreshCw, CheckCircle2, Lightbulb, Calculator } from 'lucide-react'\nimport { useTranslations } from 'next-intl'\nimport { ConfidenceIndicator } from './ConfidenceIndicator'\nimport { ActionButtons } from './ActionButtons'\nimport { PriceReasoningStory } from './PriceReasoningStory'\nimport { formatCurrency, formatPercentage, formatTimeAgo } from '@/lib/formatters'\nimport { generateRecommendationTexts } from '@/lib/recommendationTexts'\nimport { Recommendation } from '@/lib/types'\n\ninterface PriceRecommendationCardProps {\n  recommendation: Partial<Recommendation> & {\n    product_id: string | number\n    product_title?: string\n    product_name?: string\n    current_price: number\n    recommended_price: number\n    price_change?: number\n    price_change_pct: number\n    confidence: number\n    reasoning: string | object\n    \n    // Strategy details\n    strategy_details?: Array<{\n      strategy: string\n      recommended_price: number\n      confidence: number\n      reasoning: string\n      competitor_context?: any\n    }>\n    \n    // Margin analysis (optional)\n    margin_analysis?: {\n      is_safe: boolean\n      margin: number\n      warning: string | null\n      message: string\n      details: any\n    }\n    \n    // Competitor data\n    competitor_data?: {\n      avg: number\n      min: number\n      max: number\n      prices: Array<{\n        source: string\n        price: number\n        title?: string\n        url?: string\n      }>\n    }\n    \n    // Warnings\n    warnings?: Array<{\n      type: string\n      severity: string\n      message: string\n    }>\n    \n    // Metadata\n    created_at?: string\n    generated_at?: string\n    \n    // Confidence Basis (NEW)\n    confidence_basis?: {\n      ml_models?: number\n      competitor_count?: number\n      sales_30d?: number\n      margin_stable?: boolean\n      margin_pct?: number | null\n    }\n    \n    // SHAP Explanation (NEW)\n    shap_explanation?: Array<{\n      feature: string\n      impact: number\n      pct: number\n    }>\n    \n    // Competitor Count (NEW)\n    competitor_count?: number\n    \n    // NEW: Backend Fields\n    id?: number\n    status?: 'pending' | 'accepted' | 'rejected' | 'applied'\n    strategy?: string\n    ml_confidence?: number\n    base_confidence?: number\n    applied_at?: string | null\n    applied_price?: number | null\n  }\n  \n  onApply?: (price: number) => Promise<void>\n  onDismiss?: () => void\n  onRefresh?: () => Promise<void>\n}\n\nexport function PriceRecommendationCard({\n  recommendation,\n  onApply,\n  onDismiss,\n  onRefresh\n}: PriceRecommendationCardProps) {\n  const t = useTranslations('pricing')\n  const tCommon = useTranslations('common')\n  const tMarket = useTranslations('market')\n  \n  const [isApplying, setIsApplying] = useState(false)\n  const [isRefreshing, setIsRefreshing] = useState(false)\n  \n  // Calculate derived values\n  const displayedPrice = recommendation.recommended_price\n  const displayedPriceChange = displayedPrice - recommendation.current_price\n  const displayedPriceChangePct = (displayedPriceChange / recommendation.current_price) * 100\n  const priceChange = displayedPriceChange\n  const priceIncrease = priceChange > 0\n  const priceDecrease = priceChange < 0\n  const noChange = priceChange === 0\n  \n  const hasMarginWarning = recommendation.margin_analysis && !recommendation.margin_analysis.is_safe\n  const isCriticalWarning = recommendation.warnings?.some(w => w.severity === 'HIGH' || w.severity === 'high')\n  \n  //  FIX: Use overall_confidence from new confidence breakdown if available\n  // overall_confidence is 0-100, legacy confidence is 0-1\n  const rawConfidence = (recommendation as any).overall_confidence !== undefined\n    ? (recommendation as any).overall_confidence / 100.0  // Convert 0-100 to 0-1\n    : recommendation.confidence\n  \n  //  FIX: Ensure confidence is always valid (0-1 range) - like PriceReasoningStory.tsx\n  const validConfidence = Math.max(0, Math.min(1, rawConfidence ?? 0.5))\n  \n  // Generiere UI-Texte aus Recommendation-Daten\n  const recommendationTexts = generateRecommendationTexts({\n    product_title: recommendation.product_title || recommendation.product_name,\n    product_name: recommendation.product_name,\n    current_price: recommendation.current_price,\n    recommended_price: recommendation.recommended_price,\n    price_change_pct: recommendation.price_change_pct,\n    confidence: validConfidence,  // Use calculated validConfidence (from overall_confidence if available)\n    strategies: extractStrategies(recommendation),\n    competitor_context: extractCompetitorContext(recommendation),\n    ml_predictions: extractMLPredictions(recommendation),\n    margin: recommendation.margin_analysis ? {\n      is_safe: recommendation.margin_analysis.is_safe,\n      margin_pct: recommendation.margin_analysis.margin || 0\n    } : undefined,\n    has_insights: recommendation.warnings && recommendation.warnings.length > 0\n  })\n  \n  // Normalize reasoning (fr Fallback)\n  const reasoningText = recommendationTexts.confidence\n  \n  // Handle actions\n  const handleApply = async () => {\n    if (!onApply) return\n    setIsApplying(true)\n    try {\n      await onApply(displayedPrice) // Use displayedPrice (selected strategy)\n    } catch (error) {\n      console.error('Failed to apply price:', error)\n    } finally {\n      setIsApplying(false)\n    }\n  }\n  \n  const handleRefresh = async () => {\n    if (!onRefresh) return\n    setIsRefreshing(true)\n    try {\n      await onRefresh()\n    } catch (error) {\n      console.error('Failed to refresh:', error)\n    } finally {\n      setIsRefreshing(false)\n    }\n  }\n  \n  const productTitle = recommendation.product_title || recommendation.product_name || `Product ${recommendation.product_id}`\n  const timestamp = recommendation.generated_at || recommendation.created_at || new Date().toISOString()\n  \n  return (\n    <div className=\"shadow-lg border overflow-hidden\" style={{ backgroundColor: '#1e293b', borderColor: '#475569' }}>\n      \n      {/* Story-basierte Erklrung: Warum empfehlen wir X? */}\n      {recommendation.strategy_details && recommendation.strategy_details.length > 0 ? (\n        <PriceReasoningStory\n          recommendedPrice={displayedPrice}\n          currentPrice={recommendation.current_price}\n          strategyDetails={recommendation.strategy_details}\n          competitorData={recommendation.competitor_data}\n          productName={productTitle}\n          productId={recommendation.product_id}\n          confidence={recommendation.confidence}\n          onApply={onApply ? handleApply : undefined}\n          onDismiss={onDismiss}\n          onRefresh={onRefresh ? handleRefresh : undefined}\n          createdAt={timestamp}\n        />\n      ) : (\n        /* Fallback fr alte Struktur wenn keine strategy_details - MIT \"KI ist X% sicher\" Anzeige */\n        <div className=\"p-6 pb-4\" style={{ background: 'linear-gradient(to bottom right, #1e293b, #0f172a)' }}>\n          \n          {/* Header */}\n          <div className=\"flex items-start justify-between mb-4\">\n            <div className=\"flex-1\">\n              <h2 className=\"text-xl font-semibold mb-1\" style={{ color: '#f1f5f9' }}>\n                {productTitle}\n              </h2>\n              <p className=\"text-xs\" style={{ color: '#94a3b8' }}>\n                {t('product_id')}: {recommendation.product_id}\n              </p>\n            </div>\n          </div>\n          \n          {/* Headline */}\n          {recommendationTexts.headline && (\n            <div className=\"mb-6\">\n              <p className=\"text-base font-medium\" style={{ color: '#f1f5f9' }}>\n                {recommendationTexts.headline}\n              </p>\n            </div>\n          )}\n          \n          {/*  \"KI ist X% sicher\" Section (wie in PriceReasoningStory) */}\n          <div className=\"mb-6\" style={{ backgroundColor: '#0f172a', borderRadius: '12px', padding: '20px', border: '1px solid #334155' }}>\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div style={{ \n                width: '48px', \n                height: '48px', \n                borderRadius: '12px', \n                background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                boxShadow: '0 4px 12px rgba(16, 185, 129, 0.3)'\n              }}>\n                <CheckCircle2 className=\"h-6 w-6 text-white\" />\n              </div>\n              <h3 style={{ \n                fontSize: '20px', \n                fontWeight: '700', \n                color: '#f1f5f9',\n                margin: 0\n              }}>\n                Unsere KI ist {Math.round(validConfidence * 100)}% sicher\n              </h3>\n            </div>\n            \n            {/* Progress Bar */}\n            <div className=\"mb-4\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <span style={{ fontSize: '14px', fontWeight: '500', color: '#94a3b8' }}>Sicherheitswert</span>\n                <span style={{ fontSize: '18px', fontWeight: '600', color: '#10b981' }}>\n                  {Math.round(validConfidence * 100)}%\n                </span>\n              </div>\n              <div style={{ \n                width: '100%', \n                height: '8px', \n                backgroundColor: '#1e293b', \n                borderRadius: '4px',\n                overflow: 'hidden'\n              }}>\n                <div \n                  style={{ \n                    width: `${validConfidence * 100}%`,\n                    height: '100%',\n                    background: 'linear-gradient(90deg, #10b981 0%, #059669 100%)',\n                    borderRadius: '4px',\n                    transition: 'width 0.3s ease'\n                  }}\n                />\n              </div>\n            </div>\n            \n            {/* Reasoning Text */}\n            {reasoningText && (\n              <div style={{ \n                marginTop: '16px',\n                padding: '12px',\n                backgroundColor: '#1e293b',\n                borderRadius: '8px',\n                border: '1px solid #334155'\n              }}>\n                <p style={{ fontSize: '14px', color: '#cbd5e1', lineHeight: '1.6', margin: 0 }}>\n                  {typeof reasoningText === 'string' ? reasoningText : JSON.stringify(reasoningText)}\n                </p>\n              </div>\n            )}\n          </div>\n          \n          {/*  \"Wieso dieser Preis?\" Section */}\n          <div className=\"mb-6\" style={{ backgroundColor: '#0f172a', borderRadius: '12px', padding: '20px', border: '1px solid #334155' }}>\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div style={{ \n                width: '48px', \n                height: '48px', \n                borderRadius: '12px', \n                background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                boxShadow: '0 4px 12px rgba(59, 130, 246, 0.3)'\n              }}>\n                <Lightbulb className=\"h-6 w-6 text-white\" />\n              </div>\n              <h3 style={{ \n                fontSize: '20px', \n                fontWeight: '700', \n                color: '#f1f5f9',\n                margin: 0\n              }}>\n                 Warum empfehlen wir {formatCurrency(displayedPrice)}?\n              </h3>\n            </div>\n            \n            <p style={{ fontSize: '14px', color: '#cbd5e1', lineHeight: '1.6', marginBottom: '16px' }}>\n              {recommendationTexts.headline || recommendationTexts.confidence || 'Unsere KI hat mehrere Marktfaktoren analysiert, um diesen Preis zu empfehlen.'}\n            </p>\n            \n            {/* Was analysiert wurde */}\n            <div style={{ \n              marginTop: '16px',\n              padding: '12px',\n              backgroundColor: '#1e293b',\n              borderRadius: '8px',\n              border: '1px solid #334155'\n            }}>\n              <div style={{ fontSize: '12px', fontWeight: '600', color: '#94a3b8', marginBottom: '8px', textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n                 Was analysiert unsere KI?\n              </div>\n              <ul style={{ listStyle: 'none', padding: 0, margin: 0, display: 'flex', flexDirection: 'column', gap: '8px' }}>\n                <li style={{ fontSize: '13px', color: '#cbd5e1', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                  <CheckCircle2 className=\"h-4 w-4 text-green-400\" />\n                  <span>Echte Verkaufsdaten aus deinem Shopify-Shop</span>\n                </li>\n                <li style={{ fontSize: '13px', color: '#cbd5e1', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                  <CheckCircle2 className=\"h-4 w-4 text-green-400\" />\n                  <span>Aktuelle Preise deiner 5-10 wichtigsten Konkurrenten</span>\n                </li>\n                <li style={{ fontSize: '13px', color: '#cbd5e1', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                  <CheckCircle2 className=\"h-4 w-4 text-green-400\" />\n                  <span>4 spezialisierte Machine-Learning-Modelle</span>\n                </li>\n                <li style={{ fontSize: '13px', color: '#cbd5e1', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                  <CheckCircle2 className=\"h-4 w-4 text-green-400\" />\n                  <span>Deine eingetragenen Kosten und bisherigen Margen</span>\n                </li>\n              </ul>\n            </div>\n          </div>\n          \n          {/*  \"Wie ergibt sich der Preis?\" Section */}\n          <div className=\"mb-6\" style={{ backgroundColor: '#0f172a', borderRadius: '12px', padding: '20px', border: '1px solid #334155' }}>\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div style={{ \n                width: '48px', \n                height: '48px', \n                borderRadius: '12px', \n                background: 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                boxShadow: '0 4px 12px rgba(139, 92, 246, 0.3)'\n              }}>\n                <Calculator className=\"h-6 w-6 text-white\" />\n              </div>\n              <h3 style={{ \n                fontSize: '20px', \n                fontWeight: '700', \n                color: '#f1f5f9',\n                margin: 0\n              }}>\n                 Wie wird {priceChange > 0 ? '+' : ''}{formatCurrency(Math.abs(priceChange))} berechnet?\n              </h3>\n            </div>\n            \n            <p style={{ fontSize: '14px', color: '#cbd5e1', lineHeight: '1.6', marginBottom: '16px' }}>\n              Der empfohlene Preis basiert auf einer gewichteten Analyse mehrerer Faktoren. Jeder Faktor wird basierend auf seiner Datenqualitt unterschiedlich stark gewichtet.\n            </p>\n            \n            {/* Preisberechnung Details */}\n            <div style={{ \n              marginTop: '16px',\n              padding: '12px',\n              backgroundColor: '#1e293b',\n              borderRadius: '8px',\n              border: '1px solid #334155'\n            }}>\n              <div style={{ fontSize: '13px', color: '#cbd5e1', lineHeight: '1.6' }}>\n                <div style={{ marginBottom: '12px' }}>\n                  <strong style={{ color: '#f1f5f9' }}>Aktueller Preis:</strong> {formatCurrency(recommendation.current_price)}\n                </div>\n                <div style={{ marginBottom: '12px' }}>\n                  <strong style={{ color: '#f1f5f9' }}>Empfohlener Preis:</strong> {formatCurrency(displayedPrice)}\n                </div>\n                <div style={{ marginBottom: '12px' }}>\n                  <strong style={{ color: '#f1f5f9' }}>Preisnderung:</strong> \n                  <span style={{ color: priceChange > 0 ? '#10b981' : '#f59e0b', marginLeft: '8px' }}>\n                    {priceChange > 0 ? '+' : ''}{formatCurrency(priceChange)} ({priceChange > 0 ? '+' : ''}{Math.abs(displayedPriceChangePct).toFixed(1)}%)\n                  </span>\n                </div>\n                {recommendation.strategy && (\n                  <div style={{ marginTop: '12px', paddingTop: '12px', borderTop: '1px solid #334155' }}>\n                    <strong style={{ color: '#f1f5f9' }}>Hauptstrategie:</strong> {recommendation.strategy}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n          \n          {/* Price Comparison -  FIX: Gleiche Gre mit grid */}\n          <div className=\"grid grid-cols-2 gap-4 mb-4\">\n            \n            {/* Current Price */}\n            <div className=\"flex flex-col justify-between p-4 border rounded-lg\" style={{ \n              backgroundColor: '#0f172a', \n              borderColor: '#475569',\n              minHeight: '120px' //  Gleiche Hhe\n            }}>\n              <p className=\"text-xs uppercase tracking-wide mb-2 font-medium\" style={{ color: '#94a3b8' }}>\n                {t('current')}\n              </p>\n              <p className=\"text-3xl font-bold\" style={{ color: '#f1f5f9' }}>\n                {formatCurrency(recommendation.current_price)}\n              </p>\n            </div>\n            \n            {/* Recommended Price */}\n            <div className=\"flex flex-col justify-between p-4 border-2 rounded-lg\" style={{\n              backgroundColor: isCriticalWarning ? '#7f1d1d' : hasMarginWarning ? '#78350f' : '#064e3b',\n              borderColor: isCriticalWarning ? '#ef4444' : hasMarginWarning ? '#f59e0b' : '#10b981',\n              minHeight: '120px' //  Gleiche Hhe\n            }}>\n              <div className=\"flex items-center justify-between mb-2\">\n                <p className=\"text-xs uppercase tracking-wide font-medium\" style={{\n                  color: isCriticalWarning ? '#fca5a5' : hasMarginWarning ? '#fbbf24' : '#86efac'\n                }}>\n                  {t('recommended')}\n                </p>\n                <span className=\"px-2 py-0.5 rounded-full text-xs font-semibold\" style={{\n                  backgroundColor: isCriticalWarning ? 'rgba(252, 165, 165, 0.2)' : \n                                   hasMarginWarning ? 'rgba(251, 191, 36, 0.2)' : \n                                   'rgba(16, 185, 129, 0.2)',\n                  color: isCriticalWarning ? '#fca5a5' : hasMarginWarning ? '#fbbf24' : '#86efac'\n                }}>\n                   EMPFOHLEN\n                </span>\n              </div>\n              <p className=\"text-3xl font-bold\" style={{\n                color: isCriticalWarning ? '#fca5a5' : hasMarginWarning ? '#fbbf24' : '#86efac'\n              }}>\n                {formatCurrency(displayedPrice)}\n              </p>\n              {/* Price Change */}\n              <div className=\"mt-2 flex items-center gap-2\">\n                <span className=\"text-sm font-medium\" style={{\n                  color: priceChange > 0 ? '#10b981' : priceChange < 0 ? '#f59e0b' : '#94a3b8'\n                }}>\n                  {priceChange > 0 ? '' : priceChange < 0 ? '' : '='} {formatCurrency(Math.abs(priceChange))} \n                  ({priceChange > 0 ? '+' : ''}{Math.abs(displayedPriceChangePct).toFixed(1)}%)\n                </span>\n              </div>\n            </div>\n          </div>\n          \n          {/* Price Change Indicator */}\n          <div className=\"flex items-center justify-center mb-4\">\n            {noChange ? (\n              <div className=\"flex items-center gap-2 px-4 py-2 rounded-full\" style={{ backgroundColor: '#334155' }}>\n                <span className=\"font-medium\" style={{ color: '#94a3b8' }}>{t('no_change')}</span>\n              </div>\n            ) : (\n              <div className={`flex items-center gap-2 px-4 py-2 rounded-full ${\n                priceIncrease ? 'bg-blue-100' : 'bg-orange-100'\n              }`}>\n                <span className=\"text-2xl\">\n                  {priceIncrease ? '' : ''}\n                </span>\n                <span className={`text-lg font-bold ${\n                  priceIncrease ? 'text-blue-700' : 'text-orange-700'\n                }`}>\n                  {priceChange > 0 ? '+' : ''}\n                  {formatCurrency(priceChange)}\n                </span>\n                <span className={`text-lg font-semibold ${\n                  priceIncrease ? 'text-blue-600' : 'text-orange-600'\n                }`}>\n                  ({displayedPriceChangePct > 0 ? '+' : ''}\n                  {formatPercentage(displayedPriceChangePct)})\n                </span>\n              </div>\n            )}\n          </div>\n          \n          {/* Confidence Box */}\n          <div className=\"mt-6 px-6\">\n            <ConfidenceIndicator \n              confidence={validConfidence}\n              reasoning={recommendationTexts.confidence}\n              compact={false}\n              confidenceBasis={recommendation.confidence_basis}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Action Buttons - Fallback wenn keine strategy_details */}\n      {(!recommendation.strategy_details || recommendation.strategy_details.length === 0) && (onApply || onDismiss) && (\n        <ActionButtons\n          recommendedPrice={displayedPrice}\n          onApply={handleApply}\n          onDismiss={onDismiss || (() => {})}\n          isApplying={isApplying}\n          isDisabled={isCriticalWarning}\n          marginAnalysis={recommendation.margin_analysis}\n        />\n      )}\n      \n      {/* ==========================================\n          CRITICAL WARNINGS (if any)\n          ========================================== */}\n      \n      {isCriticalWarning && (\n        <div className=\"px-6 py-4 border-t\" style={{ backgroundColor: '#7f1d1d', borderColor: '#ef4444' }}>\n          <div className=\"flex items-start gap-3\">\n            <AlertTriangle className=\"w-6 h-6 flex-shrink-0 mt-0.5\" style={{ color: '#fca5a5' }} />\n            <div>\n              <h4 className=\"font-semibold mb-1\" style={{ color: '#f1f5f9' }}>{t('critical_warning')}</h4>\n              {recommendation.warnings?.filter(w => w.severity === 'HIGH' || w.severity === 'high').map((warning, idx) => (\n                <p key={idx} className=\"text-sm mb-2\" style={{ color: '#fca5a5' }}>\n                  {warning.message}\n                </p>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* ==========================================\n          FOOTER - Metadata\n          ========================================== */}\n      \n      <div className=\"px-6 py-3 border-t flex items-center justify-between\" style={{ backgroundColor: '#0f172a', borderColor: '#334155' }}>\n        <div className=\"flex items-center gap-2 text-sm\" style={{ color: '#94a3b8' }}>\n          <Clock className=\"w-4 h-4\" />\n          <span>\n            {formatTimeAgo(timestamp)}\n          </span>\n        </div>\n        \n        {onRefresh && (\n          <button\n            onClick={handleRefresh}\n            disabled={isRefreshing}\n            className=\"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-50 transition-colors disabled:opacity-50\"\n          >\n            <RefreshCw className={`w-4 h-4 ${isRefreshing ? 'animate-spin' : ''}`} />\n            <span>{tCommon('refresh')}</span>\n          </button>\n        )}\n      </div>\n      \n    </div>\n  )\n}\n\n// Helper-Funktionen zum Extrahieren der Datenstruktur\nfunction extractStrategies(recommendation: any) {\n  if (recommendation.strategy_details && Array.isArray(recommendation.strategy_details)) {\n    const strategies: any = {}\n    recommendation.strategy_details.forEach((detail: any) => {\n      strategies[detail.strategy] = {\n        price: detail.recommended_price,\n        confidence: detail.confidence,\n        strategy: detail.strategy,\n        reasoning: detail.reasoning || ''\n      }\n    })\n    return strategies\n  }\n  \n  // Fallback: Aus reasoning parsen\n  const reasoning = recommendation.reasoning\n  if (typeof reasoning === 'object' && reasoning?.strategies) {\n    return reasoning.strategies\n  }\n  \n  return undefined\n}\n\nfunction extractCompetitorContext(recommendation: any) {\n  if (recommendation.competitor_data) {\n    const data = recommendation.competitor_data\n    // Berechne Position basierend auf avg, min, max\n    const yourPrice = recommendation.recommended_price\n    let position = 'unknown'\n    \n    if (data.avg) {\n      if (yourPrice >= data.max * 0.95) {\n        position = 'most_expensive'\n      } else if (yourPrice <= data.min * 1.05) {\n        position = 'cheapest'\n      } else if (yourPrice > data.avg * 1.1) {\n        position = 'above_average'\n      } else if (yourPrice < data.avg * 0.9) {\n        position = 'below_average'\n      } else {\n        position = 'average'\n      }\n    }\n    \n    return {\n      position,\n      avg_price: data.avg || 0,\n      min_price: data.min || 0,\n      max_price: data.max || 0,\n      price_diff_pct: data.avg ? ((yourPrice - data.avg) / data.avg) * 100 : 0,\n      competitor_count: data.prices?.length || 0\n    }\n  }\n  \n  return undefined\n}\n\nfunction extractMLPredictions(recommendation: any) {\n  // Prfe ob ML-Daten in reasoning vorhanden sind\n  const reasoning = recommendation.reasoning\n  if (typeof reasoning === 'object' && reasoning?.ml_predictions) {\n    return reasoning.ml_predictions\n  }\n  \n  return undefined\n}\n\n\n\n\n\n\n","'use client'\r\n\r\nimport React from 'react'\r\n\r\ninterface EmptyAnalysisStateProps {\r\n  productId: string | number\r\n  competitorCount: number\r\n  salesDataDays: number\r\n  onRunAnalysis?: () => void\r\n}\r\n\r\nexport function EmptyAnalysisState({\r\n  productId,\r\n  competitorCount,\r\n  salesDataDays,\r\n  onRunAnalysis\r\n}: EmptyAnalysisStateProps) {\r\n  return (\r\n    <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-6\">\r\n      <h3 className=\"font-bold text-xl text-yellow-800 mb-2\">\r\n         Erstmalige Analyse fr Produkt #{productId}\r\n      </h3>\r\n      \r\n      {competitorCount === 0 && (\r\n        <div className=\"bg-white p-4 rounded-lg border-l-4 border-orange-400 mb-3\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <span className=\"text-2xl\"></span>\r\n            <div className=\"flex-1\">\r\n              <h4 className=\"font-semibold text-gray-900 mb-1\">Wettbewerbsanalyse luft...</h4>\r\n              <p className=\"text-sm text-gray-600 mb-2\">\r\n                Wir sammeln gerade Preisdaten von Wettbewerbern fr dieses Produkt.\r\n              </p>\r\n              {onRunAnalysis && (\r\n                <button \r\n                  onClick={onRunAnalysis}\r\n                  className=\"text-blue-600 underline hover:text-blue-800 text-sm font-medium mt-2\"\r\n                >\r\n                  Jetzt sofort analysieren \r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {salesDataDays < 7 && (\r\n        <div className=\"bg-white p-4 rounded-lg border-l-4 border-blue-400\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <span className=\"text-2xl\"></span>\r\n            <div className=\"flex-1\">\r\n              <h4 className=\"font-semibold text-gray-900 mb-1\">Verkaufsdaten werden gesammelt</h4>\r\n              <p className=\"text-sm text-gray-600\">\r\n                Aktuell: <span className=\"font-semibold\">{salesDataDays} Tage</span>. \r\n                Optimal: <span className=\"font-semibold text-green-600\">30+ Tage</span>\r\n              </p>\r\n              <p className=\"text-xs text-gray-500 mt-2\">\r\n                Mehr Verkaufsdaten fhren zu prziseren Preisempfehlungen.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {competitorCount > 0 && salesDataDays >= 7 && (\r\n        <div className=\"bg-green-50 p-4 rounded-lg border-l-4 border-green-400\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <span className=\"text-2xl\"></span>\r\n            <div className=\"flex-1\">\r\n              <h4 className=\"font-semibold text-gray-900 mb-1\">Datenbasis vorhanden</h4>\r\n              <p className=\"text-sm text-gray-600\">\r\n                Wir haben genug Daten fr eine erste Analyse. Die Empfehlung wird mit mehr Daten prziser.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport { toast } from 'sonner'\nimport { getLatestRecommendation, generateRecommendation } from '@/lib/api'\nimport { applyRecommendedPrice } from '@/lib/shopifyService'\nimport { PriceRecommendationCard } from './pricing/PriceRecommendationCard'\nimport { EmptyAnalysisState } from './EmptyAnalysisState'\nimport { useShop } from '@/hooks/useShop'\nimport { Recommendation } from '@/lib/types'\n\nimport { FeatureConfidence } from '@/lib/types/confidence'\n\ninterface RecommendationData extends Partial<Recommendation> {\n  id: number\n  product_id: number\n  product_name: string\n  current_price: number\n  recommended_price: number\n  price_change_pct: number\n  strategy: string\n  confidence: number  // Legacy: 0-1 range\n  overall_confidence?: number  // NEW: 0-100 range from confidence breakdown\n  reasoning: string | any\n  \n  // Metrics\n  demand_growth?: number | null\n  days_of_stock?: number | null\n  sales_7d?: number | null\n  competitor_avg_price?: number | null\n  \n  // Price Story (Explainable AI)\n  price_story?: {\n    steps: Array<{\n      step: number\n      title: string\n      explanation: string\n      impact: number\n      impact_pct: number\n      confidence: number\n      data_points: any\n      reasoning: string\n    }>\n    total_impact: number\n    total_impact_pct: number\n    base_price: number\n    recommended_price: number\n    confidence: number\n    summary: string\n  }\n  \n  created_at: string\n  applied_at?: string | null\n  status?: 'pending' | 'accepted' | 'rejected' | 'applied'\n  ml_confidence?: number\n  base_confidence?: number\n  applied_price?: number | null\n  \n  // Feature Confidence (NEW)\n  feature_confidence?: FeatureConfidence\n}\n\ninterface LatestRecommendationProps {\n  productId: number | string\n}\n\nexport default function LatestRecommendation({ productId }: LatestRecommendationProps) {\n  const [recommendation, setRecommendation] = useState<RecommendationData | null>(null)\n  const [loading, setLoading] = useState(false)\n  const [generating, setGenerating] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const { currentShop, isDemoMode } = useShop()\n\n  const loadLatestRecommendation = async () => {\n    if (!productId) return\n    \n    // Konvertiere productId zu number falls ntig\n    const productIdNum = typeof productId === 'string' ? parseInt(productId, 10) : productId\n    if (isNaN(productIdNum)) {\n      setError('Ungltige Produkt-ID')\n      return\n    }\n    \n    setLoading(true)\n    setError(null)\n    try {\n      console.log('[LatestRecommendation]  Generating FRESH recommendation for product:', productIdNum)\n      // ALWAYS generate fresh - never use cached!\n      const data = await generateRecommendation(productIdNum)\n      console.log('[LatestRecommendation]  Fresh recommendation generated:', data)\n      \n      // Response structure from POST /generate is different:\n      // { success: true, recommendation: {...} }\n      const rec = data.recommendation || data\n      \n      if (rec) {\n        console.log('[LatestRecommendation] Recommendation data:', rec)\n        \n        // Stelle sicher, dass alle erforderlichen Felder vorhanden sind\n        if (!rec.product_name) {\n          rec.product_name = data.product_name || rec.product?.title || rec.product_title || `Product ${rec.product_id}`\n        }\n        if (!rec.current_price && data.current_price) {\n          rec.current_price = data.current_price\n        }\n        \n        // Parse reasoning falls es ein JSON-String ist\n        let reasoningParsed = rec.reasoning\n        if (typeof rec.reasoning === 'string') {\n          try {\n            reasoningParsed = JSON.parse(rec.reasoning)\n          } catch {\n            // Nicht JSON, behalte als String\n            reasoningParsed = rec.reasoning\n          }\n        }\n        rec.reasoning = reasoningParsed\n        \n        //  NEW: Add feature_confidence from response\n        if (data.confidence) {\n          rec.feature_confidence = data.confidence\n          \n          //  Use overall_confidence from new confidence breakdown if available\n          // overall_confidence is 0-100, legacy confidence is 0-1\n          if (data.confidence.overall_confidence !== undefined) {\n            // Convert overall_confidence (0-100) to 0-1 range for backward compatibility\n            rec.confidence = data.confidence.overall_confidence / 100.0\n            rec.overall_confidence = data.confidence.overall_confidence\n            console.log(`[LatestRecommendation] Using overall_confidence: ${data.confidence.overall_confidence}%`)\n          }\n        }\n        \n        //  BEHALTE ALLE Backend-Fields:\n        // status, ml_confidence, base_confidence, applied_at, applied_price werden automatisch bernommen\n        // (keine selective extraction mehr!)\n        \n        console.log('[LatestRecommendation]  Setting fresh recommendation with all fields:', rec)\n        setRecommendation(rec)\n        \n        //  Toast Notification - use overall_confidence if available\n        const displayConfidence = rec.overall_confidence ?? (rec.confidence ? Math.round(rec.confidence * 100) : 0)\n        toast.success('Recommendation generiert! ', {\n          description: `Confidence: ${displayConfidence}% | Strategy: ${rec.strategy || 'N/A'}`\n        })\n      } else {\n        console.log('[LatestRecommendation] No recommendation in response')\n        setRecommendation(null)\n        toast.error('Keine Recommendation erhalten', {\n          description: 'Bitte versuche es erneut'\n        })\n      }\n    } catch (err: any) {\n      console.error('[LatestRecommendation] Error generating recommendation:', err)\n      console.error('[LatestRecommendation] Error details:', err.response || err.message)\n      setError(err.message || 'Fehler beim Generieren der Empfehlung')\n      setRecommendation(null)\n      \n      //  Toast Notification fr Fehler\n      toast.error('Fehler beim Generieren der Recommendation', {\n        description: err.message || 'Bitte versuche es erneut'\n      })\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleGenerate = async () => {\n    if (!productId) {\n      alert('Bitte whle eine Produkt-ID aus!')\n      return\n    }\n    \n    // Konvertiere productId zu number falls ntig\n    const productIdNum = typeof productId === 'string' ? parseInt(productId, 10) : productId\n    if (isNaN(productIdNum)) {\n      alert('Ungltige Produkt-ID')\n      return\n    }\n    \n    setGenerating(true)\n    setError(null)\n    try {\n      console.log('[LatestRecommendation]  Manual refresh requested')\n      // Reload generates fresh recommendation\n      await loadLatestRecommendation()\n      // Toast wird bereits in loadLatestRecommendation() angezeigt\n    } catch (err: any) {\n      console.error('[LatestRecommendation] Error generating recommendation:', err)\n      setError(err.message || 'Fehler beim Generieren der Empfehlung')\n      toast.error('Fehler beim Aktualisieren', {\n        description: err.message || 'Bitte versuche es erneut'\n      })\n    } finally {\n      setGenerating(false)\n    }\n  }\n\n  const handleApplyPrice = async (price: number) => {\n    if (!productId) {\n      alert('Bitte whle eine Produkt-ID aus!')\n      return\n    }\n    \n    // Demo Mode: Keine echte Shopify Integration\n    if (isDemoMode) {\n      alert('Demo Mode: Preis kann nicht auf Shopify angewendet werden.')\n      return\n    }\n    \n    if (!currentShop?.id) {\n      alert('Kein Shop ausgewhlt. Bitte whle einen Shop aus.')\n      return\n    }\n    \n    // Konvertiere productId zu number falls ntig\n    const productIdNum = typeof productId === 'string' ? parseInt(productId, 10) : productId\n    if (isNaN(productIdNum)) {\n      alert('Ungltige Produkt-ID')\n      return\n    }\n    \n    try {\n      console.log('[LatestRecommendation] Applying price:', { productIdNum, price, shopId: currentShop.id })\n      \n      const result = await applyRecommendedPrice({\n        product_id: productIdNum,\n        recommended_price: price\n      })\n      \n      console.log('[LatestRecommendation] Price applied successfully:', result)\n      \n      //  Toast Notification statt alert\n      toast.success('Preis erfolgreich angewendet! ', {\n        description: `Neuer Preis: ${result.new_price?.toFixed(2) || price.toFixed(2)}`\n      })\n      \n      // Reload Recommendation um aktualisierten Preis zu sehen\n      await loadLatestRecommendation()\n      \n    } catch (err: any) {\n      console.error('[LatestRecommendation] Error applying price:', err)\n      toast.error('Fehler beim Anwenden des Preises', {\n        description: err.message || 'Unbekannter Fehler'\n      })\n      throw err\n    }\n  }\n\n  useEffect(() => {\n    loadLatestRecommendation()\n  }, [productId])\n\n  if (loading || generating) {\n    return (\n      <div className=\"flex flex-col items-center justify-center py-12 space-y-4\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        <div className=\"text-gray-600 text-center\">\n          <p className=\"font-medium\">Analysiere aktuelle Marktdaten...</p>\n          <p className=\"text-sm text-gray-500 mt-1\">\n            Prfe Wettbewerber, analysiere 90 Tage Verkaufsdaten...\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n        <p className=\"text-red-700 text-sm\">{error}</p>\n        <button\n          onClick={loadLatestRecommendation}\n          className=\"mt-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm\"\n        >\n          Erneut versuchen\n        </button>\n      </div>\n    )\n  }\n\n  if (!recommendation) {\n    return (\n      <EmptyAnalysisState\n        productId={productId}\n        competitorCount={0}\n        salesDataDays={0}\n        onRunAnalysis={handleGenerate}\n      />\n    )\n  }\n\n  // Check for invalid confidence (empty state)\n  const hasInvalidConfidence = !recommendation.confidence || \n    recommendation.confidence === -Infinity || \n    recommendation.confidence < 0 ||\n    isNaN(recommendation.confidence)\n  \n  const competitorCount = recommendation.competitor_avg_price ? 1 : 0\n  const salesDataDays = recommendation.sales_7d ? 7 : 0\n\n  if (hasInvalidConfidence || (competitorCount === 0 && salesDataDays < 7)) {\n    return (\n      <EmptyAnalysisState\n        productId={productId}\n        competitorCount={competitorCount}\n        salesDataDays={salesDataDays}\n        onRunAnalysis={handleGenerate}\n      />\n    )\n  }\n\n  // Transform recommendation data to new format\n  const reasoning = recommendation.reasoning\n  const reasoningObj = typeof reasoning === 'object' && reasoning !== null ? reasoning : {}\n  const strategies = (reasoningObj as any).strategies || {}\n  \n  // Extract strategy_details array - prefer from API response, fallback to reasoning.strategies\n  let strategyDetails: any[] = []\n  \n  // First, try to get from API response (new format)\n  if ((recommendation as any).strategy_details && Array.isArray((recommendation as any).strategy_details)) {\n    strategyDetails = (recommendation as any).strategy_details\n  } else if ((recommendation as any).strategyDetails && Array.isArray((recommendation as any).strategyDetails)) {\n    strategyDetails = (recommendation as any).strategyDetails\n  } else {\n    // Fallback: Extract from strategies object (old format)\n    strategyDetails = Object.entries(strategies).map(([strategy, data]: [string, any]) => ({\n      strategy,\n      recommended_price: data?.price || data?.recommended_price || recommendation.recommended_price,\n      confidence: data?.confidence || 0.5,\n      reasoning: data?.reasoning || '',\n      competitor_context: data?.competitor_context || data?.competitive?.competitor_context\n    }))\n  }\n  \n  // Build competitor_data from available fields\n  const competitorContext = strategies.competitive?.competitor_context || strategies.competitive?.competitor_context\n  const competitorData = recommendation.competitor_avg_price ? {\n    avg: recommendation.competitor_avg_price,\n    min: competitorContext?.min_price || recommendation.competitor_avg_price * 0.9,\n    max: competitorContext?.max_price || recommendation.competitor_avg_price * 1.1,\n    prices: competitorContext?.sources?.map((source: string, idx: number) => ({\n      source,\n      price: recommendation.competitor_avg_price! * (0.9 + (idx * 0.05)) // Estimate\n    })) || []\n  } : undefined\n  \n  // Get confidence: prefer overall_confidence (0-100), fallback to legacy confidence (0-1)\n  const displayConfidence = recommendation.overall_confidence !== undefined\n    ? recommendation.overall_confidence / 100.0  // Convert 0-100 to 0-1\n    : recommendation.confidence\n  \n  const transformedRecommendation = {\n    product_id: recommendation.product_id,\n    product_name: recommendation.product_name,\n    current_price: recommendation.current_price,\n    recommended_price: recommendation.recommended_price,\n    price_change: recommendation.recommended_price - recommendation.current_price,\n    price_change_pct: recommendation.price_change_pct,\n    confidence: displayConfidence,  // Use overall_confidence if available\n    overall_confidence: recommendation.overall_confidence,  // Pass through for display\n    reasoning: typeof reasoning === 'string' ? reasoning : (reasoningObj as any).summary || JSON.stringify(reasoningObj),\n    strategy_details: strategyDetails.length > 0 ? strategyDetails : undefined,\n    competitor_data: competitorData,\n    created_at: recommendation.created_at,\n    generated_at: recommendation.created_at,\n    //  NEU: Alle Backend-Fields hinzufgen\n    id: recommendation.id,\n    status: recommendation.status,\n    strategy: recommendation.strategy,\n    ml_confidence: recommendation.ml_confidence,\n    base_confidence: recommendation.base_confidence,\n    applied_at: recommendation.applied_at,\n    applied_price: recommendation.applied_price\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <PriceRecommendationCard\n        recommendation={transformedRecommendation}\n        onRefresh={handleGenerate}\n        onDismiss={() => {}}\n        onApply={handleApplyPrice}\n      />\n    </div>\n  )\n}\n\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m21 21-4.34-4.34\", key: \"14j7rj\" }],\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }]\n];\nconst Search = createLucideIcon(\"search\", __iconNode);\n\nexport { __iconNode, Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"8\", cy: \"21\", r: \"1\", key: \"jimo8o\" }],\n  [\"circle\", { cx: \"19\", cy: \"21\", r: \"1\", key: \"13723u\" }],\n  [\n    \"path\",\n    {\n      d: \"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12\",\n      key: \"9zh506\"\n    }\n  ]\n];\nconst ShoppingCart = createLucideIcon(\"shopping-cart\", __iconNode);\n\nexport { __iconNode, ShoppingCart as default };\n//# sourceMappingURL=shopping-cart.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0\",\n      key: \"1r0f0z\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"10\", r: \"3\", key: \"ilqhr7\" }]\n];\nconst MapPin = createLucideIcon(\"map-pin\", __iconNode);\n\nexport { __iconNode, MapPin as default };\n//# sourceMappingURL=map-pin.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"path\", { d: \"M16 3.128a4 4 0 0 1 0 7.744\", key: \"16gr8j\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }]\n];\nconst Users = createLucideIcon(\"users\", __iconNode);\n\nexport { __iconNode, Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m21 16-4 4-4-4\", key: \"f6ql7i\" }],\n  [\"path\", { d: \"M17 20V4\", key: \"1ejh1v\" }],\n  [\"path\", { d: \"m3 8 4-4 4 4\", key: \"11wl7u\" }],\n  [\"path\", { d: \"M7 4v16\", key: \"1glfcx\" }]\n];\nconst ArrowUpDown = createLucideIcon(\"arrow-up-down\", __iconNode);\n\nexport { __iconNode, ArrowUpDown as default };\n//# sourceMappingURL=arrow-up-down.js.map\n","'use client'\n\nimport React, { useState, useEffect } from 'react'\nimport { searchCompetitors, CompetitorSearchResponse } from '@/lib/api'\nimport { formatCurrency } from '@/lib/formatters'\nimport {\n  ShoppingCart,\n  RefreshCw,\n  Search,\n  BarChart,\n  MapPin,\n  AlertTriangle,\n  Users,\n  DollarSign,\n  TrendingUp,\n  TrendingDown,\n  AlertCircle,\n  Flame,\n  CheckCircle2,\n  Lightbulb,\n  ArrowUpDown,\n  Info\n} from 'lucide-react'\n\ninterface CompetitorAnalysisProps {\n  productId: number\n  currentPrice: number\n}\n\n// Helper-Funktionen fr localStorage\nconst getStorageKey = (productId: number) => `competitor_analysis_${productId}`\n\nconst loadCachedData = (productId: number): CompetitorSearchResponse | null => {\n  if (typeof window === 'undefined') return null\n  \n  try {\n    const cached = localStorage.getItem(getStorageKey(productId))\n    if (cached) {\n      const data = JSON.parse(cached)\n      const cacheAge = Date.now() - (data.cached_at || 0)\n      const maxAge = 24 * 60 * 60 * 1000 // 24 Stunden\n      \n      if (cacheAge < maxAge) {\n        return data.data\n      } else {\n        localStorage.removeItem(getStorageKey(productId))\n      }\n    }\n  } catch (error) {\n    console.error('Fehler beim Laden aus Cache:', error)\n  }\n  return null\n}\n\nconst saveCachedData = (productId: number, data: CompetitorSearchResponse) => {\n  if (typeof window === 'undefined') return\n  \n  try {\n    localStorage.setItem(getStorageKey(productId), JSON.stringify({\n      data,\n      cached_at: Date.now()\n    }))\n  } catch (error) {\n    console.error('Fehler beim Speichern im Cache:', error)\n  }\n}\n\n// Helper: Bestimme Produktzustand\nconst getCondition = (competitor: any): 'new' | 'used' | 'refurbished' => {\n  const titleLower = (competitor.title || '').toLowerCase()\n  const sourceLower = (competitor.source || '').toLowerCase()\n  \n  if (\n    titleLower.includes('gebraucht') ||\n    titleLower.includes('used') ||\n    sourceLower.includes('kleinanzeigen') ||\n    sourceLower.includes('willhaben')\n  ) {\n    return 'used'\n  } else if (\n    titleLower.includes('refurbished') ||\n    titleLower.includes('generalberholt')\n  ) {\n    return 'refurbished'\n  }\n  return 'new'\n}\n\nexport function CompetitorAnalysis({ productId, currentPrice }: CompetitorAnalysisProps) {\n  const [loading, setLoading] = useState(false)\n  const [data, setData] = useState<CompetitorSearchResponse | null>(null)\n  const [error, setError] = useState<string | null>(null)\n  const [filter, setFilter] = useState<'all' | 'new' | 'used' | 'refurbished'>('all')\n  \n  // Lade gecachte Daten beim Mount\n  useEffect(() => {\n    const cachedData = loadCachedData(productId)\n    if (cachedData) {\n      setData(cachedData)\n    }\n  }, [productId])\n  \n  const handleSearch = async (forceRefresh = false) => {\n    setLoading(true)\n    setError(null)\n    \n    try {\n      const result = await searchCompetitors(productId, { \n        maxResults: 5,\n        forceRefresh \n      })\n      setData(result)\n      saveCachedData(productId, result)\n    } catch (err: any) {\n      console.error('[CompetitorAnalysis] Fehler beim Laden:', err)\n      \n      let errorMessage = 'Fehler beim Laden der Wettbewerber-Daten'\n      \n      if (err?.response?.status === 404) {\n        errorMessage = 'Produkt nicht gefunden. Prfe Shop-Auswahl und Produkt-ID.'\n      } else if (err?.response?.status === 429) {\n        errorMessage = 'API-Limit erreicht. Bitte spter erneut versuchen.'\n      } else if (err?.response?.status === 500) {\n        errorMessage = 'Server-Fehler. Bitte spter erneut versuchen oder Support kontaktieren.'\n      } else if (err?.message) {\n        errorMessage = err.message\n      }\n      \n      setError(errorMessage)\n    } finally {\n      setLoading(false)\n    }\n  }\n  \n  // Berechne Metriken aus Daten\n  const calculateMetrics = () => {\n    if (!data || !data.competitors || data.competitors.length === 0) {\n      return null\n    }\n\n    const prices = data.competitors.map(c => c.price)\n    const minPrice = Math.min(...prices)\n    const maxPrice = Math.max(...prices)\n    const avgPrice = prices.reduce((a, b) => a + b, 0) / prices.length\n    const priceSpread = maxPrice - minPrice\n    const yourPriceDiff = currentPrice - avgPrice\n    const percentAboveAvg = avgPrice > 0 ? ((currentPrice - avgPrice) / avgPrice) * 100 : 0\n\n    // Gruppiere nach Zustand\n    const newOffers = data.competitors.filter(c => getCondition(c) === 'new')\n    const usedOffers = data.competitors.filter(c => getCondition(c) === 'used')\n    const refurbishedOffers = data.competitors.filter(c => getCondition(c) === 'refurbished')\n\n    const newMin = newOffers.length > 0 ? Math.min(...newOffers.map(c => c.price)) : null\n    const newMax = newOffers.length > 0 ? Math.max(...newOffers.map(c => c.price)) : null\n    const usedMin = usedOffers.length > 0 ? Math.min(...usedOffers.map(c => c.price)) : null\n\n    return {\n      minPrice,\n      maxPrice,\n      avgPrice,\n      priceSpread,\n      yourPriceDiff,\n      percentAboveAvg,\n      competitorCount: data.competitors.length,\n      newCount: newOffers.length,\n      usedCount: usedOffers.length,\n      refurbishedCount: refurbishedOffers.length,\n      newMin,\n      newMax,\n      usedMin\n    }\n  }\n\n  const metrics = calculateMetrics()\n  \n  // Bestimme Datenqualitt\n  const getDataQuality = () => {\n    if (!metrics) return { label: 'Unbekannt', color: 'gray', explanation: '' }\n    \n    const hasHighSpread = metrics.priceSpread / metrics.avgPrice > 0.4\n    const hasFewCompetitors = metrics.competitorCount < 3\n    \n    if (hasHighSpread || hasFewCompetitors) {\n      return {\n        label: 'Eingeschrnkt zuverlssig',\n        color: 'orange',\n        explanation: hasHighSpread ? 'sehr hohe Preisstreuung' : 'zu wenig vergleichbare Angebote'\n      }\n    }\n    \n    return {\n      label: 'Zuverlssig',\n      color: 'green',\n      explanation: ''\n    }\n  }\n\n  const dataQuality = getDataQuality()\n  \n  // Berechne Position auf Scale (0-100%)\n  const getYourPricePosition = () => {\n    if (!metrics) return 100\n    const range = metrics.maxPrice - metrics.minPrice\n    if (range === 0) return 100\n    const position = ((currentPrice - metrics.minPrice) / range) * 100\n    return Math.min(100, Math.max(0, position))\n  }\n\n  // Filtere und sortiere Competitors\n  const filteredCompetitors = data?.competitors ? data.competitors.filter(comp => {\n    if (filter === 'all') return true\n    return getCondition(comp) === filter\n  }).sort((a, b) => a.price - b.price) : []\n\n  // Zhle nach Zustand\n  const newCount = data?.competitors ? data.competitors.filter(c => getCondition(c) === 'new').length : 0\n  const refurbishedCount = data?.competitors ? data.competitors.filter(c => getCondition(c) === 'refurbished').length : 0\n\n  // Loading State\n  if (loading) {\n    return (\n      <div className=\"competitor-content\">\n        <div className=\"text-center py-12\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Suche Wettbewerber-Preise...</p>\n        </div>\n      </div>\n    )\n  }\n\n  // Error State\n  if (error) {\n    return (\n      <div className=\"competitor-content\">\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700\">\n          <p className=\"text-sm font-medium mb-1\"> Fehler</p>\n          <p className=\"text-sm\">{error}</p>\n        </div>\n      </div>\n    )\n  }\n\n  // Initial State\n  if (!data) {\n    return (\n      <div className=\"competitor-content\">\n        <div className=\"text-center py-12 text-gray-500\">\n          <p className=\"mb-2\">Noch keine Wettbewerber-Daten geladen.</p>\n          <button\n            onClick={() => handleSearch(false)}\n            className=\"btn-search\"\n          >\n            <Search className=\"h-4 w-4\" />\n            Wettbewerber suchen\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  // Results\n  if (!metrics) {\n    return (\n      <div className=\"competitor-content\">\n        <div className=\"text-center py-8 text-gray-500\">\n          <p>Keine Wettbewerber-Daten verfgbar.</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"competitor-content\">\n      \n      {/* Header with Actions */}\n      <div className=\"competitor-header\">\n        <div className=\"competitor-title-row\">\n          <div className=\"competitor-icon-main\">\n            <ShoppingCart className=\"h-7 w-7 text-white\" />\n          </div>\n          <h3 className=\"competitor-title\">Wettbewerbsanalyse</h3>\n        </div>\n        \n        <div className=\"competitor-actions\">\n          {data && (\n            <button \n              className=\"btn-refresh\"\n              onClick={() => handleSearch(true)}\n              disabled={loading}\n            >\n              <RefreshCw className=\"h-4 w-4\" />\n              Aktualisieren\n            </button>\n          )}\n          <button\n            className=\"btn-search\"\n            onClick={() => handleSearch(false)}\n            disabled={loading}\n          >\n            <Search className=\"h-4 w-4\" />\n            Erneut suchen\n          </button>\n        </div>\n      </div>\n\n      {/* Price Position Visualization - HERO */}\n      <div className=\"price-position-hero\">\n        <div className=\"price-position-header\">\n          <div className=\"price-position-icon\">\n            <BarChart className=\"h-6 w-6 text-green-600\" />\n          </div>\n          <h4 className=\"price-position-title\">\n             Deine Marktposition auf einen Blick\n          </h4>\n        </div>\n        \n        {/* Price Scale */}\n        <div className=\"price-scale-container\">\n          {/* Labels */}\n          <div className=\"price-scale-labels\">\n            <div className=\"price-scale-label cheapest\">\n              <div className=\"price-scale-label-icon\"></div>\n              <div className=\"price-scale-label-text\">Gnstigster</div>\n              <div className=\"price-scale-value\">{formatCurrency(metrics.minPrice)}</div>\n            </div>\n            \n            <div className=\"price-scale-label average\">\n              <div className=\"price-scale-label-icon\"></div>\n              <div className=\"price-scale-label-text\">-Preis</div>\n              <div className=\"price-scale-value\">{formatCurrency(metrics.avgPrice)}</div>\n            </div>\n            \n            <div className=\"price-scale-label expensive\">\n              <div className=\"price-scale-label-icon\"></div>\n              <div className=\"price-scale-label-text\">Teuerster</div>\n              <div className=\"price-scale-value\">{formatCurrency(metrics.maxPrice)}</div>\n            </div>\n          </div>\n          \n          {/* Gradient Bar with Marker */}\n          <div className=\"price-scale-bar\">\n            {/* Your Price Marker */}\n            <div className=\"your-price-marker\" style={{ left: `${getYourPricePosition()}%` }}>\n              <div className=\"price-marker-pin\">\n                <MapPin className=\"price-marker-icon\" />\n              </div>\n              <div className=\"price-marker-label\">\n                DU\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        {/* Warning Box */}\n        {metrics.percentAboveAvg > 50 && (\n          <div className=\"price-position-warning\">\n            <AlertTriangle className=\"warning-icon\" />\n            <div className=\"warning-content\">\n              <h4> Du bist {metrics.percentAboveAvg.toFixed(1)}% teurer als der Durchschnitt</h4>\n              <p>\n                Kunden werden wahrscheinlich zur Konkurrenz wechseln.\n              </p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Market Stats Grid */}\n      <div className=\"market-stats-grid\">\n        {/* Gefundene Anbieter */}\n        <div className=\"group relative overflow-hidden rounded-xl bg-slate-800/80 border border-slate-700/50 p-6 hover:border-blue-500/50 transition-all\">\n          <div className=\"flex items-center gap-3 mb-3\">\n            <div className=\"w-10 h-10 rounded-lg bg-blue-500/10 border border-blue-500/20 flex items-center justify-center\">\n              <Users className=\"w-5 h-5 text-blue-400\" />\n            </div>\n            <span className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider\">\n              Gefundene Anbieter\n            </span>\n          </div>\n          <span className=\"text-3xl font-bold text-white\">{metrics.competitorCount}</span>\n        </div>\n        \n        {/* Durchschnittspreis */}\n        <div className=\"group relative overflow-hidden rounded-xl bg-slate-800/80 border border-slate-700/50 p-6 hover:border-green-500/50 transition-all\">\n          <div className=\"flex items-center gap-3 mb-3\">\n            <div className=\"w-10 h-10 rounded-lg bg-green-500/10 border border-green-500/20 flex items-center justify-center\">\n              <TrendingUp className=\"w-5 h-5 text-green-400\" />\n            </div>\n            <span className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider\">\n              Durchschnittspreis\n            </span>\n          </div>\n          <span className=\"text-3xl font-bold text-white\">{formatCurrency(metrics.avgPrice)}</span>\n        </div>\n        \n        {/* Preisspanne */}\n        <div className=\"group relative overflow-hidden rounded-xl bg-slate-800/80 border border-slate-700/50 p-6 hover:border-purple-500/50 transition-all\">\n          <div className=\"flex items-center gap-3 mb-3\">\n            <div className=\"w-10 h-10 rounded-lg bg-purple-500/10 border border-purple-500/20 flex items-center justify-center\">\n              <ArrowUpDown className=\"w-5 h-5 text-purple-400\" />\n            </div>\n            <span className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider\">\n              Preisspanne\n            </span>\n          </div>\n          <span className=\"text-3xl font-bold text-white\">{formatCurrency(metrics.priceSpread)}</span>\n        </div>\n        \n        {/* Abweichung vom Durchschnitt */}\n        <div className=\"group relative overflow-hidden rounded-xl bg-slate-800/80 border border-slate-700/50 p-6 hover:border-orange-500/50 transition-all\">\n          <div className=\"flex items-center gap-3 mb-3\">\n            <div className=\"w-10 h-10 rounded-lg bg-orange-500/10 border border-orange-500/20 flex items-center justify-center\">\n              <AlertCircle className=\"w-5 h-5 text-orange-400\" />\n            </div>\n            <span className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider\">\n              Abweichung\n            </span>\n          </div>\n          <div className=\"flex items-baseline gap-2\">\n            <span className=\"text-3xl font-bold text-orange-400\">+{formatCurrency(metrics.yourPriceDiff)}</span>\n            <span className=\"text-sm text-slate-400\">teurer</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Product Status */}\n      {metrics.newCount > 0 && (\n        <div className=\"product-status-box\">\n          <div className=\"status-row\">\n            <span className=\"status-label\"> Produktzustand:</span>\n            <span className=\"status-value\">\n              Neuware: {metrics.newCount} Anbieter bieten von{' '}\n              {metrics.newMin && formatCurrency(metrics.newMin)} - {metrics.newMax && formatCurrency(metrics.newMax)}\n            </span>\n          </div>\n        </div>\n      )}\n\n      {/* Competitors List Header */}\n      <div className=\"competitors-section-header\">\n        <div className=\"competitors-section-title\">\n          <div className=\"competitors-section-icon\">\n            <Flame className=\"h-4 w-4 text-white\" />\n          </div>\n          <span> {metrics.competitorCount} Wettbewerber im Vergleich</span>\n        </div>\n        \n        {/* Filter Tabs */}\n        <div className=\"filter-tabs\">\n          <button \n            className={`filter-tab ${filter === 'all' ? 'active' : ''}`}\n            onClick={() => setFilter('all')}\n          >\n            Alle\n          </button>\n          {newCount > 0 && (\n            <button \n              className={`filter-tab ${filter === 'new' ? 'active' : ''}`}\n              onClick={() => setFilter('new')}\n            >\n              Nur Neuware ({newCount})\n            </button>\n          )}\n          {refurbishedCount > 0 && (\n            <button \n              className={`filter-tab ${filter === 'refurbished' ? 'active' : ''}`}\n              onClick={() => setFilter('refurbished')}\n            >\n              Nur Refurbished ({refurbishedCount})\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Competitors Cards */}\n      <div className=\"competitors-list\">\n        {filteredCompetitors.map((competitor, idx) => {\n          const condition = getCondition(competitor)\n          const priceDiff = currentPrice - competitor.price\n          const priceDiffPct = competitor.price > 0 ? (priceDiff / competitor.price) * 100 : 0\n          const isCheapest = idx === 0\n          const isExpensive = idx === filteredCompetitors.length - 1\n          \n          // Avatar basierend auf Position\n          let avatarClass = 'avatar-gray'\n          let avatarEmoji = ''\n          if (isCheapest) {\n            avatarClass = 'avatar-gray'\n            avatarEmoji = ''\n          } else if (isExpensive) {\n            avatarClass = 'avatar-gray'\n            avatarEmoji = ''\n          } else {\n            avatarClass = 'avatar-gold'\n            avatarEmoji = ''\n          }\n          \n          return (\n            <div key={idx} className=\"competitor-card group relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-slate-700/50 backdrop-blur-sm p-6 hover:border-slate-600/50 hover:shadow-xl hover:shadow-blue-500/10 transition-all duration-300\">\n              {/* Glow Effect */}\n              <div className={`absolute -top-20 -right-20 w-40 h-40 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 ${\n                isCheapest ? 'bg-green-500/5' : isExpensive ? 'bg-red-500/5' : 'bg-blue-500/5'\n              }`} />\n              \n              {/* Rank Badge - Prominenter */}\n              <div className=\"absolute top-4 left-4 flex items-center gap-2\">\n                <div className={`w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg shadow-lg ${\n                  isCheapest \n                    ? 'bg-green-500/20 border-2 border-green-500/50 text-green-400' \n                    : isExpensive \n                    ? 'bg-red-500/20 border-2 border-red-500/50 text-red-400'\n                    : 'bg-blue-500/20 border-2 border-blue-500/50 text-blue-400'\n                }`}>\n                  #{idx + 1}\n                </div>\n                {isExpensive && (\n                  <span className=\"px-2 py-0.5 rounded-md bg-red-500/20 border border-red-500/30 text-xs font-semibold text-red-400\">\n                    Teuerster\n                  </span>\n                )}\n              </div>\n              \n              {/* Card Content */}\n              <div className=\"pl-16\">\n                {/* Competitor Info */}\n                <div className=\"flex items-center gap-4 mb-4\">\n                  <div className={`w-14 h-14 rounded-xl flex items-center justify-center text-2xl shadow-md ${\n                    isCheapest \n                      ? 'bg-green-500/20 border border-green-500/30' \n                      : isExpensive \n                      ? 'bg-red-500/20 border border-red-500/30'\n                      : 'bg-blue-500/20 border border-blue-500/30'\n                  }`}>\n                    {avatarEmoji}\n                  </div>\n                  \n                  <div className=\"flex-1\">\n                    <p className=\"text-lg font-bold text-white mb-1\">\n                      {competitor.source || 'Unbekannt'}\n                    </p>\n                    <p className=\"text-sm text-slate-400 line-clamp-2 mb-2\">\n                      {competitor.title || 'Kein Titel verfgbar'}\n                    </p>\n                    <div className=\"competitor-badges\">\n                      {competitor.rating && (\n                        <span className=\"competitor-badge badge-rating\">\n                           {competitor.rating.toFixed(1)} Sterne\n                        </span>\n                      )}\n                      {condition === 'new' && (\n                        <span className=\"competitor-badge badge-new\">\n                          Neuware\n                        </span>\n                      )}\n                      {condition === 'refurbished' && (\n                        <span className=\"competitor-badge badge-refurbished\">\n                          Refurbished\n                        </span>\n                      )}\n                      {condition === 'used' && (\n                        <span className=\"competitor-badge badge-condition\">\n                          Gebraucht\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                  \n                  {/* Price - Prominenter */}\n                  <div className=\"text-right\">\n                    <p className=\"text-3xl font-bold text-white mb-1\">\n                      {formatCurrency(competitor.price)}\n                    </p>\n                    <div className={`inline-flex items-center gap-1.5 px-3 py-1 rounded-lg ${\n                      priceDiff < 0\n                        ? 'bg-green-500/10 border border-green-500/20'\n                        : 'bg-red-500/10 border border-red-500/20'\n                    }`}>\n                      {priceDiff < 0 ? (\n                        <TrendingDown className=\"w-3.5 h-3.5 text-green-400\" />\n                      ) : (\n                        <TrendingUp className=\"w-3.5 h-3.5 text-red-400\" />\n                      )}\n                      <span className={`text-xs font-bold ${\n                        priceDiff < 0 ? 'text-green-400' : 'text-red-400'\n                      }`}>\n                        {priceDiff < 0 ? '' : '+'}{formatCurrency(Math.abs(priceDiff))}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )\n        })}\n      </div>\n\n      {/* Data Quality Footer */}\n      <div className=\"rounded-xl bg-slate-800/50 border border-slate-700/50 p-6\">\n        {/* Header */}\n        <div className=\"flex items-center gap-3 mb-4\">\n          <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${\n            dataQuality.label === 'Eingeschrnkt zuverlssig' \n              ? 'bg-yellow-500/10 border border-yellow-500/20' \n              : 'bg-green-500/10 border border-green-500/20'\n          }`}>\n            {dataQuality.label === 'Eingeschrnkt zuverlssig' ? (\n              <AlertCircle className=\"w-5 h-5 text-yellow-400\" />\n            ) : (\n              <CheckCircle2 className=\"w-5 h-5 text-green-400\" />\n            )}\n          </div>\n          <div>\n            <h3 className=\"text-lg font-bold text-white\">Datenqualitt & Aktualitt</h3>\n            <p className=\"text-sm text-slate-400\">\n              {dataQuality.label === 'Eingeschrnkt zuverlssig' ? ' Eingeschrnkt zuverlssig' : ' Zuverlssig'} - Heute aktualisiert\n            </p>\n          </div>\n        </div>\n        \n        {/* Quality Score Badge */}\n        <div className={`inline-flex items-center gap-2 px-4 py-2 rounded-lg mb-4 ${\n          dataQuality.label === 'Eingeschrnkt zuverlssig'\n            ? 'bg-yellow-500/10 border border-yellow-500/20'\n            : 'bg-green-500/10 border border-green-500/20'\n        }`}>\n          <div className=\"flex items-center gap-1\">\n            {dataQuality.label === 'Eingeschrnkt zuverlssig' ? (\n              <>\n                <div className=\"w-2 h-2 rounded-full bg-yellow-400\" />\n                <div className=\"w-2 h-2 rounded-full bg-yellow-400\" />\n                <div className=\"w-2 h-2 rounded-full bg-slate-600\" />\n              </>\n            ) : (\n              <>\n                <div className=\"w-2 h-2 rounded-full bg-green-400\" />\n                <div className=\"w-2 h-2 rounded-full bg-green-400\" />\n                <div className=\"w-2 h-2 rounded-full bg-green-400\" />\n              </>\n            )}\n          </div>\n          <span className={`text-sm font-bold ${\n            dataQuality.label === 'Eingeschrnkt zuverlssig' ? 'text-yellow-400' : 'text-green-400'\n          }`}>\n            Qualitt: {dataQuality.label === 'Eingeschrnkt zuverlssig' ? 'Mittel' : 'Hoch'}\n          </span>\n        </div>\n        \n        {/* Strukturierte Liste */}\n        <div className=\"space-y-3 mb-4\">\n          <div className=\"flex items-start gap-3\">\n            <Info className=\"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0\" />\n            <p className=\"text-sm text-slate-300\">\n              Die Produkte knnten unterschiedliche Varianten sein\n            </p>\n          </div>\n          \n          <div className=\"flex items-start gap-3\">\n            <Info className=\"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0\" />\n            <p className=\"text-sm text-slate-300\">\n              Einige Angebote knnten nicht mehr verfgbar sein\n            </p>\n          </div>\n          \n          <div className=\"flex items-start gap-3\">\n            <Info className=\"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0\" />\n            <p className=\"text-sm text-slate-300\">\n              Preise knnen sich schnell ndern\n            </p>\n          </div>\n        </div>\n        \n        {/* Was das bedeutet */}\n        <div className=\"px-4 py-3 rounded-lg bg-slate-900/50 border border-slate-700/30 mb-4\">\n          <p className=\"text-sm text-slate-400\">\n            <span className=\"font-semibold text-slate-300\">Das bedeutet:</span> {dataQuality.explanation \n              ? `Die Preise zeigen ${dataQuality.explanation}. Sie geben einen guten berblick, sollten aber vor finalen Entscheidungen verifiziert werden.`\n              : 'Die Preise geben einen guten berblick und knnen fr Preisentscheidungen verwendet werden.'}\n          </p>\n        </div>\n        \n        {/* CTA Button */}\n        <button \n          onClick={() => handleSearch(true)}\n          disabled={loading}\n          className=\"w-full px-4 py-3 rounded-lg bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600/50 disabled:cursor-not-allowed text-white font-semibold text-sm flex items-center justify-center gap-2 transition-colors\"\n        >\n          <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\n          <span>Daten jetzt aktualisieren</span>\n        </button>\n      </div>\n\n    </div>\n  )\n}\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M13 21h8\", key: \"1jsn5i\" }],\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ]\n];\nconst PenLine = createLucideIcon(\"pen-line\", __iconNode);\n\nexport { __iconNode, PenLine as default };\n//# sourceMappingURL=pen-line.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"6\", key: \"1vlfrh\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"2\", key: \"1c9p78\" }]\n];\nconst Target = createLucideIcon(\"target\", __iconNode);\n\nexport { __iconNode, Target as default };\n//# sourceMappingURL=target.js.map\n","'use client'\n\nimport React from 'react'\nimport { TrendingUp, TrendingDown, AlertTriangle, CheckCircle, CheckCircle2, DollarSign, Edit2, Edit3, Target, ShoppingCart, Calendar, LineChart, Zap, ArrowUpRight } from 'lucide-react'\nimport '@/app/styles/recommendations.css'\n\ninterface MarginDisplayProps {\n  marginData: {\n    has_cost_data: boolean\n    selling_price?: number\n    net_revenue?: number\n    costs?: {\n      purchase: number\n      shipping: number\n      packaging: number\n      payment_fee: number\n      total_variable: number\n    }\n    margin?: {\n      euro: number\n      percent: number\n    }\n    break_even_price?: number\n    recommended_min_price?: number\n    is_above_break_even?: boolean\n    is_above_min_margin?: boolean\n    vat_rate?: number\n    country_code?: string\n    payment_provider?: string\n  }\n  compact?: boolean\n  onAddCosts?: () => void\n  onEditCosts?: () => void\n}\n\nexport function MarginDisplay({ marginData, compact = false, onAddCosts, onEditCosts }: MarginDisplayProps) {\n  \n  if (!marginData.has_cost_data) {\n    return (\n      <div className=\"border p-4\" style={{ backgroundColor: '#1e293b', borderColor: '#475569' }}>\n        <div className=\"flex items-start gap-3\">\n          <div className=\"flex-shrink-0 w-8 h-8 flex items-center justify-center\" style={{ backgroundColor: '#334155' }}>\n            <span className=\"text-lg\"></span>\n          </div>\n          <div className=\"flex-1\">\n            <h3 className=\"text-sm font-semibold mb-1\" style={{ color: '#f1f5f9' }}>\n              Noch prziser mit Kostendaten\n            </h3>\n            <p className=\"text-xs mb-3\" style={{ color: '#cbd5e1' }}>\n              Die Preisempfehlung funktioniert auch ohne Kosten. \n              <strong> Mit Kostendaten</strong> knnen wir zustzlich deine <strong>Marge optimieren</strong> und \n              sicherstellen, dass du immer profitabel bleibst.\n            </p>\n            {onAddCosts && (\n              <button \n                onClick={onAddCosts}\n                className=\"text-xs font-medium transition\" style={{ color: '#60a5fa', textDecoration: 'none' }}\n              >\n                Kosten hinterlegen (optional)\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    )\n  }\n  \n  const marginColor = marginData.is_above_min_margin \n    ? 'text-green-600' \n    : marginData.is_above_break_even \n    ? 'text-orange-600' \n    : 'text-red-600'\n  \n  const marginBgColor = marginData.is_above_min_margin \n    ? { backgroundColor: '#064e3b', borderColor: '#10b981' }\n    : marginData.is_above_break_even \n    ? { backgroundColor: '#78350f', borderColor: '#f59e0b' }\n    : { backgroundColor: '#7f1d1d', borderColor: '#ef4444' }\n  \n  const marginIcon = marginData.is_above_min_margin \n    ? <CheckCircle className=\"w-5 h-5 text-green-600\" />\n    : marginData.is_above_break_even \n    ? <AlertTriangle className=\"w-5 h-5 text-orange-600\" />\n    : <TrendingDown className=\"w-5 h-5 text-red-600\" />\n  \n  // Compact version (for inline use)\n  if (compact) {\n    return (\n      <div className=\"inline-flex items-center gap-2 px-3 py-1.5 border-2\" style={marginBgColor}>\n        {marginIcon}\n        <span className={`font-semibold ${marginColor}`}>\n          {marginData.margin?.percent.toFixed(1)}% Marge\n        </span>\n        <span className=\"text-sm\" style={{ color: '#94a3b8' }}>\n          ({marginData.margin?.euro.toFixed(2)})\n        </span>\n      </div>\n    )\n  }\n  \n  // Full version\n  return (\n    <div className=\"margin-content\">\n      \n      {/* Header with Success Badge */}\n      <div className=\"margin-header\">\n        <h3 className=\"margin-title\">\n          <DollarSign className=\"margin-title-icon\" />\n          Margin-Analyse\n        </h3>\n        \n        <div className=\"flex items-center gap-3\">\n          {marginData.margin && (\n            <div className=\"margin-success-badge\">\n              <CheckCircle2 className=\"h-6 w-6\" style={{ color: '#a7f3d0' }} />\n              <span className=\"margin-success-percentage\">\n                {marginData.margin.percent.toFixed(1)}%\n              </span>\n            </div>\n          )}\n          \n          {/* Edit Button */}\n          {marginData.has_cost_data && onEditCosts && (\n            <button\n              onClick={onEditCosts}\n              className=\"margin-edit-button\"\n              title=\"Kosten bearbeiten\"\n              aria-label=\"Kostendaten bearbeiten\"\n            >\n              <Edit3 className=\"h-4 w-4\" />\n              Bearbeiten\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Premium Price Grid with Icons & Gradients */}\n      <div className=\"price-grid\">\n        {/* Verkaufspreis Card */}\n        <div className=\"group relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-slate-700/50 backdrop-blur-sm p-6 hover:border-slate-600/50 hover:shadow-xl hover:shadow-purple-500/10 transition-all duration-300\">\n          {/* Glow Effect */}\n          <div className=\"absolute -top-20 -right-20 w-40 h-40 bg-purple-500/5 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\n          \n          <div className=\"relative z-10\">\n            {/* Icon */}\n            <div className=\"inline-flex items-center justify-center w-12 h-12 rounded-xl bg-purple-500/10 border border-purple-500/20 mb-4\">\n              <DollarSign className=\"w-6 h-6 text-purple-400\" />\n            </div>\n            \n            {/* Label */}\n            <div className=\"price-box-label\">Verkaufspreis</div>\n            \n            {/* Value */}\n            <div className=\"price-box-value\">\n              {marginData.selling_price?.toFixed(2) || '0.00'}\n            </div>\n          </div>\n        </div>\n        \n        {/* Nettoerls Card */}\n        <div className=\"group relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-slate-700/50 backdrop-blur-sm p-6 hover:border-slate-600/50 hover:shadow-xl hover:shadow-blue-500/10 transition-all duration-300\">\n          {/* Glow Effect */}\n          <div className=\"absolute -top-20 -right-20 w-40 h-40 bg-blue-500/5 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\n          \n          <div className=\"relative z-10\">\n            {/* Icon */}\n            <div className=\"inline-flex items-center justify-center w-12 h-12 rounded-xl bg-blue-500/10 border border-blue-500/20 mb-4\">\n              <Target className=\"w-6 h-6 text-blue-400\" />\n            </div>\n            \n            {/* Label */}\n            <div className=\"price-box-label\">Nettoerls</div>\n            \n            {/* Value */}\n            <div className=\"price-box-value\">\n              {marginData.net_revenue?.toFixed(2) || '0.00'}\n            </div>\n            \n            {/* Meta */}\n            {marginData.vat_rate && (\n              <div className=\"price-box-meta\">\n                (nach {(marginData.vat_rate * 100).toFixed(0)}% MwSt)\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Variable Costs */}\n      {marginData.costs && (\n        <div className=\"variable-costs-section\">\n          <div className=\"section-label\">Variable Kosten:</div>\n          \n          <div className=\"costs-list\">\n            <div className=\"cost-item\">\n              <div className=\"cost-item-label\">\n                <span className=\"cost-item-bullet\"></span>\n                Einkauf:\n              </div>\n              <div className=\"cost-item-value\">\n                {marginData.costs.purchase.toFixed(2)}\n              </div>\n            </div>\n            \n            <div className=\"cost-item\">\n              <div className=\"cost-item-label\">\n                <span className=\"cost-item-bullet\"></span>\n                Versand:\n              </div>\n              <div className=\"cost-item-value\">\n                {marginData.costs.shipping.toFixed(2)}\n              </div>\n            </div>\n            \n            <div className=\"cost-item\">\n              <div className=\"cost-item-label\">\n                <span className=\"cost-item-bullet\"></span>\n                Verpackung:\n              </div>\n              <div className=\"cost-item-value\">\n                {marginData.costs.packaging.toFixed(2)}\n              </div>\n            </div>\n            \n            <div className=\"cost-item\">\n              <div className=\"cost-item-label\">\n                <span className=\"cost-item-bullet\"></span>\n                Payment Fee\n                {marginData.payment_provider && (\n                  <span className=\"text-xs text-gray-500\">({marginData.payment_provider})</span>\n                )}:\n              </div>\n              <div className=\"cost-item-value\">\n                {marginData.costs.payment_fee.toFixed(2)}\n              </div>\n            </div>\n            \n            <div className=\"cost-item total-row\">\n              <div className=\"cost-item-label\">\n                Gesamt:\n              </div>\n              <div className=\"cost-item-value\">\n                {marginData.costs.total_variable.toFixed(2)}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Contribution Margin - HERO BOX */}\n      {marginData.margin && (\n        <div className=\"contribution-margin-box\">\n          <div className=\"contribution-margin-header\">\n            <CheckCircle2 className=\"contribution-check-icon\" />\n            <span className=\"contribution-label\">Deckungsbeitrag I:</span>\n          </div>\n          <div className=\"contribution-amount\">\n            {marginData.margin.euro.toFixed(2)}\n          </div>\n          <div className=\"contribution-percentage\">\n            ({marginData.margin.percent.toFixed(1)}%)\n          </div>\n        </div>\n      )}\n\n      {/* Break-Even & Min. Recommendation */}\n      <div className=\"insights-grid\">\n        {marginData.break_even_price && (\n          <div className=\"insight-box warning\">\n            <div className=\"insight-header\">\n              <AlertTriangle className=\"insight-icon warning\" />\n              <span className=\"insight-label\">Break-Even:</span>\n            </div>\n            <div className=\"insight-value\">\n              {marginData.break_even_price.toFixed(2)}\n            </div>\n          </div>\n        )}\n        \n        {marginData.recommended_min_price && (\n          <div className=\"insight-box success\">\n            <div className=\"insight-header\">\n              <CheckCircle2 className=\"insight-icon success\" />\n              <span className=\"insight-label\">Min. empfohlen (20%):</span>\n            </div>\n            <div className=\"insight-value\">\n              {marginData.recommended_min_price.toFixed(2)}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Health Banner */}\n      {!marginData.is_above_break_even && (\n        <div className=\"health-banner\" style={{ background: 'linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)', borderColor: '#f87171' }}>\n          <AlertTriangle className=\"health-icon\" style={{ color: '#dc2626' }} />\n          <div className=\"health-content\">\n            <div className=\"health-title\" style={{ color: '#991b1b' }}> KRITISCH: Unter Break-Even</div>\n            <div className=\"health-description\" style={{ color: '#7f1d1d' }}>\n              Dieser Preis liegt unter deinen Kosten. Du machst Verlust bei jedem Verkauf!\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {marginData.is_above_break_even && !marginData.is_above_min_margin && (\n        <div className=\"health-banner\" style={{ background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)', borderColor: '#fbbf24' }}>\n          <AlertTriangle className=\"health-icon\" style={{ color: '#f59e0b' }} />\n          <div className=\"health-content\">\n            <div className=\"health-title\" style={{ color: '#92400e' }}> NIEDRIGE MARGE</div>\n            <div className=\"health-description\" style={{ color: '#78350f' }}>\n              Marge liegt unter der empfohlenen Mindestmarge von 20%. Bercksichtige Fixkosten und unerwartete Ausgaben.\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {marginData.is_above_min_margin && (\n        <div className=\"health-banner\">\n          <CheckCircle2 className=\"health-icon\" />\n          <div className=\"health-content\">\n            <div className=\"health-title\"> Gesunde Marge</div>\n            <div className=\"health-description\">\n              Marge ber 20% - gute Profitabilitt! Genug Puffer fr Fixkosten und Gewinn.\n            </div>\n          </div>\n        </div>\n      )}\n      \n    </div>\n  )\n}\n\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ]\n];\nconst Pen = createLucideIcon(\"pen\", __iconNode);\n\nexport { __iconNode, Pen as default };\n//# sourceMappingURL=pen.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]];\nconst LoaderCircle = createLucideIcon(\"loader-circle\", __iconNode);\n\nexport { __iconNode, LoaderCircle as default };\n//# sourceMappingURL=loader-circle.js.map\n","'use client'\r\n\r\nimport React, { useState, useEffect } from 'react'\r\nimport { X, Info, TrendingUp, Loader2, Edit2, Check, X as XIcon } from 'lucide-react'\r\nimport { API_URL, getProductCosts, getCategoryDefaults, estimateCostsFromPrice, updateProductCosts, saveProductCosts } from '@/lib/api'\r\n\r\ninterface CostInputModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  productId: string\r\n  productTitle: string\r\n  currentPrice?: number\r\n  shopId: string\r\n  onSave: (costData: ProductCostData) => Promise<void>\r\n}\r\n\r\ninterface ProductCostData {\r\n  purchase_cost: number\r\n  shipping_cost: number\r\n  packaging_cost: number\r\n  payment_provider: string\r\n  country_code: string\r\n  category?: string\r\n}\r\n\r\ninterface CategoryDefaults {\r\n  typical_margin: number\r\n  shipping_estimate: number\r\n  packaging_estimate: number\r\n}\r\n\r\nexport function CostInputModal({\r\n  isOpen,\r\n  onClose,\r\n  productId,\r\n  productTitle,\r\n  currentPrice,\r\n  shopId,\r\n  onSave\r\n}: CostInputModalProps) {\r\n  const [costData, setCostData] = useState<ProductCostData>({\r\n    purchase_cost: 0,\r\n    shipping_cost: 0,\r\n    packaging_cost: 0,\r\n    payment_provider: 'stripe',\r\n    country_code: 'DE',\r\n    category: undefined\r\n  })\r\n  \r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [isSaving, setIsSaving] = useState(false)\r\n  const [showEstimates, setShowEstimates] = useState(false)\r\n  const [categoryDefaults, setCategoryDefaults] = useState<CategoryDefaults | null>(null)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [isEditing, setIsEditing] = useState(false)\r\n  const [savedCostData, setSavedCostData] = useState<ProductCostData | null>(null)\r\n  \r\n  const categories = ['fashion', 'electronics', 'beauty', 'home', 'food']\r\n  const paymentProviders = [\r\n    { value: 'stripe', label: 'Stripe (2.9% + 0.30)' },\r\n    { value: 'paypal', label: 'PayPal (2.49% + 0.35)' },\r\n    { value: 'klarna', label: 'Klarna (4.5%)' },\r\n    { value: 'custom', label: 'Custom' }\r\n  ]\r\n  \r\n  // Load existing cost data\r\n  useEffect(() => {\r\n    if (isOpen && productId) {\r\n      loadExistingCosts()\r\n    }\r\n  }, [isOpen, productId])\r\n  \r\n  const loadExistingCosts = async () => {\r\n    try {\r\n      setIsLoading(true)\r\n      setError(null)\r\n      const data = await getProductCosts(productId)\r\n      if (data) {\r\n        // Save original data for view mode\r\n        setSavedCostData({\r\n          purchase_cost: data.purchase_cost,\r\n          shipping_cost: data.shipping_cost,\r\n          packaging_cost: data.packaging_cost,\r\n          payment_provider: data.payment_provider,\r\n          country_code: data.country_code,\r\n          category: data.category\r\n        })\r\n        // Populate form with saved data\r\n        setCostData({\r\n          purchase_cost: data.purchase_cost,\r\n          shipping_cost: data.shipping_cost,\r\n          packaging_cost: data.packaging_cost,\r\n          payment_provider: data.payment_provider,\r\n          country_code: data.country_code,\r\n          category: data.category\r\n        })\r\n        setIsEditing(false) // Start in view mode\r\n      } else {\r\n        // 404 - No cost data exists yet, show empty form\r\n        setSavedCostData(null)\r\n        setCostData({\r\n          purchase_cost: 0,\r\n          shipping_cost: 0,\r\n          packaging_cost: 0,\r\n          payment_provider: 'stripe',\r\n          country_code: 'DE',\r\n          category: undefined\r\n        })\r\n        setIsEditing(true) // Auto-enable edit for new costs\r\n        setError(null) // No error for 404 - this is expected\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Failed to load costs:', error)\r\n      // Only show error if it's not a 404\r\n      if (error?.response?.status !== 404 && error?.status !== 404) {\r\n        setError('Fehler beim Laden der Kosten')\r\n      } else {\r\n        // 404 is expected - no cost data exists yet\r\n        setSavedCostData(null)\r\n        setIsEditing(true)\r\n        setError(null)\r\n      }\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n  \r\n  // Load category defaults when category changes\r\n  useEffect(() => {\r\n    if (costData.category) {\r\n      loadCategoryDefaults(costData.category)\r\n    }\r\n  }, [costData.category])\r\n  \r\n  const loadCategoryDefaults = async (category: string) => {\r\n    try {\r\n      const data = await getCategoryDefaults(category)\r\n      setCategoryDefaults(data)\r\n    } catch (error) {\r\n      console.error('Failed to load category defaults:', error)\r\n    }\r\n  }\r\n  \r\n  const handleEstimateCosts = async () => {\r\n    if (!currentPrice || !costData.category) {\r\n      setError('Bitte whle zuerst eine Kategorie')\r\n      return\r\n    }\r\n    \r\n    setIsLoading(true)\r\n    setError(null)\r\n    \r\n    try {\r\n      const estimates = await estimateCostsFromPrice(\r\n        currentPrice,\r\n        costData.category,\r\n        costData.country_code\r\n      )\r\n      \r\n      setCostData(prev => ({\r\n        ...prev,\r\n        purchase_cost: estimates.estimated_purchase_cost,\r\n        shipping_cost: estimates.estimated_shipping_cost,\r\n        packaging_cost: estimates.estimated_packaging_cost\r\n      }))\r\n      setShowEstimates(true)\r\n    } catch (error) {\r\n      console.error('Failed to estimate costs:', error)\r\n      setError('Fehler beim Schtzen der Kosten')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n  \r\n  const handleApplyDefaults = () => {\r\n    if (categoryDefaults) {\r\n      setCostData(prev => ({\r\n        ...prev,\r\n        shipping_cost: categoryDefaults.shipping_estimate,\r\n        packaging_cost: categoryDefaults.packaging_estimate\r\n      }))\r\n    }\r\n  }\r\n  \r\n  const handleSave = async () => {\r\n    // Validation\r\n    if (costData.purchase_cost <= 0) {\r\n      setError('Einkaufspreis muss grer als 0 sein')\r\n      return\r\n    }\r\n    \r\n    setIsSaving(true)\r\n    setError(null)\r\n    \r\n    try {\r\n      // Use PUT for update, POST for create\r\n      if (savedCostData) {\r\n        // Update existing\r\n        await updateProductCosts(productId, costData)\r\n      } else {\r\n        // Create new\r\n        await saveProductCosts(productId, costData)\r\n      }\r\n      \r\n      // Call parent callback\r\n      await onSave(costData)\r\n      \r\n      // Reload to get updated data\r\n      await loadExistingCosts()\r\n      //  WICHTIG: Nach Save direkt editierbar bleiben (nicht zurck zu View-Mode)\r\n      setIsEditing(true) // Direct edit mode after save!\r\n    } catch (error: any) {\r\n      console.error('Failed to save costs:', error)\r\n      //  Verbesserte Error-Message\r\n      const errorMessage = error?.message || error?.detail || 'Fehler beim Speichern der Kosten'\r\n      setError(errorMessage)\r\n    } finally {\r\n      setIsSaving(false)\r\n    }\r\n  }\r\n\r\n  const handleCancelEdit = () => {\r\n    // Reset form to saved data\r\n    if (savedCostData) {\r\n      setCostData({ ...savedCostData })\r\n    }\r\n    setIsEditing(false)\r\n    setError(null)\r\n  }\r\n  \r\n  if (!isOpen) return null\r\n  \r\n  const totalCosts = costData.purchase_cost + costData.shipping_cost + costData.packaging_cost\r\n  const estimatedMargin = currentPrice \r\n    ? ((currentPrice / 1.19 - totalCosts) / (currentPrice / 1.19) * 100)\r\n    : 0\r\n  \r\n  return (\r\n    <>\r\n      {/* Backdrop */}\r\n      <div \r\n        className=\"fixed inset-0 bg-black bg-opacity-50 z-40\"\r\n        onClick={onClose}\r\n      />\r\n      \r\n      {/* Modal */}\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-50 p-4\">\r\n        <div className=\"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n          \r\n          {/* Header */}\r\n          <div className=\"flex items-start justify-between p-6 border-b sticky top-0 bg-white z-10\">\r\n            <div className=\"flex-1\">\r\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-1\">\r\n                Kosten hinterlegen\r\n              </h2>\r\n              <p className=\"text-sm text-gray-600\">{productTitle}</p>\r\n            </div>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-2 hover:bg-gray-100 rounded-full transition\"\r\n            >\r\n              <X className=\"w-6 h-6\" />\r\n            </button>\r\n          </div>\r\n          \r\n          {/* Error Message */}\r\n          {error && (\r\n            <div className=\"mx-6 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\">\r\n              {error}\r\n            </div>\r\n          )}\r\n        \r\n        {/* Body */}\r\n        <div className=\"p-6 space-y-6\">\r\n          \r\n          {/* VIEW MODE: Show Saved Data + Prominent Edit Button */}\r\n          {savedCostData && !isEditing && (\r\n            <div className=\"bg-green-50 border-2 border-green-300 rounded-xl p-6 mb-8 shadow-md\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <div>\r\n                  <h3 className=\"text-xl font-bold text-green-800 mb-1\"> Gespeicherte Kosten</h3>\r\n                  <p className=\"text-sm text-green-700\">Klicke Bearbeiten um Werte anzupassen</p>\r\n                </div>\r\n                {/*  PROMINENTER EDIT-BUTTON */}\r\n                <button \r\n                  onClick={() => setIsEditing(true)}\r\n                  className=\"px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 flex items-center gap-2 shadow-md transition-all hover:scale-105\"\r\n                  title=\"Kosten bearbeiten\"\r\n                >\r\n                  <Edit2 className=\"w-4 h-4\" />\r\n                  Bearbeiten\r\n                </button>\r\n              </div>\r\n              \r\n              {/* Read-only Kosten-Grid */}\r\n              <div className=\"grid grid-cols-2 gap-4 text-sm mb-6\">\r\n                <div>\r\n                  <span className=\"text-gray-600\">Einkauf:</span>\r\n                  <span className=\"font-bold ml-2 text-gray-900\">{savedCostData.purchase_cost.toFixed(2)}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-gray-600\">Versand:</span>\r\n                  <span className=\"font-bold ml-2 text-gray-900\">{savedCostData.shipping_cost.toFixed(2)}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-gray-600\">Verpackung:</span>\r\n                  <span className=\"font-bold ml-2 text-gray-900\">{savedCostData.packaging_cost.toFixed(2)}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-gray-600\">Payment:</span>\r\n                  <span className=\"font-bold ml-2 text-gray-900\">{savedCostData.payment_provider}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-gray-600\">MwSt:</span>\r\n                  <span className=\"font-bold ml-2 text-gray-900\">{savedCostData.country_code}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-gray-600\">Kategorie:</span>\r\n                  <span className=\"font-bold ml-2 text-gray-900\">{savedCostData.category || 'N/A'}</span>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"pt-4 border-t border-green-300\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"font-bold text-gray-900\">Gesamt Kosten:</span>\r\n                  <span className=\"text-2xl font-bold text-green-600\">\r\n                    {(savedCostData.purchase_cost + savedCostData.shipping_cost + savedCostData.packaging_cost).toFixed(2)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {/* EDIT MODE: Show Form */}\r\n          {(isEditing || !savedCostData) && (\r\n            <>\r\n          \r\n          {/* Category Selection */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Kategorie\r\n            </label>\r\n            <select\r\n              value={costData.category || ''}\r\n              onChange={(e) => setCostData(prev => ({ ...prev, category: e.target.value }))}\r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              <option value=\"\">Kategorie whlen...</option>\r\n              {categories.map(cat => (\r\n                <option key={cat} value={cat}>\r\n                  {cat.charAt(0).toUpperCase() + cat.slice(1)}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            \r\n            {categoryDefaults && (\r\n              <div className=\"mt-2 p-3 bg-blue-50 rounded-lg\">\r\n                <div className=\"flex items-start gap-2\">\r\n                  <Info className=\"w-4 h-4 text-blue-600 mt-0.5\" />\r\n                  <div className=\"text-sm text-blue-900\">\r\n                    <p className=\"font-medium\">Typisch fr {costData.category}:</p>\r\n                    <p>Versand: {categoryDefaults.shipping_estimate.toFixed(2)}, \r\n                       Verpackung: {categoryDefaults.packaging_estimate.toFixed(2)}</p>\r\n                      <button\r\n                        onClick={handleApplyDefaults}\r\n                        className=\"text-blue-600 hover:text-blue-800 font-medium mt-1 underline\"\r\n                      >\r\n                         Werte bernehmen\r\n                      </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n            {/* Estimate Button */}\r\n          {currentPrice && costData.category && (\r\n            <button\r\n              onClick={handleEstimateCosts}\r\n              disabled={isLoading}\r\n              className=\"w-full flex items-center justify-center gap-2 py-3 px-4 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {isLoading ? (\r\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n              ) : (\r\n                <TrendingUp className=\"w-4 h-4\" />\r\n              )}\r\n              <span>\r\n                {isLoading ? 'Schtze...' : `Kosten schtzen (Verkaufspreis: ${currentPrice.toFixed(2)})`}\r\n              </span>\r\n            </button>\r\n          )}\r\n          \r\n          {showEstimates && (\r\n            <div className=\"p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800\">\r\n               Dies sind Schtzungen basierend auf Branchendurchschnitten. \r\n              Bitte mit echten Daten ersetzen!\r\n            </div>\r\n          )}\r\n          \r\n          {/* Cost Inputs */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            \r\n            {/* Purchase Cost */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                 Einkaufspreis (netto) *\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                  value={costData.purchase_cost || ''}\r\n                  onChange={(e) => setCostData(prev => ({ \r\n                    ...prev, \r\n                    purchase_cost: parseFloat(e.target.value) || 0 \r\n                  }))}\r\n                    className=\"w-full px-4 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    placeholder=\"0.00\"\r\n                    required\r\n                  />\r\n                  <span className=\"absolute right-3 top-2.5 text-gray-500\"></span>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Shipping Cost */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                 Versandkosten (pro Stck)\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                  value={costData.shipping_cost || ''}\r\n                  onChange={(e) => setCostData(prev => ({ \r\n                    ...prev, \r\n                    shipping_cost: parseFloat(e.target.value) || 0 \r\n                  }))}\r\n                    className=\"w-full px-4 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    placeholder=\"0.00\"\r\n                  />\r\n                  <span className=\"absolute right-3 top-2.5 text-gray-500\"></span>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Packaging Cost */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                 Verpackung (pro Stck)\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                  value={costData.packaging_cost || ''}\r\n                  onChange={(e) => setCostData(prev => ({ \r\n                    ...prev, \r\n                    packaging_cost: parseFloat(e.target.value) || 0 \r\n                  }))}\r\n                    className=\"w-full px-4 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    placeholder=\"0.00\"\r\n                  />\r\n                  <span className=\"absolute right-3 top-2.5 text-gray-500\"></span>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Payment Provider */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                 Payment Provider\r\n              </label>\r\n              <select\r\n                value={costData.payment_provider}\r\n                onChange={(e) => setCostData(prev => ({ ...prev, payment_provider: e.target.value }))}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                {paymentProviders.map(provider => (\r\n                  <option key={provider.value} value={provider.value}>\r\n                    {provider.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            \r\n            {/* Country Code */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                 Land (MwSt)\r\n              </label>\r\n              <select\r\n                value={costData.country_code}\r\n                onChange={(e) => setCostData(prev => ({ ...prev, country_code: e.target.value }))}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"DE\">Deutschland (19%)</option>\r\n                <option value=\"AT\">sterreich (20%)</option>\r\n                <option value=\"CH\">Schweiz (7.7%)</option>\r\n                <option value=\"GB\">UK (20%)</option>\r\n                <option value=\"US\">USA (0%)</option>\r\n              </select>\r\n            </div>\r\n            \r\n          </div>\r\n          \r\n          {/* Cost Summary */}\r\n          <div className=\"bg-gray-50 rounded-lg p-4 space-y-2\">\r\n            <div className=\"flex justify-between text-sm\">\r\n              <span className=\"text-gray-600\">Summe variable Kosten:</span>\r\n              <span className=\"font-semibold\">{totalCosts.toFixed(2)}</span>\r\n            </div>\r\n            \r\n            {currentPrice && (\r\n              <>\r\n                <div className=\"flex justify-between text-sm\">\r\n                  <span className=\"text-gray-600\">Aktueller Preis:</span>\r\n                  <span className=\"font-semibold\">{currentPrice.toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between text-lg font-bold pt-2 border-t\">\r\n                  <span>Geschtzte Marge:</span>\r\n                  <span className={estimatedMargin >= 20 ? 'text-green-600' : 'text-orange-600'}>\r\n                    {estimatedMargin.toFixed(1)}%\r\n                  </span>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n            </>\r\n          )}\r\n          \r\n        </div>\r\n        \r\n          {/* Footer */}\r\n          <div className=\"flex gap-3 p-6 border-t bg-gray-50 sticky bottom-0\">\r\n            {savedCostData && isEditing ? (\r\n              <>\r\n                <button\r\n                  onClick={handleCancelEdit}\r\n                  disabled={isSaving}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition disabled:opacity-50 flex items-center justify-center gap-2\"\r\n                >\r\n                  <XIcon className=\"w-4 h-4\" />\r\n                  Abbrechen\r\n                </button>\r\n                <button\r\n                  onClick={handleSave}\r\n                  disabled={isSaving || costData.purchase_cost === 0}\r\n                  className=\"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                >\r\n                  {isSaving ? (\r\n                    <>\r\n                      <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                      <span>Speichern...</span>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Check className=\"w-4 h-4\" />\r\n                      <span>Speichern</span>\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <button\r\n                  onClick={onClose}\r\n                  disabled={isSaving}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition disabled:opacity-50\"\r\n                >\r\n                  {savedCostData ? 'Schlieen' : 'Abbrechen'}\r\n                </button>\r\n                {!savedCostData && (\r\n                  <button\r\n                    onClick={handleSave}\r\n                    disabled={isSaving || costData.purchase_cost === 0}\r\n                    className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                  >\r\n                    {isSaving ? (\r\n                      <>\r\n                        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                        <span>Speichern...</span>\r\n                      </>\r\n                    ) : (\r\n                      <span>Kosten erfassen</span>\r\n                    )}\r\n                  </button>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n          \r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m18 15-6-6-6 6\", key: \"153udz\" }]];\nconst ChevronUp = createLucideIcon(\"chevron-up\", __iconNode);\n\nexport { __iconNode, ChevronUp as default };\n//# sourceMappingURL=chevron-up.js.map\n","'use client'\n\nimport { useState, useEffect, Suspense } from 'react'\nimport { Link } from '@/navigation'\nimport { useSearchParams, usePathname } from 'next/navigation'\nimport { ShopSwitcher } from '@/components/ShopSwitcher'\nimport { useShop } from '@/hooks/useShop'\nimport LatestRecommendation from '@/components/LatestRecommendation'\nimport { CompetitorAnalysis } from '@/components/CompetitorAnalysis'\nimport { MarginDisplay } from '@/components/margin/MarginDisplay'\nimport { CostInputModal } from '@/components/margin/CostInputModal'\nimport { fetchProducts, calculateMargin, saveProductCosts } from '@/lib/api'\nimport { ChevronDown, ChevronUp, Info, Package, DollarSign, BarChart, ShoppingCart, ArrowLeft, LayoutDashboard, Lightbulb } from 'lucide-react'\nimport '../../styles/recommendations.css'\n\nfunction RecommendationsContent() {\n  const pathname = usePathname()\n  const searchParams = useSearchParams()\n  const productIdParam = searchParams.get('product_id')\n  const [productId, setProductId] = useState(productIdParam ? Number(productIdParam) : 1)\n  const [currentPrice, setCurrentPrice] = useState<number>(0)\n  const [marginData, setMarginData] = useState<any>(null)\n  const [showCostModal, setShowCostModal] = useState(false)\n  const [productTitle, setProductTitle] = useState<string>('')\n  \n  // State fr Accordion-Bereiche (welche sind geffnet)\n  const [openSections, setOpenSections] = useState<{\n    margin: boolean\n    price: boolean\n    competitor: boolean\n  }>({\n    margin: false, //  Alle standardmig zugeklappt\n    price: false,\n    competitor: false\n  })\n\n  // State fr Info-Tooltips\n  const [showInfoTooltip, setShowInfoTooltip] = useState<{\n    margin: boolean\n    price: boolean\n    competitor: boolean\n  }>({\n    margin: false,\n    price: false,\n    competitor: false\n  })\n\n  const { isDemoMode, currentShop } = useShop()\n  \n  // Toggle-Funktion fr Accordion-Bereiche\n  const toggleSection = (section: 'margin' | 'price' | 'competitor') => {\n    setOpenSections(prev => ({\n      ...prev,\n      [section]: !prev[section]\n    }))\n  }\n\n  // Lade Produkt-Preis und Margin-Daten\n  useEffect(() => {\n    if (!productId || !currentShop) {\n      console.log('[RecommendationsPage] Missing productId or currentShop, skipping load')\n      return\n    }\n    \n    const loadProductData = async () => {\n      try {\n        console.log('[RecommendationsPage] Loading product data:', { productId, shopId: currentShop.id, isDemoMode })\n        const products = await fetchProducts() // Backend nutzt ShopContext\n        \n        // Debug: Log product types\n        console.log('[RecommendationsPage] Products received:', products.length, 'First ID type:', typeof products[0]?.id)\n        console.log('[RecommendationsPage] Searching for:', productId, 'Type:', typeof productId)\n        \n        // WICHTIG: Loose comparison fr Type-Mismatch (String vs Number)\n        const product = products.find((p: any) => String(p.id) === String(productId))\n        \n        if (!product) {\n          console.error('[RecommendationsPage] Product not found in current shop', { \n            productId, \n            productIdType: typeof productId,\n            currentShop, \n            productsCount: products.length,\n            availableIds: products.slice(0, 5).map((p: any) => ({ id: p.id, idType: typeof p.id }))\n          })\n          setMarginData({ has_cost_data: false, error: `Produkt ${productId} nicht im aktuellen Shop gefunden. Bitte Shop wechseln oder Produkt-ID prfen.` })\n          setCurrentPrice(0)\n          setProductTitle(`Product ${productId} (nicht gefunden)`)\n          return\n        }\n        \n        console.log('[RecommendationsPage] Product found:', { id: product.id, title: product.title, price: product.price })\n        \n        setCurrentPrice(product.price || 0)\n        setProductTitle(product.title || product.name || `Product ${productId}`)\n        \n        // Lade Margin-Daten wenn Preis vorhanden\n        if (product.price && product.price > 0) {\n          try {\n            const margin = await calculateMargin(productId.toString(), product.price)\n            setMarginData(margin)\n          } catch (error) {\n            // Keine Kostendaten vorhanden - das ist OK\n            setMarginData({ has_cost_data: false })\n          }\n        }\n      } catch (error) {\n        console.error('[RecommendationsPage] Fehler beim Laden der Produktdaten:', error)\n        setMarginData({ has_cost_data: false, error: 'Fehler beim Laden der Produktdaten.' })\n      }\n    }\n    \n    loadProductData()\n  }, [productId, currentShop?.id, isDemoMode])\n  \n  // Hre auf Shop-Wechsel Events\n  useEffect(() => {\n    const handleShopSwitch = (event: CustomEvent) => {\n      console.log('[RecommendationsPage] Shop switched event received:', event.detail)\n      // Reload product data when shop changes\n      if (productId) {\n        setTimeout(() => {\n          const loadProductData = async () => {\n            try {\n              const products = await fetchProducts()\n              // WICHTIG: Loose comparison fr Type-Mismatch (String vs Number)\n              const product = products.find((p: any) => String(p.id) === String(productId))\n              if (product) {\n                console.log('[RecommendationsPage] Product reloaded after shop switch:', { id: product.id, title: product.title, price: product.price })\n                setCurrentPrice(product.price || 0)\n                setProductTitle(product.title || product.name || `Product ${productId}`)\n              } else {\n                setMarginData({ has_cost_data: false, error: `Produkt ${productId} nicht im neuen Shop gefunden.` })\n              }\n            } catch (error) {\n              console.error('[RecommendationsPage] Error reloading product after shop switch:', error)\n            }\n          }\n          loadProductData()\n        }, 300)\n      }\n    }\n    \n    window.addEventListener('shop-switched', handleShopSwitch as EventListener)\n    return () => window.removeEventListener('shop-switched', handleShopSwitch as EventListener)\n  }, [productId])\n\n  // Schliee Tooltips beim Klick auerhalb\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      const target = event.target as HTMLElement\n      // Prfe ob Klick auerhalb der Info-Icons war\n      if (!target.closest('.info-tooltip-button')) {\n        setShowInfoTooltip({\n          margin: false,\n          price: false,\n          competitor: false\n        })\n      }\n    }\n\n    if (showInfoTooltip.margin || showInfoTooltip.price || showInfoTooltip.competitor) {\n      document.addEventListener('click', handleClickOutside)\n      return () => document.removeEventListener('click', handleClickOutside)\n    }\n  }, [showInfoTooltip])\n\n  return (\n    <div className=\"min-h-screen flex recommendations-page\" style={{ backgroundColor: '#0f172a' }}>\n      {/* Sidebar mit Shop-Switcher */}\n      <aside className=\"w-80 border-r p-6 overflow-y-auto shadow-sm\" style={{ background: 'linear-gradient(to bottom, #1e293b, #0f172a, #1e293b)', borderColor: '#334155' }}>\n        <div className=\"px-4 pt-6 pb-4 border-b border-gray-800/30\">\n          {/* Logo & Brand */}\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"relative group cursor-pointer\">\n              {/* Icon mit Premium Glow */}\n              <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/25 transition-all duration-300 group-hover:shadow-xl group-hover:shadow-blue-500/40 group-hover:scale-105\">\n                <span className=\"text-xl\"></span>\n              </div>\n              {/* Subtle Glow Background */}\n              <div className=\"absolute inset-0 bg-blue-500/10 blur-xl rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10\" />\n            </div>\n            \n            <div className=\"flex-1\">\n              <h2 className=\"text-lg font-bold text-white tracking-tight leading-none\">\n                PriceIQ\n              </h2>\n              <p className=\"text-[10px] font-semibold text-blue-400 uppercase tracking-widest mt-0.5\">\n                Pricing Intelligence\n              </p>\n            </div>\n          </div>\n          \n          {/* Shop Switcher */}\n          <div className=\"mb-5\">\n            <ShopSwitcher />\n          </div>\n        </div>\n        \n        {/* Navigation */}\n        <nav className=\"space-y-1 px-2\">\n          {/* Navigation Label */}\n          <div className=\"px-3 mb-2\">\n            <p className=\"text-xs font-semibold text-gray-500 uppercase tracking-wider\">\n              Navigation\n            </p>\n          </div>\n          \n          {/* Dashboard Link */}\n          <Link \n            href=\"/\" \n            className={`\n              group flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200\n              ${pathname === '/' || pathname === '/de' || pathname === '/en'\n                ? 'bg-blue-500/10 text-blue-400 shadow-sm' \n                : 'text-gray-400 hover:text-gray-200 hover:bg-slate-800/50'\n              }\n            `}\n          >\n            <div className={`\n              p-1.5 rounded-md transition-colors\n              ${pathname === '/' || pathname === '/de' || pathname === '/en'\n                ? 'bg-blue-500/20' \n                : 'bg-slate-800/50 group-hover:bg-slate-800'\n              }\n            `}>\n              <LayoutDashboard className=\"w-4 h-4\" />\n            </div>\n            <span className=\"text-sm font-medium\">Dashboard</span>\n            \n            {/* Active Indicator */}\n            {(pathname === '/' || pathname === '/de' || pathname === '/en') && (\n              <div className=\"ml-auto w-1.5 h-1.5 rounded-full bg-blue-400\"></div>\n            )}\n          </Link>\n          \n          {/* Products Link */}\n          <Link \n            href=\"/products\" \n            className={`\n              group flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200\n              ${pathname?.includes('/products')\n                ? 'bg-blue-500/10 text-blue-400 shadow-sm' \n                : 'text-gray-400 hover:text-gray-200 hover:bg-slate-800/50'\n              }\n            `}\n          >\n            <div className={`\n              p-1.5 rounded-md transition-colors\n              ${pathname?.includes('/products')\n                ? 'bg-blue-500/20' \n                : 'bg-slate-800/50 group-hover:bg-slate-800'\n              }\n            `}>\n              <Package className=\"w-4 h-4\" />\n            </div>\n            <span className=\"text-sm font-medium\">Produkte</span>\n            \n            {pathname?.includes('/products') && (\n              <div className=\"ml-auto w-1.5 h-1.5 rounded-full bg-blue-400\"></div>\n            )}\n          </Link>\n          \n          {/* Recommendations Link */}\n          <Link \n            href=\"/recommendations\" \n            className={`\n              group flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200\n              ${pathname?.includes('/recommendations')\n                ? 'bg-blue-500/10 text-blue-400 shadow-sm' \n                : 'text-gray-400 hover:text-gray-200 hover:bg-slate-800/50'\n              }\n            `}\n          >\n            <div className={`\n              p-1.5 rounded-md transition-colors\n              ${pathname?.includes('/recommendations')\n                ? 'bg-blue-500/20' \n                : 'bg-slate-800/50 group-hover:bg-slate-800'\n              }\n            `}>\n              <Lightbulb className=\"w-4 h-4\" />\n            </div>\n            <span className=\"text-sm font-medium\">Empfehlungen</span>\n            \n            {pathname?.includes('/recommendations') && (\n              <div className=\"ml-auto w-1.5 h-1.5 rounded-full bg-blue-400\"></div>\n            )}\n          </Link>\n        </nav>\n      </aside>\n      \n      {/* Main Content */}\n      <main className=\"flex-1 overflow-y-auto\">\n        <div className=\"max-w-7xl mx-auto px-8 py-8\">\n          <div className=\"space-y-8\">\n        {/* Page Header */}\n        <div className=\"recommendations-header\">\n          <div className=\"header-icon-container\">\n            <div className=\"header-main-icon\">\n              <BarChart className=\"h-10 w-10 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"header-title\">Produkt-Analysen</h1>\n              <p className=\"header-subtitle\">\n                Vollstndige Analyse fr optimale Preisentscheidungen\n              </p>\n            </div>\n          </div>\n          \n          {/* Product Info Card */}\n          <div className=\"product-info-card\">\n            <div className=\"product-icon\">\n              <Package className=\"h-8 w-8 text-white\" />\n            </div>\n            <div className=\"product-details\">\n              <h2>{productTitle || `Produkt ${productId}`}</h2>\n              {currentPrice > 0 && (\n                <p className=\"product-price-display\">\n                  Aktueller Preis: <strong>{currentPrice.toFixed(2)} </strong>\n                </p>\n              )}\n            </div>\n            <Link\n              href=\"/\"\n              className=\"back-button ml-auto\"\n            >\n              <ArrowLeft className=\"h-4 w-4\" />\n              Zurck\n            </Link>\n          </div>\n        </div>\n\n        {/* Collapsible Sections */}\n        <div className=\"space-y-4\">\n          {/*  SECTION 1: MARGIN ANALYSIS (Risk First!) */}\n          {currentPrice > 0 && marginData && (\n            <div className=\"collapsible-card\">\n                  <div \n                    className=\"collapsible-header\"\n                    onClick={() => toggleSection('margin')}\n                  >\n                    <div className=\"section-icon icon-margin\">\n                      <DollarSign className=\"h-8 w-8 text-white\" />\n                    </div>\n                    <div className=\"section-content\">\n                      <h3 className=\"section-title\">\n                        Margen-Analyse\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation()\n                            setShowInfoTooltip(prev => ({ ...prev, margin: !prev.margin }))\n                          }}\n                          className=\"info-tooltip-button\"\n                        >\n                          <Info className=\"w-4 h-4 transition-colors\" style={{ color: '#94a3b8' }} />\n                          {showInfoTooltip.margin && (\n                            <div className=\"info-tooltip-content\">\n                              <h4>Was passiert hier?</h4>\n                              <p>\n                                Die Margen-Analyse zeigt dir, ob dein aktueller Preis ber deinen Kosten liegt und wie viel Gewinn du pro Verkauf machst.\n                              </p>\n                              <p>\n                                <strong>Wichtig:</strong> Bevor du Preise nderst, solltest du immer prfen, dass du nicht unter deine Kosten verkaufst!\n                              </p>\n                              <p>\n                                Hier kannst du auch Kosten fr dein Produkt hinterlegen (Einkaufspreis, Versand, Verpackung, etc.).\n                              </p>\n                            </div>\n                          )}\n                        </button>\n                      </h3>\n                      <p className=\"section-subtitle\">\n                        Prfe deine Kosten und Margen vor Preisnderungen\n                      </p>\n                    </div>\n                    {openSections.margin ? (\n                      <ChevronUp className=\"chevron-arrow\" />\n                    ) : (\n                      <ChevronDown className=\"chevron-arrow\" />\n                    )}\n                  </div>\n                  \n                  {openSections.margin && (\n                    <div className=\"px-8 pb-6\">\n                      <MarginDisplay \n                        marginData={marginData || { has_cost_data: false }}\n                        onAddCosts={() => setShowCostModal(true)}\n                        onEditCosts={() => setShowCostModal(true)}\n                      />\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/*  SECTION 2: PRICE RECOMMENDATION (Action!) */}\n              <div className=\"collapsible-card\">\n                  <div \n                    className=\"collapsible-header\"\n                    onClick={() => toggleSection('price')}\n                  >\n                    <div className=\"section-icon icon-recommendation\">\n                      <DollarSign className=\"h-8 w-8 text-white\" />\n                    </div>\n                    <div className=\"section-content\">\n                      <h3 className=\"section-title\">\n                        Preisempfehlung\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation()\n                            setShowInfoTooltip(prev => ({ ...prev, price: !prev.price }))\n                          }}\n                          className=\"info-tooltip-button\"\n                        >\n                          <Info className=\"w-4 h-4 transition-colors\" style={{ color: '#94a3b8' }} />\n                          {showInfoTooltip.price && (\n                            <div className=\"info-tooltip-content\">\n                              <h4>Was passiert hier?</h4>\n                              <p>\n                                Unsere KI analysiert verschiedene Faktoren wie Nachfrage, Lagerbestand, Wettbewerbspreise und deine Kosten, um dir eine optimale Preisempfehlung zu geben.\n                              </p>\n                              <p>\n                                <strong>Die Empfehlung bercksichtigt:</strong>\n                              </p>\n                              <ul>\n                                <li>Verkaufsdaten der letzten 30 Tage</li>\n                                <li>Aktuelle Preise deiner Konkurrenten</li>\n                                <li>Deine Lagerbestnde</li>\n                                <li>Deine Kosten und Margen</li>\n                              </ul>\n                              <p>\n                                Du kannst die Empfehlung direkt anwenden oder erst die Details ansehen.\n                              </p>\n                            </div>\n                          )}\n                        </button>\n                      </h3>\n                      <p className=\"section-subtitle\">\n                        KI-basierte Preisempfehlung basierend auf Marktdaten\n                      </p>\n                    </div>\n                    {openSections.price ? (\n                      <ChevronUp className=\"chevron-arrow\" />\n                    ) : (\n                      <ChevronDown className=\"chevron-arrow\" />\n                    )}\n                  </div>\n                \n                  {openSections.price && (\n                    <div className=\"px-8 pb-6\">\n                      <div className=\"rounded-lg border p-6 transition-all duration-300 ease-in-out\" style={{ backgroundColor: '#1e293b', borderColor: '#475569' }}>\n                        <LatestRecommendation productId={productId} />\n                      </div>\n                    </div>\n                  )}\n              </div>\n\n              {/*  SECTION 3: COMPETITOR ANALYSIS (Context Last!) */}\n              {currentPrice > 0 && (\n                <div className=\"collapsible-card\">\n                    <div \n                      className=\"collapsible-header\"\n                      onClick={() => toggleSection('competitor')}\n                    >\n                      <div className=\"section-icon icon-competitor\">\n                        <ShoppingCart className=\"h-8 w-8 text-white\" />\n                      </div>\n                      <div className=\"section-content\">\n                        <h3 className=\"section-title\">\n                          Wettbewerbsanalyse\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              setShowInfoTooltip(prev => ({ ...prev, competitor: !prev.competitor }))\n                            }}\n                            className=\"info-tooltip-button\"\n                          >\n                            <Info className=\"w-4 h-4 transition-colors\" style={{ color: '#94a3b8' }} />\n                            {showInfoTooltip.competitor && (\n                              <div className=\"info-tooltip-content\">\n                                <h4>Was passiert hier?</h4>\n                                <p>\n                                  Die Wettbewerbsanalyse zeigt dir, wie dein Preis im Vergleich zu anderen Anbietern steht.\n                                </p>\n                                <p>\n                                  <strong>Du siehst:</strong>\n                                </p>\n                                <ul>\n                                  <li>Preise deiner Konkurrenten (Neuware, Gebraucht, etc.)</li>\n                                  <li>Deine Marktposition (gnstigster, teuerster, Durchschnitt)</li>\n                                  <li>Durchschnittspreis und Preisspanne</li>\n                                  <li>Datenqualitt der Analyse</li>\n                                </ul>\n                                <p>\n                                  Nutze diese Informationen, um deine Preise strategisch anzupassen.\n                                </p>\n                              </div>\n                            )}\n                          </button>\n                        </h3>\n                        <p className=\"section-subtitle\">\n                          Vergleiche deine Preise mit der Konkurrenz\n                        </p>\n                      </div>\n                      {openSections.competitor ? (\n                        <ChevronUp className=\"chevron-arrow\" />\n                      ) : (\n                        <ChevronDown className=\"chevron-arrow\" />\n                      )}\n                    </div>\n                  \n                    {openSections.competitor && (\n                      <div className=\"px-8 pb-6\">\n                        <div className=\"rounded-lg border p-6 transition-all duration-300 ease-in-out\" style={{ backgroundColor: '#1e293b', borderColor: '#475569' }}>\n                          <CompetitorAnalysis productId={productId} currentPrice={currentPrice} />\n                        </div>\n                      </div>\n                    )}\n            </div>\n          )}\n        </div>\n          </div>\n        </div>\n      </main>\n\n      {/* Cost Input Modal */}\n      <CostInputModal\n        isOpen={showCostModal}\n        onClose={() => setShowCostModal(false)}\n        productId={productId.toString()}\n        productTitle={productTitle || `Product ${productId}`}\n        currentPrice={currentPrice}\n        shopId={currentShop?.id?.toString() || 'demo'}\n        onSave={async (costData) => {\n          try {\n            await saveProductCosts(productId.toString(), costData)\n            setShowCostModal(false)\n            \n            // Reload margin data\n            if (currentPrice > 0) {\n              const margin = await calculateMargin(productId.toString(), currentPrice)\n              setMarginData(margin)\n            }\n          } catch (error) {\n            console.error('Fehler beim Speichern der Kosten:', error)\n            throw error\n          }\n        }}\n      />\n    </div>\n  )\n}\n\nexport default function RecommendationsPage() {\n  return (\n    <Suspense fallback={<div className=\"min-h-screen p-8\">Lade...</div>}>\n      <RecommendationsContent />\n    </Suspense>\n  )\n}\n\n","import { _nullishCoalesce, _optionalChain } from '@sentry/utils';\nimport * as Sentry from '@sentry/nextjs';\nimport { requestAsyncStorage } from 'next/dist/client/components/request-async-storage.external.js';\nimport * as serverComponentModule from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nexport * from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\n\nconst serverComponent = serverComponentModule.default;\n\nlet wrappedServerComponent;\nif (typeof serverComponent === 'function') {\n  // For some odd Next.js magic reason, `headers()` will not work if used inside `wrapServerComponentsWithSentry`.\n  // Current assumption is that Next.js applies some loader magic to userfiles, but not files in node_modules. This file\n  // is technically a userfile so it gets the loader magic applied.\n  wrappedServerComponent = new Proxy(serverComponent, {\n    apply: (originalFunction, thisArg, args) => {\n      let sentryTraceHeader = undefined;\n      let baggageHeader = undefined;\n      let headers = undefined;\n\n      // We try-catch here just in `requestAsyncStorage` is undefined since it may not be defined\n      try {\n        const requestAsyncStore = requestAsyncStorage.getStore();\n        sentryTraceHeader = _nullishCoalesce(_optionalChain([requestAsyncStore, 'optionalAccess', _ => _.headers, 'access', _2 => _2.get, 'call', _3 => _3('sentry-trace')]), () => ( undefined));\n        baggageHeader = _nullishCoalesce(_optionalChain([requestAsyncStore, 'optionalAccess', _4 => _4.headers, 'access', _5 => _5.get, 'call', _6 => _6('baggage')]), () => ( undefined));\n        headers = _optionalChain([requestAsyncStore, 'optionalAccess', _7 => _7.headers]);\n      } catch (e) {\n        /** empty */\n      }\n\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n      return Sentry.wrapServerComponentWithSentry(originalFunction , {\n        componentRoute: '/[locale]/recommendations',\n        componentType: 'Unknown',\n        sentryTraceHeader,\n        baggageHeader,\n        headers,\n      }).apply(thisArg, args);\n    },\n  });\n} else {\n  wrappedServerComponent = serverComponent;\n}\n\nconst generateMetadata = serverComponentModule.generateMetadata\n  ? Sentry.wrapGenerationFunctionWithSentry(serverComponentModule.generateMetadata, {\n      componentRoute: '/[locale]/recommendations',\n      componentType: 'Unknown',\n      generationFunctionIdentifier: 'generateMetadata',\n      requestAsyncStorage,\n    })\n  : undefined;\n\nconst generateImageMetadata = serverComponentModule.generateImageMetadata\n  ? Sentry.wrapGenerationFunctionWithSentry(serverComponentModule.generateImageMetadata, {\n      componentRoute: '/[locale]/recommendations',\n      componentType: 'Unknown',\n      generationFunctionIdentifier: 'generateImageMetadata',\n      requestAsyncStorage,\n    })\n  : undefined;\n\nconst generateViewport = serverComponentModule.generateViewport\n  ? Sentry.wrapGenerationFunctionWithSentry(serverComponentModule.generateViewport, {\n      componentRoute: '/[locale]/recommendations',\n      componentType: 'Unknown',\n      generationFunctionIdentifier: 'generateViewport',\n      requestAsyncStorage,\n    })\n  : undefined;\n\nconst wrappedServerComponent$1 = wrappedServerComponent;\n\nexport { wrappedServerComponent$1 as default, generateImageMetadata, generateMetadata, generateViewport };\n","\"TURBOPACK { transition: next-ssr }\";\nimport { AppPageRouteModule } from \"next/dist/server/future/route-modules/app-page/module.compiled\";\nimport { RouteKind } from \"next/dist/server/future/route-kind\";\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: [\n        '[locale]',\n        {\n        children: [\n        'recommendations',\n        {\n        children: ['__PAGE__', {}, {\n          page: [() => import(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Kujti\\\\Desktop\\\\Trading Tools\\\\MVP PRICE\\\\frontend\\\\app\\\\[locale]\\\\recommendations\\\\page.tsx\"), \"C:\\\\Users\\\\Kujti\\\\Desktop\\\\Trading Tools\\\\MVP PRICE\\\\frontend\\\\app\\\\[locale]\\\\recommendations\\\\page.tsx\"],\n          \n        }]\n      },\n        {\n        \n        \n      }\n      ]\n      },\n        {\n        'layout': [() => import(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Kujti\\\\Desktop\\\\Trading Tools\\\\MVP PRICE\\\\frontend\\\\app\\\\[locale]\\\\layout.tsx\"), \"C:\\\\Users\\\\Kujti\\\\Desktop\\\\Trading Tools\\\\MVP PRICE\\\\frontend\\\\app\\\\[locale]\\\\layout.tsx\"],\n        \n      }\n      ]\n      },\n        {\n        'layout': [() => import(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Kujti\\\\Desktop\\\\Trading Tools\\\\MVP PRICE\\\\frontend\\\\app\\\\layout.tsx\"), \"C:\\\\Users\\\\Kujti\\\\Desktop\\\\Trading Tools\\\\MVP PRICE\\\\frontend\\\\app\\\\layout.tsx\"],\n'not-found': [() => import(/* webpackMode: \"eager\" */ \"next/dist/client/components/not-found-error\"), \"next/dist/client/components/not-found-error\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"C:\\\\Users\\\\Kujti\\\\Desktop\\\\Trading Tools\\\\MVP PRICE\\\\frontend\\\\app\\\\[locale]\\\\recommendations\\\\page.tsx\"];\nexport { tree, pages };\nexport { default as GlobalError } from \"next/dist/client/components/error-boundary\";\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nexport const originalPathname = \"/[locale]/recommendations/page\";\nexport const __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\nexport * from \"next/dist/server/app-render/entry-base\";\n// Create and export the route module that will be consumed.\nexport const routeModule = new AppPageRouteModule({\n    definition: {\n        kind: RouteKind.APP_PAGE,\n        page: \"/[locale]/recommendations/page\",\n        pathname: \"/[locale]/recommendations\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\",\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    }\n});\n\n//# sourceMappingURL=app-page.js.map","import(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Kujti\\\\Desktop\\\\Trading Tools\\\\MVP PRICE\\\\frontend\\\\app\\\\[locale]\\\\recommendations\\\\page.tsx\")","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n];\nconst ArrowLeft = createLucideIcon(\"arrow-left\", __iconNode);\n\nexport { __iconNode, ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]];\nconst ChevronDown = createLucideIcon(\"chevron-down\", __iconNode);\n\nexport { __iconNode, ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21.801 10A10 10 0 1 1 17 3.335\", key: \"yps3ct\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n];\nconst CircleCheckBig = createLucideIcon(\"circle-check-big\", __iconNode);\n\nexport { __iconNode, CircleCheckBig as default };\n//# sourceMappingURL=circle-check-big.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4\",\n      key: \"1slcih\"\n    }\n  ]\n];\nconst Flame = createLucideIcon(\"flame\", __iconNode);\n\nexport { __iconNode, Flame as default };\n//# sourceMappingURL=flame.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n];\nconst RefreshCw = createLucideIcon(\"refresh-cw\", __iconNode);\n\nexport { __iconNode, RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 7h6v6\", key: \"box55l\" }],\n  [\"path\", { d: \"m22 7-8.5 8.5-5-5L2 17\", key: \"1t1m79\" }]\n];\nconst TrendingUp = createLucideIcon(\"trending-up\", __iconNode);\n\nexport { __iconNode, TrendingUp as default };\n//# sourceMappingURL=trending-up.js.map\n"],"names":["module","exports","require","applyRecommendedPrice","request","response","fetch","API_URL","method","headers","credentials","body","JSON","stringify","ok","error","json","detail","CircleCheck","createLucideIcon","cx","cy","r","key","d","Calculator","width","height","x","y","rx","x1","x2","y1","y2","TriangleAlert","Clock","o","t","n","CircleAlert","CircleQuestionMark","ConfidenceIndicator","confidence","reasoning","compact","confidenceBasis","useTranslations","confidencePct","current","config","high","icon","CheckCircle","color","bgColor","borderColor","textColor","barColor","gradientBar","medium","AlertCircle","low","HelpCircle","Icon","react_jsx_runtime","jsxs","div","className","jsx","span","toFixed","compCount","competitor_count","sales_30d","Check","h3","style","h4","ul","li","Math","max","ml_models","p","X","formatCurrency","amount","currency","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","ActionButtons","recommendedPrice","onApply","onDismiss","isApplying","isDisabled","marginAnalysis","tCommon","tActions","showSchedule","setShowSchedule","useState","hasMarginWarning","is_safe","estimatedMonthlyImpact","details","margin","euro","button","onClick","disabled","Fragment","CheckCircle2","price","label","input","type","defaultValue","AlertTriangle","message","TrendingDown","DollarSign","Info","ChartNoAxesColumnIncreasing","PriceReasoningStory","currentPrice","strategyDetails","competitorData","productName","productId","onRefresh","createdAt","validConfidence","min","showDetails","setShowDetails","priceChange","priceChangePct","getQualityBadge","scorePct","strategyConfig","competitive","emoji","title","getStory","avgPrice","data","avg","competitorCount","prices","length","diff","diffPct","abs","getBasedOn","colorClass","demand","sales","previousSales","growth","inventory","stock","daysOfStock","avgDaily","cost","getPriceImpact","impact","strategy","recommended_price","value","formatted","isIncrease","isDecrease","sortedStrategies","sort","a","b","impactA","impactB","weightedContributions","map","idx","weight","weightedImpact","reduce","sum","w","round","RefreshCw","Date","toLocaleString","backgroundColor","minHeight","fontSize","border","TrendingUp","maxWidth","overflow","Lightbulb","Package","prev","item","itemIdx","strong","weightPct","BarChart","PriceRecommendationCard","recommendation","setIsApplying","isRefreshing","setIsRefreshing","displayedPrice","displayedPriceChange","current_price","displayedPriceChangePct","priceIncrease","noChange","margin_analysis","isCriticalWarning","warnings","some","severity","rawConfidence","undefined","overall_confidence","recommendationTexts","generateRecommendationTexts","absChangePct","price_change_pct","headline","bulletPoints","generateBulletPoints","bullets","competitor_context","ctx","positionText","position","diffText","price_diff_pct","push","avg_price","strategies","inv","includes","stockMatch","match","marginMatch","targetMargin","margin_pct","slice","generateConfidenceText","mlConfidence","ml_predictions","combined_ml_confidence","parts","factors","join","parseFloat","insights","generateInsightsText","has_insights","product_title","product_name","extractStrategies","strategy_details","Array","isArray","forEach","extractCompetitorContext","competitor_data","yourPrice","min_price","max_price","extractMLPredictions","reasoningText","handleApply","console","handleRefresh","productTitle","product_id","timestamp","generated_at","created_at","toISOString","background","h2","borderRadius","padding","display","alignItems","justifyContent","boxShadow","fontWeight","transition","marginTop","lineHeight","marginBottom","textTransform","letterSpacing","listStyle","flexDirection","gap","marginLeft","paddingTop","borderTop","formatPercentage","decimals","confidence_basis","filter","warning","formatTimeAgo","now","then","diffMins","floor","diffMs","getTime","diffHours","diffDays","EmptyAnalysisState","salesDataDays","onRunAnalysis","LatestRecommendation","setRecommendation","loading","setLoading","generating","setGenerating","setError","currentShop","isDemoMode","useShop","loadLatestRecommendation","productIdNum","parseInt","isNaN","log","generateRecommendation","rec","product","reasoningParsed","parse","feature_confidence","displayConfidence","toast","success","description","err","handleGenerate","alert","handleApplyPrice","id","shopId","result","new_price","useEffect","hasInvalidConfidence","Infinity","competitor_avg_price","sales_7d","reasoningObj","Object","entries","competitorContext","sources","source","transformedRecommendation","price_change","summary","status","ml_confidence","base_confidence","applied_at","applied_price","Search","ShoppingCart","MapPin","Users","ArrowUpDown","loadCachedData","saveCachedData","getCondition","titleLower","competitor","toLowerCase","sourceLower","CompetitorAnalysis","setData","setFilter","cachedData","handleSearch","forceRefresh","searchCompetitors","maxResults","errorMessage","metrics","calculateMetrics","competitors","c","minPrice","maxPrice","newOffers","usedOffers","refurbishedOffers","newMin","newMax","usedMin","priceSpread","yourPriceDiff","percentAboveAvg","newCount","usedCount","refurbishedCount","dataQuality","getDataQuality","explanation","hasHighSpread","hasFewCompetitors","filteredCompetitors","comp","left","getYourPricePosition","range","Flame","condition","priceDiff","isCheapest","isExpensive","avatarEmoji","rating","PenLine","Target","MarginDisplay","marginData","onAddCosts","onEditCosts","has_cost_data","textDecoration","marginColor","is_above_min_margin","is_above_break_even","marginBgColor","marginIcon","percent","aria-label","Edit3","selling_price","net_revenue","vat_rate","costs","purchase","shipping","packaging","payment_provider","payment_fee","total_variable","break_even_price","recommended_min_price","Pen","LoaderCircle","CostInputModal","isOpen","onClose","onSave","costData","setCostData","purchase_cost","shipping_cost","packaging_cost","country_code","category","isLoading","setIsLoading","isSaving","setIsSaving","showEstimates","setShowEstimates","categoryDefaults","setCategoryDefaults","isEditing","setIsEditing","savedCostData","setSavedCostData","loadExistingCosts","getProductCosts","loadCategoryDefaults","getCategoryDefaults","handleEstimateCosts","estimates","estimateCostsFromPrice","estimated_purchase_cost","estimated_shipping_cost","estimated_packaging_cost","handleSave","updateProductCosts","saveProductCosts","totalCosts","estimatedMargin","Edit2","select","onChange","e","target","option","categories","cat","charAt","toUpperCase","shipping_estimate","packaging_estimate","Loader2","step","placeholder","required","paymentProviders","provider","XIcon","ChevronUp","RecommendationsContent","pathname","usePathname","productIdParam","searchParams","useSearchParams","get","setProductId","Number","setCurrentPrice","setMarginData","showCostModal","setShowCostModal","setProductTitle","openSections","setOpenSections","showInfoTooltip","setShowInfoTooltip","toggleSection","section","loadProductData","products","fetchProducts","find","String","productIdType","productsCount","availableIds","idType","name","calculateMargin","toString","handleShopSwitch","event","setTimeout","window","addEventListener","removeEventListener","handleClickOutside","closest","document","_jsxs","aside","_jsx","children","ShopSwitcher","nav","Link","href","LayoutDashboard","main","h1","ArrowLeft","stopPropagation","ChevronDown","RecommendationsPage","Suspense","fallback","wrappedServerComponent","serverComponentModule.default","Proxy","apply","originalFunction","thisArg","args","sentryTraceHeader","baggageHeader","requestAsyncStore","next_dist_client_components_request_async_storage_external_js__WEBPACK_IMPORTED_MODULE_2__","requestAsyncStorage","getStore","_sentry_utils__WEBPACK_IMPORTED_MODULE_4__","h","_sentry_utils__WEBPACK_IMPORTED_MODULE_5__","_","_2","_3","_4","_5","_6","_7","_sentry_nextjs__WEBPACK_IMPORTED_MODULE_1__","wrapServerComponentWithSentry","componentRoute","componentType","generateMetadata","generateImageMetadata","generateViewport","wrappedServerComponent$1","tree","page","Promise","resolve","__webpack_require__","bind","pages","originalPathname","__next_app__","loadChunk","routeModule","next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__","AppPageRouteModule","definition","kind","next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__","APP_PAGE","bundlePath","filename","appPaths","userland","loaderTree","CircleCheckBig"],"sourceRoot":""}