(()=>{var e={};e.id=136,e.ids=[136],e.modules={8097:e=>{"use strict";e.exports=require("@sentry/nextjs")},7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},6226:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},852:e=>{"use strict";e.exports=require("async_hooks")},2081:e=>{"use strict";e.exports=require("child_process")},7643:e=>{"use strict";e.exports=require("diagnostics_channel")},3639:e=>{"use strict";e.exports=require("domain")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1405:e=>{"use strict";e.exports=require("inspector")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},5206:e=>{"use strict";e.exports=require("zlib")},3156:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>el}),t(9771);var r=t(8735),a=t(2815),i=t(2925),n=t(515),l=t(5355),c=t(170),o=t(2121),d=t(225);async function m(e){let s=await fetch(`${d.T5}/api/shopify/apply-price`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json()).detail||"Fehler beim Anwenden des Preises");return s.json()}var h=t(3465);let x=(0,h.Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var u=t(6030);let p=(0,h.Z)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),g=(0,h.Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),b=(0,h.Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var f=t(9601),j=t(6207);function v(e,s){return(...e)=>{try{return s(...e)}catch{throw Error(void 0)}}}let y=v(0,j.T_);v(0,j.Gb);var N=t(4400);let w=(0,h.Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),k=(0,h.Z)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var _=t(7514);function D({confidence:e,reasoning:s,compact:t=!1,confidenceBasis:a}){let i=y("confidence"),n=e>1?e:100*e,l={high:{icon:N.Z,color:"green",bgColor:"bg-gradient-to-r from-green-50 to-emerald-50",borderColor:"border-green-200",textColor:"text-green-700",barColor:"bg-green-500",gradientBar:"bg-gradient-to-r from-green-500 to-emerald-600"},medium:{icon:w,color:"yellow",bgColor:"bg-gradient-to-r from-yellow-50 to-amber-50",borderColor:"border-yellow-200",textColor:"text-yellow-700",barColor:"bg-yellow-500",gradientBar:"bg-gradient-to-r from-yellow-500 to-amber-600"},low:{icon:k,color:"red",bgColor:"bg-gradient-to-r from-red-50 to-orange-50",borderColor:"border-red-200",textColor:"text-red-700",barColor:"bg-red-500",gradientBar:"bg-gradient-to-r from-red-500 to-orange-600"}}[n>=85?"high":n>=60?"medium":"low"],c=l.icon;if(t)return(0,r.jsxs)("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full border ${l.bgColor} ${l.borderColor}`,children:[r.jsx(c,{className:`w-4 h-4 ${l.textColor}`}),(0,r.jsxs)("span",{className:`text-sm font-semibold ${l.textColor}`,children:[n.toFixed(0),"%"]})]});let o=a?.competitor_count||0;return a?.sales_30d,(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-2xl border-l-4 border-blue-500 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-2xl flex items-center justify-center flex-shrink-0",children:r.jsx(_.Z,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:i("title",{confidence:n.toFixed(0)})}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-2 rounded-full transition-all duration-500",style:{width:`${n}%`}})})]})]}),(0,r.jsxs)("div",{className:"p-4 bg-white/50 rounded-xl border",children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:["\uD83D\uDCCA ",r.jsx("span",{children:i("whatAnalyzes")})]}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm text-gray-700",children:[r.jsx("li",{children:"• Echte Verkaufsdaten aus deinem Shopify-Shop"}),(0,r.jsxs)("li",{children:["• Aktuelle Preise deiner ",o>0?`${o}-${Math.max(o,10)}`:"5-10"," wichtigsten Konkurrenten"]}),(0,r.jsxs)("li",{children:["• ",a?.ml_models||4," spezialisierte Machine-Learning-Modelle (Umsatz, Konkurrenz, Marge, Saisonalit\xe4t)"]}),r.jsx("li",{children:"• Deine eingetragenen Kosten und bisherigen Margen"})]})]}),(0,r.jsxs)("div",{className:"p-4 bg-yellow-50/80 border border-yellow-200 rounded-xl",children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:["\uD83D\uDCA1 ",i("why",{confidence:n.toFixed(0)})]}),r.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:i("whyText")})]})]})}let C=(0,h.Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function P(e,s="EUR"){return new Intl.NumberFormat("de-DE",{style:"currency",currency:s,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function M({recommendedPrice:e,onApply:s,onDismiss:t,isApplying:i,isDisabled:n=!1,marginAnalysis:l}){let c=y("pricing"),o=y("common"),d=y("actions"),[m,h]=(0,a.useState)(!1),u=l&&!l.is_safe,p=l?.details?.margin?.euro?30*l.details.margin.euro:null;return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx("button",{onClick:s,disabled:i||n,className:`
            flex items-center justify-center gap-2 px-6 py-3 rounded-lg font-semibold
            transition-all duration-200 transform hover:scale-105
            disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none
            ${n?"bg-gray-300 text-gray-600":u?"bg-orange-600 hover:bg-orange-700 text-white shadow-lg hover:shadow-xl":"bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl"}
          `,children:i?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:c("applying")})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(x,{className:"w-5 h-5"}),(0,r.jsxs)("div",{className:"flex flex-col items-start",children:[r.jsx("span",{children:c("apply_price",{price:P(e)})}),p&&(0,r.jsxs)("span",{className:"text-xs opacity-80 font-normal",children:["+",P(p),d("month_est")]})]})]})}),(0,r.jsxs)("button",{onClick:t,disabled:i,className:"flex items-center justify-center gap-2 px-6 py-3 rounded-lg font-semibold border-2 border-gray-300 text-gray-700 hover:bg-gray-50 transition-all disabled:opacity-50",children:[r.jsx(C,{className:"w-5 h-5"}),r.jsx("span",{children:o("dismiss")})]})]}),(0,r.jsxs)("button",{onClick:()=>h(!m),className:"w-full flex items-center justify-center gap-2 px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[r.jsx(b,{className:"w-4 h-4"}),r.jsx("span",{children:c("schedule_later")})]}),m&&(0,r.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200 space-y-3",children:[r.jsx("p",{className:"text-sm font-medium text-blue-900",children:d("schedule_price_change")}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs text-blue-700 mb-1",children:d("date")}),r.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs text-blue-700 mb-1",children:d("time")}),r.jsx("input",{type:"time",defaultValue:"09:00",className:"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm"})]})]}),r.jsx("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:d("schedule_change")})]}),n&&(0,r.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(C,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-800",children:d("cannot_apply_warning")})]}),u&&!n&&(0,r.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[r.jsx(g,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-orange-900 mb-1",children:d("margin_warning")}),r.jsx("p",{className:"text-xs text-orange-800",children:l?.message})]})]})]})}var S=t(66);let F=(0,h.Z)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var A=t(5825);let z=(0,h.Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),E=(0,h.Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),$=(0,h.Z)("chart-no-axes-column-increasing",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]]);function K({recommendedPrice:e,currentPrice:s,strategyDetails:t=[],competitorData:i,productName:n="Produkt",productId:l,confidence:c,onApply:o,onDismiss:d,onRefresh:m,createdAt:h}){let g=Math.max(0,Math.min(1,c||.5)),[j,v]=(0,a.useState)({}),y=e-s,N=y/s*100,k=e=>{let s=100*g;return s>=90?r.jsx("span",{className:"strategy-badge excellent",children:"Datenqualit\xe4t: Exzellent"}):s>=80?r.jsx("span",{className:"strategy-badge excellent",children:"Datenqualit\xe4t: Sehr gut"}):s>=70?r.jsx("span",{className:"strategy-badge good",children:"Datenqualit\xe4t: Gut"}):r.jsx("span",{className:"strategy-badge good",children:"Datenqualit\xe4t: Ausreichend"})},_={competitive:{emoji:"\uD83C\uDFEA",title:"Du bist teurer als der Markt",getStory:t=>{let r=t.competitorData?.avg||0,a=t.competitorData?.prices?.length||5,i=s-r,n=r>0?(i/r*100).toFixed(0):"0",l=s-e;return i>0?`Wir haben ${a} Wettbewerber analysiert. Der durchschnittliche Preis liegt bei ${P(r)}. Du bist ${n}% teurer als der Durchschnitt. Du solltest den Preis um ${P(Math.abs(l))} ${l>0?"senken":"erh\xf6hen"} um wettbewerbsf\xe4hig zu bleiben.`:`Wir haben ${a} Wettbewerber analysiert. Der durchschnittliche Preis liegt bei ${P(r)}. Du bist bereits wettbewerbsf\xe4hig positioniert.`},getBasedOn:e=>{let s=e.competitorData?.prices?.length||5;return[`Echtzeitpreise von ${s} Konkurrenten`,"Aktuelle Marktdaten (heute aktualisiert)","Preisvergleich mit \xe4hnlichen Produkten"]},colorClass:"competitive"},demand:{emoji:"\uD83D\uDCC8",title:"Die Nachfrage steigt stark",getStory:e=>{let s=e.sales||64,t=e.previousSales||54,r=t>0?((s-t)/t*100).toFixed(0):"19";return`In den letzten 7 Tagen hast du ${s} Verk\xe4ufe gemacht (vorher: ${t} Verk\xe4ufe). Das ist ein +${r}% Wachstum! Wenn die Nachfrage steigt, kannst du h\xf6here Preise durchsetzen.`},getBasedOn:()=>["Deine letzten 30 Tage Verkaufsdaten","Trendanalyse der letzten Woche","Machine-Learning Vorhersage f\xfcr n\xe4chste 7 Tage"],colorClass:"demand"},inventory:{emoji:"\uD83D\uDCE6",title:"Dein Lagerbestand ist niedrig",getStory:e=>{let s=e.stock||45,t=e.daysOfStock||20;return`Mit ${s} Einheiten auf Lager hast du bei aktuellem Tempo noch ${t} Tage Vorrat. Das ist knapp! Du solltest vorsichtig mit Preissenkungen sein.`},getBasedOn:e=>{let s=e.stock||45,t=e.avgDaily||2.25;return[`Aktueller Lagerbestand: ${s} St\xfcck`,`Durchschnittlicher Verkauf: ${t.toFixed(1)}/Tag`,"Berechnung basierend auf letzten 7 Tagen Verk\xe4ufen"]},colorClass:"inventory"},cost:{emoji:"\uD83D\uDCB0",title:"Deine Kosten sind stabil",getStory:()=>`Deine Einkaufskosten liegen bei einem stabilen Niveau. Die empfohlene Preis\xe4nderung ber\xfccksichtigt deine aktuellen Margen und stellt sicher, dass du profitabel bleibst.`,getBasedOn:()=>["Deine hinterlegten Produktkosten","Aktuelle Marge-Berechnung","Historische Kostenentwicklung"],colorClass:"costs"}},D=e=>{let t=e.recommended_price-s;return{value:t,formatted:P(Math.abs(t)),isIncrease:t>0,isDecrease:t<0}},M=[...t].sort((e,s)=>{let t=Math.abs(D(e).value);return Math.abs(D(s).value)-t}),K=M.map((e,s)=>{let t=D(e),r=e.confidence*(1/M.length),a=t.value*r;return{strategy:e.strategy,impact:t.value,weightedImpact:a,confidence:e.confidence,weight:100*r}});return K.reduce((e,s)=>e+s.weightedImpact,0),(0,r.jsxs)("div",{className:"recommendation-content",children:[(0,r.jsxs)("div",{className:"recommendation-header",children:[(0,r.jsxs)("div",{className:"product-header-row",children:[(0,r.jsxs)("div",{className:"product-info-compact",children:[r.jsx("h3",{children:n}),l&&(0,r.jsxs)("p",{className:"product-meta",children:["Produkt-ID: ",l]})]}),(0,r.jsxs)("div",{className:"confidence-badge-large",children:[r.jsx(x,{className:"h-6 w-6"}),(0,r.jsxs)("span",{children:[Math.round(100*g),"% Sicherheit"]})]})]}),(0,r.jsxs)("p",{className:"recommendation-text",children:["Empfohlene Preis",y<0?"senkung":"erh\xf6hung"," um ",Math.abs(N).toFixed(1),"% um wettbewerbsf\xe4hig zu bleiben."]})]}),(o||d||m)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"action-buttons-top",children:[o&&(0,r.jsxs)("button",{className:"action-button-primary",onClick:()=>o(e),children:[r.jsx(x,{className:"h-5 w-5"}),P(e)," anwenden"]}),d&&(0,r.jsxs)("button",{className:"action-button-secondary",onClick:d,children:[r.jsx(C,{className:"h-5 w-5"}),"Verwerfen"]}),m&&(0,r.jsxs)("button",{className:"action-button-update",onClick:m,children:[r.jsx(f.Z,{className:"h-4 w-4"}),"Aktualisieren"]})]}),(0,r.jsxs)("div",{className:"last-updated",children:[(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[r.jsx(b,{className:"h-4 w-4"}),h?new Date(h).toLocaleString("de-DE"):"just now"]}),r.jsx("span",{className:"update-link",children:"Sp\xe4ter planen"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex flex-col justify-between p-6 border-2 rounded-xl",style:{backgroundColor:"#0f172a",borderColor:"#475569",minHeight:"140px"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-500"}),r.jsx("div",{className:"price-label",style:{color:"#94a3b8"},children:"Aktueller Preis"})]}),r.jsx("div",{className:"price-amount",style:{fontSize:"36px",color:"#f1f5f9"},children:P(s)})]}),(0,r.jsxs)("div",{className:"relative overflow-hidden rounded-xl border-2 p-6 flex flex-col justify-between",style:{backgroundColor:"#064e3b",borderColor:"#10b981",minHeight:"140px"},children:[r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx("div",{className:"px-3 py-1.5 rounded-lg",style:{backgroundColor:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.5)"},children:r.jsx("span",{className:"text-xs font-bold",style:{color:"#86efac"},children:"⭐ EMPFOHLEN"})})}),(0,r.jsxs)("div",{className:"relative z-10 flex flex-col justify-between h-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"}),r.jsx("div",{className:"price-label",style:{color:"#86efac"},children:"Empfohlener Preis"})]}),r.jsx("div",{className:"price-amount",style:{fontSize:"36px",color:"#86efac"},children:P(e)}),(0,r.jsxs)("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1.5 rounded-lg",style:{backgroundColor:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.3)"},children:[y>0?r.jsx(S.Z,{className:"w-4 h-4",style:{color:"#86efac"}}):r.jsx(F,{className:"w-4 h-4",style:{color:"#86efac"}}),(0,r.jsxs)("span",{className:"text-sm font-bold",style:{color:"#86efac"},children:[y>0?"+":"",P(Math.abs(y))," (",y>0?"+":"",Math.abs(N).toFixed(1),"%)"]})]})]})]})]}),(0,r.jsxs)("div",{className:"ml-confidence-section",children:[(0,r.jsxs)("div",{className:"confidence-header",children:[r.jsx("div",{className:"confidence-icon",children:r.jsx(x,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("h3",{className:"confidence-title",children:["Unsere KI ist ",Math.round(100*g),"% sicher"]})]}),(0,r.jsxs)("div",{className:"confidence-progress-wrapper",children:[(0,r.jsxs)("div",{className:"confidence-progress-header",children:[r.jsx("span",{className:"confidence-progress-label",children:"Sicherheitswert"}),(0,r.jsxs)("span",{className:"confidence-progress-value",children:[Math.round(100*g),"%"]})]}),r.jsx("div",{className:"confidence-progress-bar-container",style:{maxWidth:"100%",overflow:"hidden"},children:r.jsx("div",{className:"confidence-progress-bar",style:{width:`${Math.min(Math.max(100*g,0),100)}%`,maxWidth:"100%"}})})]}),(0,r.jsxs)("div",{className:"analysis-factors",children:[r.jsx("div",{className:"analysis-factors-title",children:"\uD83D\uDCCA Was analysiert unsere KI?"}),(0,r.jsxs)("div",{className:"factors-grid",children:[(0,r.jsxs)("div",{className:"factor-item",children:[r.jsx(x,{className:"factor-check"}),r.jsx("span",{children:"Echte Verkaufsdaten aus deinem Shopify-Shop"})]}),(0,r.jsxs)("div",{className:"factor-item",children:[r.jsx(x,{className:"factor-check"}),r.jsx("span",{children:"Aktuelle Preise deiner 5-10 wichtigsten Konkurrenten"})]}),(0,r.jsxs)("div",{className:"factor-item",children:[r.jsx(x,{className:"factor-check"}),r.jsx("span",{children:"4 spezialisierte Machine-Learning-Modelle"})]}),(0,r.jsxs)("div",{className:"factor-item",children:[r.jsx(x,{className:"factor-check"}),r.jsx("span",{children:"Deine eingetragenen Kosten und bisherigen Margen"})]})]}),(0,r.jsxs)("div",{className:"confidence-explanation",children:[(0,r.jsxs)("div",{className:"confidence-explanation-title",children:["\uD83D\uDCA1 Warum genau ",Math.round(100*g),"% Sicherheit?"]}),r.jsx("p",{className:"confidence-explanation-text",children:"Deine Produkte verkaufen sich bei diesem Preis sehr gut. Konkurrenten haben \xe4hnliche Preise und deine Marge bleibt stabil. Alle Daten deuten auf Erfolg hin!"})]})]})]}),(0,r.jsxs)("div",{className:"why-recommend-section",children:[(0,r.jsxs)("div",{className:"why-recommend-header",children:[r.jsx("div",{className:"why-recommend-icon",children:r.jsx(u.Z,{className:"h-5 w-5 text-white"})}),(0,r.jsxs)("h3",{className:"why-recommend-title",children:["\uD83D\uDCA1 Warum empfehlen wir ",P(e),"?"]})]}),(0,r.jsxs)("p",{className:"why-recommend-subtitle",children:["Unsere KI hat ",t.length," wichtige Marktfaktoren analysiert:"]}),r.jsx("div",{className:"strategy-cards",children:M.map((t,a)=>{let n=_[t.strategy]||{emoji:"\uD83D\uDCCA",title:t.strategy,getStory:()=>t.reasoning||"Keine Details verf\xfcgbar.",getBasedOn:()=>["Daten aus KI-Analyse"],colorClass:"competitive"},l=D(t);return(0,r.jsxs)("div",{className:`strategy-card ${n.colorClass}`,children:[(0,r.jsxs)("div",{className:"strategy-header",children:[(0,r.jsxs)("div",{className:"strategy-title-row",children:[r.jsx("div",{className:"strategy-number",children:a+1}),(0,r.jsxs)("div",{className:`strategy-icon-container ${n.colorClass}`,children:["competitive"===n.colorClass&&r.jsx(F,{className:"h-4 w-4 text-white"}),"demand"===n.colorClass&&r.jsx(S.Z,{className:"h-4 w-4 text-white"}),"inventory"===n.colorClass&&r.jsx(A.Z,{className:"h-4 w-4 text-white"}),"costs"===n.colorClass&&r.jsx(z,{className:"h-4 w-4 text-white"})]}),r.jsx("h4",{className:"strategy-title",children:n.title})]}),k(t.confidence)]}),r.jsx("p",{className:"strategy-text",children:n.getStory({competitorData:i,currentPrice:s,recommendedPrice:e,strategy:t})}),(0,r.jsxs)("div",{className:`strategy-impact ${l.isDecrease?"negative":"positive"}`,children:[l.isDecrease?r.jsx(F,{className:"strategy-impact-icon"}):r.jsx(S.Z,{className:"strategy-impact-icon"}),(0,r.jsxs)("span",{children:["Preisimpact: ",l.isDecrease?"-":"+",l.formatted," ",l.isDecrease?"Senkung empfohlen":"Erh\xf6hung empfohlen"]})]}),(0,r.jsxs)("div",{className:"strategy-details",children:[(0,r.jsxs)("button",{className:"strategy-details-toggle",onClick:()=>v(e=>({...e,[a]:!e[a]})),children:[r.jsx(E,{className:"h-3 w-3"}),"Basiert auf..."]}),j[a]&&r.jsx("div",{className:"mt-3 p-3 border",style:{backgroundColor:"#1e293b",borderColor:"#475569"},children:r.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm",style:{color:"#cbd5e1"},children:n.getBasedOn({competitorData:i,strategy:t,currentPrice:s}).map((e,s)=>r.jsx("li",{children:e},s))})})]})]},a)})})]}),(0,r.jsxs)("div",{className:"calculation-section",children:[(0,r.jsxs)("div",{className:"calculation-header",children:[r.jsx("div",{className:"calculation-icon",children:r.jsx(p,{className:"h-5 w-5 text-white"})}),(0,r.jsxs)("h3",{className:"calculation-title",children:["\uD83E\uDDEE Wie wird ",y<0?"-":"+",P(Math.abs(y))," berechnet?"]})]}),(0,r.jsxs)("div",{className:"calculation-notice",children:[r.jsx(w,{className:"calculation-notice-icon"}),(0,r.jsxs)("div",{children:[r.jsx("strong",{children:"Warum nicht die einfache Summe?"})," Jede Strategie wird basierend auf ihrer",r.jsx("strong",{children:" Datenqualit\xe4t unterschiedlich stark gewichtet"}),". Faktoren mit exzellenter Datenqualit\xe4t (z.B. Wettbewerbspreise) haben mehr Einfluss als Faktoren mit guter Datenqualit\xe4t (z.B. Nachfrage-Trends). Die gewichtete Berechnung stellt sicher, dass weniger zuverl\xe4ssige Daten nicht zu starken Einfluss haben."]})]}),(0,r.jsxs)("div",{className:"weighted-section",children:[r.jsx("div",{className:"weighted-header",children:"\uD83D\uDCCA Einzelne Strategien-Empfehlungen:"}),r.jsx("div",{className:"strategies-list",children:M.map((e,s)=>{let t=D(e),a=_[e.strategy]||{colorClass:"competitive"};return(0,r.jsxs)("div",{className:"strategy-row",children:[(0,r.jsxs)("div",{className:"strategy-row-label",children:["competitive"===a.colorClass&&r.jsx(F,{className:"strategy-row-icon text-red-500"}),"demand"===a.colorClass&&r.jsx(S.Z,{className:"strategy-row-icon text-green-500"}),"inventory"===a.colorClass&&r.jsx(A.Z,{className:"strategy-row-icon text-orange-500"}),"costs"===a.colorClass&&r.jsx(z,{className:"strategy-row-icon text-blue-500"}),(0,r.jsxs)("span",{children:["\uD83D\uDCCA ",a.title||e.strategy," (",e.confidence>=.9?"Datenqualit\xe4t: Exzellent":e.confidence>=.8?"Datenqualit\xe4t: Sehr gut":"Datenqualit\xe4t: Gut",")"]})]}),(0,r.jsxs)("div",{className:`strategy-row-value ${t.isDecrease?"negative":"positive"}`,children:[t.isDecrease?"-":"+",t.formatted]})]},s)})})]}),(0,r.jsxs)("div",{className:"weighted-section",children:[r.jsx("div",{className:"weighted-header",children:"\uD83D\uDCC8 Gewichtete Beitr\xe4ge (Datenqualit\xe4t \xd7 Basis-Gewicht):"}),r.jsx("div",{className:"weighted-bars",children:K.map((e,s)=>{let t=_[M[s]?.strategy]||{colorClass:"demand"},a=e.weight/100*100;return(0,r.jsxs)("div",{className:"weighted-bar",children:[(0,r.jsxs)("div",{className:"weighted-bar-header",children:[r.jsx("span",{className:"weighted-bar-label",children:_[M[s]?.strategy]?.title||M[s]?.strategy}),(0,r.jsxs)("span",{className:"weighted-bar-value",children:[a.toFixed(1),"% \xd7 Datenqualit\xe4t: ",e.confidence>=.9?"Exzellent":e.confidence>=.8?"Sehr gut":"Gut"," = ",(0,r.jsxs)("strong",{children:[e.weightedImpact>0?"+":"",P(e.weightedImpact)]})]})]}),r.jsx("div",{className:"weighted-bar-container",children:r.jsx("div",{className:`weighted-bar-fill ${t.colorClass}`,style:{width:`${a}%`}})})]},s)})})]}),(0,r.jsxs)("div",{className:"final-sum-box",children:[(0,r.jsxs)("div",{className:"final-sum-header",children:[r.jsx($,{className:"final-sum-icon"}),r.jsx("span",{className:"final-sum-label",children:"\uD83D\uDCCA Finale Summe (Gewichteter Durchschnitt):"})]}),r.jsx("div",{className:"final-sum-calculation",children:"Summe aller gewichteten Beitr\xe4ge"}),(0,r.jsxs)("div",{className:"final-sum-value",children:[y<0?"-":"+",P(Math.abs(y))]}),(0,r.jsxs)("div",{className:"final-sum-percentage",children:["(",y<0?"-":"+",Math.abs(N).toFixed(1),"%)"]})]})]})]})}function Z({recommendation:e,onApply:s,onDismiss:t,onRefresh:i}){let n=y("pricing"),l=y("common");y("market");let[c,o]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!1),h=e.recommended_price,j=h-e.current_price,v=j/e.current_price*100,N=j>0,w=0===j,k=e.margin_analysis&&!e.margin_analysis.is_safe,_=e.warnings?.some(e=>"HIGH"===e.severity||"high"===e.severity),C=Math.max(0,Math.min(1,(void 0!==e.overall_confidence?e.overall_confidence/100:e.confidence)??.5)),S=function(e){var s;let t=e.recommended_price-e.current_price,r=Math.abs(e.price_change_pct),a=(s=t<0,`Empfohlene ${s?"Preissenkung":"Preiserh\xf6hung"} um ${r.toFixed(1)}%, ${s?"um wettbewerbsf\xe4hig zu bleiben":"aufgrund gestiegener Nachfrage"}.`);return{headline:a,bulletPoints:function(e){let s=[];if(e.competitor_context){var t;let r=e.competitor_context,a={most_expensive:"Teuerste Option",above_average:"\xdcber dem Durchschnitt",average:"Marktdurchschnitt",below_average:"Unter dem Durchschnitt",cheapest:"G\xfcnstigste Option",unknown:"Unbekannt"}[r.position]||"Unbekannt",i=r.price_diff_pct>0?`${r.price_diff_pct.toFixed(1)}% \xfcber`:`${Math.abs(r.price_diff_pct).toFixed(1)}% unter`;s.push(`Du liegst aktuell ${i} dem durchschnittlichen Marktpreis (${(t=r.avg_price,new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(t))}).`),"unknown"!==a&&s.push(`Deine Position: ${a} (${r.competitor_count} Wettbewerber analysiert).`)}if(e.strategies?.inventory){let t=e.strategies.inventory;if(t.reasoning.includes("Normaler Bestand")||t.reasoning.includes("normal")){let e=t.reasoning.match(/\((\d+)\)/),r=e?e[1]:"";s.push(`Dein Bestand ist normal${r?` (${r} St\xfcck)`:""} – es besteht kein akuter Abverkaufsdruck.`)}else t.reasoning.includes("Hoher Bestand")||t.reasoning.includes("hoch")?s.push("Dein Bestand ist hoch – eine Preissenkung k\xf6nnte den Absatz ankurbeln."):(t.reasoning.includes("Niedriger Bestand")||t.reasoning.includes("niedrig"))&&s.push("Dein Bestand ist niedrig – du k\xf6nntest den Preis erh\xf6hen, ohne Absatz zu verlieren.")}if(e.strategies?.cost){let t=e.strategies.cost.reasoning.match(/(\d+)%/i),r=t?t[1]:"30";s.push(`Die empfohlene Anpassung h\xe4lt deine Zielmarge von ca. ${r}% ein.`)}if(e.margin&&(e.margin.is_safe&&e.margin.margin_pct>=20?s.push(`Deine Marge bleibt mit ${e.margin.margin_pct.toFixed(1)}% auf einem gesunden Niveau.`):e.margin.margin_pct<20&&s.push(`Achtung: Deine Marge liegt bei ${e.margin.margin_pct.toFixed(1)}% – unter dem empfohlenen Minimum von 20%.`)),e.strategies?.demand){let t=e.strategies.demand;t.confidence>.6&&!t.reasoning.includes("Zu wenig Daten")&&(t.reasoning.includes("wachsend")||t.reasoning.includes("steigend")?s.push("Die Nachfrage zeigt einen positiven Trend – eine moderate Preiserh\xf6hung k\xf6nnte m\xf6glich sein."):(t.reasoning.includes("r\xfcckl\xe4ufig")||t.reasoning.includes("sinkend"))&&s.push("Die Nachfrage ist r\xfcckl\xe4ufig – eine Preissenkung k\xf6nnte den Absatz stabilisieren."))}return s.length<2&&(s.push("Die Empfehlung basiert auf einer Analyse deiner aktuellen Preislage und Marktvergleichen."),s.push("Der empfohlene Preis optimiert deine Wettbewerbsposition bei gleichbleibender Profitabilit\xe4t.")),s.slice(0,5)}(e),confidence:function(e){let s=(100*e.confidence).toFixed(1),t=e.ml_predictions?.combined_ml_confidence?(100*e.ml_predictions.combined_ml_confidence).toFixed(1):null,r=[];e.confidence>=.8?r.push("Hohe Sicherheit"):e.confidence>=.6?r.push("Moderate Sicherheit"):r.push("Eingeschr\xe4nkte Sicherheit"),r.push(`${s}%`);let a=[];return e.competitor_context&&a.push("Wettbewerbsvergleich"),e.strategies?.cost&&a.push("Kosten"),e.strategies?.inventory&&a.push("Bestand"),t&&a.push("historische Daten"),a.length>0&&r.push(`basierend auf ${a.join(", ")}`),t&&parseFloat(t)>90&&r.push(`und ML-Vorhersage (${t}%)`),r.join(": ")+"."}(e),insights:function(e){if(e.has_insights){let s=[];return e.competitor_context&&("most_expensive"===e.competitor_context.position&&e.competitor_context.price_diff_pct>30?s.push(`Du bist deutlich teurer als der Markt (${e.competitor_context.price_diff_pct.toFixed(1)}% \xfcber Durchschnitt).`):"cheapest"===e.competitor_context.position&&Math.abs(e.competitor_context.price_diff_pct)>20&&s.push(`Du bist deutlich g\xfcnstiger als der Markt – eine moderate Preiserh\xf6hung k\xf6nnte m\xf6glich sein.`)),e.margin&&!e.margin.is_safe&&s.push(`Achtung: Die empfohlene Preis\xe4nderung w\xfcrde deine Marge auf ${e.margin.margin_pct.toFixed(1)}% reduzieren.`),s.join(" ")||"Aktuell liegen keine besonderen Auff\xe4lligkeiten vor."}return"Aktuell liegen keine besonderen Auff\xe4lligkeiten vor. Die Empfehlung basiert auf Standardmodellen und den aktuellen Marktpreisen."}(e)}}({product_title:e.product_title||e.product_name,product_name:e.product_name,current_price:e.current_price,recommended_price:e.recommended_price,price_change_pct:e.price_change_pct,confidence:C,strategies:function(e){if(e.strategy_details&&Array.isArray(e.strategy_details)){let s={};return e.strategy_details.forEach(e=>{s[e.strategy]={price:e.recommended_price,confidence:e.confidence,strategy:e.strategy,reasoning:e.reasoning||""}}),s}let s=e.reasoning;if("object"==typeof s&&s?.strategies)return s.strategies}(e),competitor_context:function(e){if(e.competitor_data){let s=e.competitor_data,t=e.recommended_price,r="unknown";return s.avg&&(r=t>=.95*s.max?"most_expensive":t<=1.05*s.min?"cheapest":t>1.1*s.avg?"above_average":t<.9*s.avg?"below_average":"average"),{position:r,avg_price:s.avg||0,min_price:s.min||0,max_price:s.max||0,price_diff_pct:s.avg?(t-s.avg)/s.avg*100:0,competitor_count:s.prices?.length||0}}}(e),ml_predictions:function(e){let s=e.reasoning;if("object"==typeof s&&s?.ml_predictions)return s.ml_predictions}(e),margin:e.margin_analysis?{is_safe:e.margin_analysis.is_safe,margin_pct:e.margin_analysis.margin||0}:void 0,has_insights:e.warnings&&e.warnings.length>0}),F=S.confidence,A=async()=>{if(s){o(!0);try{await s(h)}catch(e){console.error("Failed to apply price:",e)}finally{o(!1)}}},z=async()=>{if(i){m(!0);try{await i()}catch(e){console.error("Failed to refresh:",e)}finally{m(!1)}}},E=e.product_title||e.product_name||`Product ${e.product_id}`,$=e.generated_at||e.created_at||new Date().toISOString();return(0,r.jsxs)("div",{className:"shadow-lg border overflow-hidden",style:{backgroundColor:"#1e293b",borderColor:"#475569"},children:[e.strategy_details&&e.strategy_details.length>0?r.jsx(K,{recommendedPrice:h,currentPrice:e.current_price,strategyDetails:e.strategy_details,competitorData:e.competitor_data,productName:E,productId:e.product_id,confidence:e.confidence,onApply:s?A:void 0,onDismiss:t,onRefresh:i?z:void 0,createdAt:$}):(0,r.jsxs)("div",{className:"p-6 pb-4",style:{background:"linear-gradient(to bottom right, #1e293b, #0f172a)"},children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-xl font-semibold mb-1",style:{color:"#f1f5f9"},children:E}),(0,r.jsxs)("p",{className:"text-xs",style:{color:"#94a3b8"},children:[n("product_id"),": ",e.product_id]})]})}),S.headline&&r.jsx("div",{className:"mb-6",children:r.jsx("p",{className:"text-base font-medium",style:{color:"#f1f5f9"},children:S.headline})}),(0,r.jsxs)("div",{className:"mb-6",style:{backgroundColor:"#0f172a",borderRadius:"12px",padding:"20px",border:"1px solid #334155"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:r.jsx(x,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#f1f5f9",margin:0},children:["Unsere KI ist ",Math.round(100*C),"% sicher"]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:"#94a3b8"},children:"Sicherheitswert"}),(0,r.jsxs)("span",{style:{fontSize:"18px",fontWeight:"600",color:"#10b981"},children:[Math.round(100*C),"%"]})]}),r.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:"#1e293b",borderRadius:"4px",overflow:"hidden"},children:r.jsx("div",{style:{width:`${100*C}%`,height:"100%",background:"linear-gradient(90deg, #10b981 0%, #059669 100%)",borderRadius:"4px",transition:"width 0.3s ease"}})})]}),F&&r.jsx("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#1e293b",borderRadius:"8px",border:"1px solid #334155"},children:r.jsx("p",{style:{fontSize:"14px",color:"#cbd5e1",lineHeight:"1.6",margin:0},children:"string"==typeof F?F:JSON.stringify(F)})})]}),(0,r.jsxs)("div",{className:"mb-6",style:{backgroundColor:"#0f172a",borderRadius:"12px",padding:"20px",border:"1px solid #334155"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:r.jsx(u.Z,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#f1f5f9",margin:0},children:["\uD83D\uDCA1 Warum empfehlen wir ",P(h),"?"]})]}),r.jsx("p",{style:{fontSize:"14px",color:"#cbd5e1",lineHeight:"1.6",marginBottom:"16px"},children:S.headline||S.confidence||"Unsere KI hat mehrere Marktfaktoren analysiert, um diesen Preis zu empfehlen."}),(0,r.jsxs)("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#1e293b",borderRadius:"8px",border:"1px solid #334155"},children:[r.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"#94a3b8",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.05em"},children:"\uD83D\uDCCA Was analysiert unsere KI?"}),(0,r.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:0,display:"flex",flexDirection:"column",gap:"8px"},children:[(0,r.jsxs)("li",{style:{fontSize:"13px",color:"#cbd5e1",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(x,{className:"h-4 w-4 text-green-400"}),r.jsx("span",{children:"Echte Verkaufsdaten aus deinem Shopify-Shop"})]}),(0,r.jsxs)("li",{style:{fontSize:"13px",color:"#cbd5e1",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(x,{className:"h-4 w-4 text-green-400"}),r.jsx("span",{children:"Aktuelle Preise deiner 5-10 wichtigsten Konkurrenten"})]}),(0,r.jsxs)("li",{style:{fontSize:"13px",color:"#cbd5e1",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(x,{className:"h-4 w-4 text-green-400"}),r.jsx("span",{children:"4 spezialisierte Machine-Learning-Modelle"})]}),(0,r.jsxs)("li",{style:{fontSize:"13px",color:"#cbd5e1",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(x,{className:"h-4 w-4 text-green-400"}),r.jsx("span",{children:"Deine eingetragenen Kosten und bisherigen Margen"})]})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",style:{backgroundColor:"#0f172a",borderRadius:"12px",padding:"20px",border:"1px solid #334155"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)"},children:r.jsx(p,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#f1f5f9",margin:0},children:["\uD83E\uDDEE Wie wird ",j>0?"+":"",P(Math.abs(j))," berechnet?"]})]}),r.jsx("p",{style:{fontSize:"14px",color:"#cbd5e1",lineHeight:"1.6",marginBottom:"16px"},children:"Der empfohlene Preis basiert auf einer gewichteten Analyse mehrerer Faktoren. Jeder Faktor wird basierend auf seiner Datenqualit\xe4t unterschiedlich stark gewichtet."}),r.jsx("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#1e293b",borderRadius:"8px",border:"1px solid #334155"},children:(0,r.jsxs)("div",{style:{fontSize:"13px",color:"#cbd5e1",lineHeight:"1.6"},children:[(0,r.jsxs)("div",{style:{marginBottom:"12px"},children:[r.jsx("strong",{style:{color:"#f1f5f9"},children:"Aktueller Preis:"})," ",P(e.current_price)]}),(0,r.jsxs)("div",{style:{marginBottom:"12px"},children:[r.jsx("strong",{style:{color:"#f1f5f9"},children:"Empfohlener Preis:"})," ",P(h)]}),(0,r.jsxs)("div",{style:{marginBottom:"12px"},children:[r.jsx("strong",{style:{color:"#f1f5f9"},children:"Preis\xe4nderung:"}),(0,r.jsxs)("span",{style:{color:j>0?"#10b981":"#f59e0b",marginLeft:"8px"},children:[j>0?"+":"",P(j)," (",j>0?"+":"",Math.abs(v).toFixed(1),"%)"]})]}),e.strategy&&(0,r.jsxs)("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #334155"},children:[r.jsx("strong",{style:{color:"#f1f5f9"},children:"Hauptstrategie:"})," ",e.strategy]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex flex-col justify-between p-4 border rounded-lg",style:{backgroundColor:"#0f172a",borderColor:"#475569",minHeight:"120px"},children:[r.jsx("p",{className:"text-xs uppercase tracking-wide mb-2 font-medium",style:{color:"#94a3b8"},children:n("current")}),r.jsx("p",{className:"text-3xl font-bold",style:{color:"#f1f5f9"},children:P(e.current_price)})]}),(0,r.jsxs)("div",{className:"flex flex-col justify-between p-4 border-2 rounded-lg",style:{backgroundColor:_?"#7f1d1d":k?"#78350f":"#064e3b",borderColor:_?"#ef4444":k?"#f59e0b":"#10b981",minHeight:"120px"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-xs uppercase tracking-wide font-medium",style:{color:_?"#fca5a5":k?"#fbbf24":"#86efac"},children:n("recommended")}),r.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold",style:{backgroundColor:_?"rgba(252, 165, 165, 0.2)":k?"rgba(251, 191, 36, 0.2)":"rgba(16, 185, 129, 0.2)",color:_?"#fca5a5":k?"#fbbf24":"#86efac"},children:"⭐ EMPFOHLEN"})]}),r.jsx("p",{className:"text-3xl font-bold",style:{color:_?"#fca5a5":k?"#fbbf24":"#86efac"},children:P(h)}),r.jsx("div",{className:"mt-2 flex items-center gap-2",children:(0,r.jsxs)("span",{className:"text-sm font-medium",style:{color:j>0?"#10b981":j<0?"#f59e0b":"#94a3b8"},children:[j>0?"↑":j<0?"↓":"="," ",P(Math.abs(j)),"(",j>0?"+":"",Math.abs(v).toFixed(1),"%)"]})})]})]}),r.jsx("div",{className:"flex items-center justify-center mb-4",children:w?r.jsx("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full",style:{backgroundColor:"#334155"},children:r.jsx("span",{className:"font-medium",style:{color:"#94a3b8"},children:n("no_change")})}):(0,r.jsxs)("div",{className:`flex items-center gap-2 px-4 py-2 rounded-full ${N?"bg-blue-100":"bg-orange-100"}`,children:[r.jsx("span",{className:"text-2xl",children:N?"\uD83D\uDCC8":"\uD83D\uDCC9"}),(0,r.jsxs)("span",{className:`text-lg font-bold ${N?"text-blue-700":"text-orange-700"}`,children:[j>0?"+":"",P(j)]}),(0,r.jsxs)("span",{className:`text-lg font-semibold ${N?"text-blue-600":"text-orange-600"}`,children:["(",v>0?"+":"",function(e,s=1){return`${e>=0?"+":""}${e.toFixed(s)}%`}(v),")"]})]})}),r.jsx("div",{className:"mt-6 px-6",children:r.jsx(D,{confidence:C,reasoning:S.confidence,compact:!1,confidenceBasis:e.confidence_basis})})]}),(!e.strategy_details||0===e.strategy_details.length)&&(s||t)&&r.jsx(M,{recommendedPrice:h,onApply:A,onDismiss:t||(()=>{}),isApplying:c,isDisabled:_,marginAnalysis:e.margin_analysis}),_&&r.jsx("div",{className:"px-6 py-4 border-t",style:{backgroundColor:"#7f1d1d",borderColor:"#ef4444"},children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx(g,{className:"w-6 h-6 flex-shrink-0 mt-0.5",style:{color:"#fca5a5"}}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-semibold mb-1",style:{color:"#f1f5f9"},children:n("critical_warning")}),e.warnings?.filter(e=>"HIGH"===e.severity||"high"===e.severity).map((e,s)=>r.jsx("p",{className:"text-sm mb-2",style:{color:"#fca5a5"},children:e.message},s))]})]})}),(0,r.jsxs)("div",{className:"px-6 py-3 border-t flex items-center justify-between",style:{backgroundColor:"#0f172a",borderColor:"#334155"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",style:{color:"#94a3b8"},children:[r.jsx(b,{className:"w-4 h-4"}),r.jsx("span",{children:function(e){let s=new Date,t=new Date(e),r=Math.floor((s.getTime()-t.getTime())/6e4);if(r<1)return"just now";if(1===r)return"1 minute ago";if(r<60)return`${r} minutes ago`;let a=Math.floor(r/60);if(1===a)return"1 hour ago";if(a<24)return`${a} hours ago`;let i=Math.floor(a/24);return 1===i?"1 day ago":`${i} days ago`}($)})]}),i&&(0,r.jsxs)("button",{onClick:z,disabled:d,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-50 transition-colors disabled:opacity-50",children:[r.jsx(f.Z,{className:`w-4 h-4 ${d?"animate-spin":""}`}),r.jsx("span",{children:l("refresh")})]})]})]})}function I({productId:e,competitorCount:s,salesDataDays:t,onRunAnalysis:a}){return(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,r.jsxs)("h3",{className:"font-bold text-xl text-yellow-800 mb-2",children:["⚠️ Erstmalige Analyse f\xfcr Produkt #",e]}),0===s&&r.jsx("div",{className:"bg-white p-4 rounded-lg border-l-4 border-orange-400 mb-3",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-2xl",children:"\uD83D\uDD0D"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Wettbewerbsanalyse l\xe4uft..."}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Wir sammeln gerade Preisdaten von Wettbewerbern f\xfcr dieses Produkt."}),a&&r.jsx("button",{onClick:a,className:"text-blue-600 underline hover:text-blue-800 text-sm font-medium mt-2",children:"Jetzt sofort analysieren →"})]})]})}),t<7&&r.jsx("div",{className:"bg-white p-4 rounded-lg border-l-4 border-blue-400",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-2xl",children:"\uD83D\uDCC8"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Verkaufsdaten werden gesammelt"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Aktuell: ",(0,r.jsxs)("span",{className:"font-semibold",children:[t," Tage"]}),". Optimal: ",r.jsx("span",{className:"font-semibold text-green-600",children:"30+ Tage"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Mehr Verkaufsdaten f\xfchren zu pr\xe4ziseren Preisempfehlungen."})]})]})}),s>0&&t>=7&&r.jsx("div",{className:"bg-green-50 p-4 rounded-lg border-l-4 border-green-400",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-2xl",children:"✅"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Datenbasis vorhanden"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Wir haben genug Daten f\xfcr eine erste Analyse. Die Empfehlung wird mit mehr Daten pr\xe4ziser."})]})]})})]})}function q({productId:e}){let[s,t]=(0,a.useState)(null),[i,n]=(0,a.useState)(!1),[l,h]=(0,a.useState)(!1),[x,u]=(0,a.useState)(null),{currentShop:p,isDemoMode:g}=(0,c.L)(),b=async()=>{if(!e)return;let s="string"==typeof e?parseInt(e,10):e;if(isNaN(s)){u("Ung\xfcltige Produkt-ID");return}n(!0),u(null);try{console.log("[LatestRecommendation] \uD83D\uDD04 Generating FRESH recommendation for product:",s);let e=await (0,d.n8)(s);console.log("[LatestRecommendation] ✅ Fresh recommendation generated:",e);let r=e.recommendation||e;if(r){console.log("[LatestRecommendation] Recommendation data:",r),r.product_name||(r.product_name=e.product_name||r.product?.title||r.product_title||`Product ${r.product_id}`),!r.current_price&&e.current_price&&(r.current_price=e.current_price);let s=r.reasoning;if("string"==typeof r.reasoning)try{s=JSON.parse(r.reasoning)}catch{s=r.reasoning}r.reasoning=s,e.confidence&&(r.feature_confidence=e.confidence,void 0!==e.confidence.overall_confidence&&(r.confidence=e.confidence.overall_confidence/100,r.overall_confidence=e.confidence.overall_confidence,console.log(`[LatestRecommendation] Using overall_confidence: ${e.confidence.overall_confidence}%`))),console.log("[LatestRecommendation] ✅ Setting fresh recommendation with all fields:",r),t(r);let a=r.overall_confidence??(r.confidence?Math.round(100*r.confidence):0);o.toast.success("Recommendation generiert! \uD83C\uDFAF",{description:`Confidence: ${a}% | Strategy: ${r.strategy||"N/A"}`})}else console.log("[LatestRecommendation] No recommendation in response"),t(null),o.toast.error("Keine Recommendation erhalten",{description:"Bitte versuche es erneut"})}catch(e){console.error("[LatestRecommendation] Error generating recommendation:",e),console.error("[LatestRecommendation] Error details:",e.response||e.message),u(e.message||"Fehler beim Generieren der Empfehlung"),t(null),o.toast.error("Fehler beim Generieren der Recommendation",{description:e.message||"Bitte versuche es erneut"})}finally{n(!1)}},f=async()=>{if(!e){alert("Bitte w\xe4hle eine Produkt-ID aus!");return}if(isNaN("string"==typeof e?parseInt(e,10):e)){alert("Ung\xfcltige Produkt-ID");return}h(!0),u(null);try{console.log("[LatestRecommendation] \uD83D\uDD04 Manual refresh requested"),await b()}catch(e){console.error("[LatestRecommendation] Error generating recommendation:",e),u(e.message||"Fehler beim Generieren der Empfehlung"),o.toast.error("Fehler beim Aktualisieren",{description:e.message||"Bitte versuche es erneut"})}finally{h(!1)}},j=async s=>{if(!e){alert("Bitte w\xe4hle eine Produkt-ID aus!");return}if(g){alert("Demo Mode: Preis kann nicht auf Shopify angewendet werden.");return}if(!p?.id){alert("Kein Shop ausgew\xe4hlt. Bitte w\xe4hle einen Shop aus.");return}let t="string"==typeof e?parseInt(e,10):e;if(isNaN(t)){alert("Ung\xfcltige Produkt-ID");return}try{console.log("[LatestRecommendation] Applying price:",{productIdNum:t,price:s,shopId:p.id});let e=await m({product_id:t,recommended_price:s});console.log("[LatestRecommendation] Price applied successfully:",e),o.toast.success("Preis erfolgreich angewendet! ✓",{description:`Neuer Preis: €${e.new_price?.toFixed(2)||s.toFixed(2)}`}),await b()}catch(e){throw console.error("[LatestRecommendation] Error applying price:",e),o.toast.error("Fehler beim Anwenden des Preises",{description:e.message||"Unbekannter Fehler"}),e}};if((0,a.useEffect)(()=>{b()},[e]),i||l)return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,r.jsxs)("div",{className:"text-gray-600 text-center",children:[r.jsx("p",{className:"font-medium",children:"Analysiere aktuelle Marktdaten..."}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Pr\xfcfe Wettbewerber, analysiere 90 Tage Verkaufsdaten..."})]})]});if(x)return(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-red-700 text-sm",children:x}),r.jsx("button",{onClick:b,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Erneut versuchen"})]});if(!s)return r.jsx(I,{productId:e,competitorCount:0,salesDataDays:0,onRunAnalysis:f});let v=!s.confidence||s.confidence===-1/0||s.confidence<0||isNaN(s.confidence),y=s.competitor_avg_price?1:0,N=s.sales_7d?7:0;if(v||0===y&&N<7)return r.jsx(I,{productId:e,competitorCount:y,salesDataDays:N,onRunAnalysis:f});let w=s.reasoning,k="object"==typeof w&&null!==w?w:{},_=k.strategies||{},D=[];D=s.strategy_details&&Array.isArray(s.strategy_details)?s.strategy_details:s.strategyDetails&&Array.isArray(s.strategyDetails)?s.strategyDetails:Object.entries(_).map(([e,t])=>({strategy:e,recommended_price:t?.price||t?.recommended_price||s.recommended_price,confidence:t?.confidence||.5,reasoning:t?.reasoning||"",competitor_context:t?.competitor_context||t?.competitive?.competitor_context}));let C=_.competitive?.competitor_context||_.competitive?.competitor_context,P=s.competitor_avg_price?{avg:s.competitor_avg_price,min:C?.min_price||.9*s.competitor_avg_price,max:C?.max_price||1.1*s.competitor_avg_price,prices:C?.sources?.map((e,t)=>({source:e,price:s.competitor_avg_price*(.9+.05*t)}))||[]}:void 0,M=void 0!==s.overall_confidence?s.overall_confidence/100:s.confidence,S={product_id:s.product_id,product_name:s.product_name,current_price:s.current_price,recommended_price:s.recommended_price,price_change:s.recommended_price-s.current_price,price_change_pct:s.price_change_pct,confidence:M,overall_confidence:s.overall_confidence,reasoning:"string"==typeof w?w:k.summary||JSON.stringify(k),strategy_details:D.length>0?D:void 0,competitor_data:P,created_at:s.created_at,generated_at:s.created_at,id:s.id,status:s.status,strategy:s.strategy,ml_confidence:s.ml_confidence,base_confidence:s.base_confidence,applied_at:s.applied_at,applied_price:s.applied_price};return r.jsx("div",{className:"space-y-6",children:r.jsx(Z,{recommendation:S,onRefresh:f,onDismiss:()=>{},onApply:j})})}let R=(0,h.Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),B=(0,h.Z)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),T=(0,h.Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),L=(0,h.Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),W=(0,h.Z)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var V=t(476);let U=e=>null,G=(e,s)=>{},H=e=>{let s=(e.title||"").toLowerCase(),t=(e.source||"").toLowerCase();return s.includes("gebraucht")||s.includes("used")||t.includes("kleinanzeigen")||t.includes("willhaben")?"used":s.includes("refurbished")||s.includes("general\xfcberholt")?"refurbished":"new"};function O({productId:e,currentPrice:s}){let[t,i]=(0,a.useState)(!1),[n,l]=(0,a.useState)(null),[c,o]=(0,a.useState)(null),[m,h]=(0,a.useState)("all");(0,a.useEffect)(()=>{let s=U(e);s&&l(s)},[e]);let u=async(s=!1)=>{i(!0),o(null);try{let t=await (0,d.Ow)(e,{maxResults:5,forceRefresh:s});l(t),G(e,t)}catch(s){console.error("[CompetitorAnalysis] Fehler beim Laden:",s);let e="Fehler beim Laden der Wettbewerber-Daten";s?.response?.status===404?e="Produkt nicht gefunden. Pr\xfcfe Shop-Auswahl und Produkt-ID.":s?.response?.status===429?e="API-Limit erreicht. Bitte sp\xe4ter erneut versuchen.":s?.response?.status===500?e="Server-Fehler. Bitte sp\xe4ter erneut versuchen oder Support kontaktieren.":s?.message&&(e=s.message),o(e)}finally{i(!1)}},p=(()=>{if(!n||!n.competitors||0===n.competitors.length)return null;let e=n.competitors.map(e=>e.price),t=Math.min(...e),r=Math.max(...e),a=e.reduce((e,s)=>e+s,0)/e.length,i=n.competitors.filter(e=>"new"===H(e)),l=n.competitors.filter(e=>"used"===H(e)),c=n.competitors.filter(e=>"refurbished"===H(e)),o=i.length>0?Math.min(...i.map(e=>e.price)):null,d=i.length>0?Math.max(...i.map(e=>e.price)):null,m=l.length>0?Math.min(...l.map(e=>e.price)):null;return{minPrice:t,maxPrice:r,avgPrice:a,priceSpread:r-t,yourPriceDiff:s-a,percentAboveAvg:a>0?(s-a)/a*100:0,competitorCount:n.competitors.length,newCount:i.length,usedCount:l.length,refurbishedCount:c.length,newMin:o,newMax:d,usedMin:m}})(),b=(()=>{if(!p)return{label:"Unbekannt",color:"gray",explanation:""};let e=p.priceSpread/p.avgPrice>.4,s=p.competitorCount<3;return e||s?{label:"Eingeschr\xe4nkt zuverl\xe4ssig",color:"orange",explanation:e?"sehr hohe Preisstreuung":"zu wenig vergleichbare Angebote"}:{label:"Zuverl\xe4ssig",color:"green",explanation:""}})(),j=n?.competitors?n.competitors.filter(e=>"all"===m||H(e)===m).sort((e,s)=>e.price-s.price):[],v=n?.competitors?n.competitors.filter(e=>"new"===H(e)).length:0,y=n?.competitors?n.competitors.filter(e=>"refurbished"===H(e)).length:0;return t?r.jsx("div",{className:"competitor-content",children:(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Suche Wettbewerber-Preise..."})]})}):c?r.jsx("div",{className:"competitor-content",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:[r.jsx("p",{className:"text-sm font-medium mb-1",children:"⚠️ Fehler"}),r.jsx("p",{className:"text-sm",children:c})]})}):n?p?(0,r.jsxs)("div",{className:"competitor-content",children:[(0,r.jsxs)("div",{className:"competitor-header",children:[(0,r.jsxs)("div",{className:"competitor-title-row",children:[r.jsx("div",{className:"competitor-icon-main",children:r.jsx(B,{className:"h-7 w-7 text-white"})}),r.jsx("h3",{className:"competitor-title",children:"Wettbewerbsanalyse"})]}),(0,r.jsxs)("div",{className:"competitor-actions",children:[n&&(0,r.jsxs)("button",{className:"btn-refresh",onClick:()=>u(!0),disabled:t,children:[r.jsx(f.Z,{className:"h-4 w-4"}),"Aktualisieren"]}),(0,r.jsxs)("button",{className:"btn-search",onClick:()=>u(!1),disabled:t,children:[r.jsx(R,{className:"h-4 w-4"}),"Erneut suchen"]})]})]}),(0,r.jsxs)("div",{className:"price-position-hero",children:[(0,r.jsxs)("div",{className:"price-position-header",children:[r.jsx("div",{className:"price-position-icon",children:r.jsx($,{className:"h-6 w-6 text-green-600"})}),r.jsx("h4",{className:"price-position-title",children:"\uD83D\uDCCA Deine Marktposition auf einen Blick"})]}),(0,r.jsxs)("div",{className:"price-scale-container",children:[(0,r.jsxs)("div",{className:"price-scale-labels",children:[(0,r.jsxs)("div",{className:"price-scale-label cheapest",children:[r.jsx("div",{className:"price-scale-label-icon",children:"\uD83D\uDCB0"}),r.jsx("div",{className:"price-scale-label-text",children:"G\xfcnstigster"}),r.jsx("div",{className:"price-scale-value",children:P(p.minPrice)})]}),(0,r.jsxs)("div",{className:"price-scale-label average",children:[r.jsx("div",{className:"price-scale-label-icon",children:"⚖️"}),r.jsx("div",{className:"price-scale-label-text",children:"\xd8-Preis"}),r.jsx("div",{className:"price-scale-value",children:P(p.avgPrice)})]}),(0,r.jsxs)("div",{className:"price-scale-label expensive",children:[r.jsx("div",{className:"price-scale-label-icon",children:"\uD83D\uDCB8"}),r.jsx("div",{className:"price-scale-label-text",children:"Teuerster"}),r.jsx("div",{className:"price-scale-value",children:P(p.maxPrice)})]})]}),r.jsx("div",{className:"price-scale-bar",children:(0,r.jsxs)("div",{className:"your-price-marker",style:{left:`${(()=>{if(!p)return 100;let e=p.maxPrice-p.minPrice;return 0===e?100:Math.min(100,Math.max(0,(s-p.minPrice)/e*100))})()}%`},children:[r.jsx("div",{className:"price-marker-pin",children:r.jsx(T,{className:"price-marker-icon"})}),r.jsx("div",{className:"price-marker-label",children:"DU"})]})})]}),p.percentAboveAvg>50&&(0,r.jsxs)("div",{className:"price-position-warning",children:[r.jsx(g,{className:"warning-icon"}),(0,r.jsxs)("div",{className:"warning-content",children:[(0,r.jsxs)("h4",{children:["⚠️ Du bist ",p.percentAboveAvg.toFixed(1),"% teurer als der Durchschnitt"]}),r.jsx("p",{children:"Kunden werden wahrscheinlich zur Konkurrenz wechseln."})]})]})]}),(0,r.jsxs)("div",{className:"market-stats-grid",children:[(0,r.jsxs)("div",{className:"group relative overflow-hidden rounded-xl bg-slate-800/80 border border-slate-700/50 p-6 hover:border-blue-500/50 transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/10 border border-blue-500/20 flex items-center justify-center",children:r.jsx(L,{className:"w-5 h-5 text-blue-400"})}),r.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Gefundene Anbieter"})]}),r.jsx("span",{className:"text-3xl font-bold text-white",children:p.competitorCount})]}),(0,r.jsxs)("div",{className:"group relative overflow-hidden rounded-xl bg-slate-800/80 border border-slate-700/50 p-6 hover:border-green-500/50 transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/10 border border-green-500/20 flex items-center justify-center",children:r.jsx(S.Z,{className:"w-5 h-5 text-green-400"})}),r.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Durchschnittspreis"})]}),r.jsx("span",{className:"text-3xl font-bold text-white",children:P(p.avgPrice)})]}),(0,r.jsxs)("div",{className:"group relative overflow-hidden rounded-xl bg-slate-800/80 border border-slate-700/50 p-6 hover:border-purple-500/50 transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/10 border border-purple-500/20 flex items-center justify-center",children:r.jsx(W,{className:"w-5 h-5 text-purple-400"})}),r.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Preisspanne"})]}),r.jsx("span",{className:"text-3xl font-bold text-white",children:P(p.priceSpread)})]}),(0,r.jsxs)("div",{className:"group relative overflow-hidden rounded-xl bg-slate-800/80 border border-slate-700/50 p-6 hover:border-orange-500/50 transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/10 border border-orange-500/20 flex items-center justify-center",children:r.jsx(w,{className:"w-5 h-5 text-orange-400"})}),r.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Abweichung"})]}),(0,r.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,r.jsxs)("span",{className:"text-3xl font-bold text-orange-400",children:["+",P(p.yourPriceDiff)]}),r.jsx("span",{className:"text-sm text-slate-400",children:"teurer"})]})]})]}),p.newCount>0&&r.jsx("div",{className:"product-status-box",children:(0,r.jsxs)("div",{className:"status-row",children:[r.jsx("span",{className:"status-label",children:"\uD83D\uDCE6 Produktzustand:"}),(0,r.jsxs)("span",{className:"status-value",children:["Neuware: ",p.newCount," Anbieter bieten von"," ",p.newMin&&P(p.newMin)," - ",p.newMax&&P(p.newMax)]})]})}),(0,r.jsxs)("div",{className:"competitors-section-header",children:[(0,r.jsxs)("div",{className:"competitors-section-title",children:[r.jsx("div",{className:"competitors-section-icon",children:r.jsx(V.Z,{className:"h-4 w-4 text-white"})}),(0,r.jsxs)("span",{children:["\uD83D\uDD25 ",p.competitorCount," Wettbewerber im Vergleich"]})]}),(0,r.jsxs)("div",{className:"filter-tabs",children:[r.jsx("button",{className:`filter-tab ${"all"===m?"active":""}`,onClick:()=>h("all"),children:"Alle"}),v>0&&(0,r.jsxs)("button",{className:`filter-tab ${"new"===m?"active":""}`,onClick:()=>h("new"),children:["Nur Neuware (",v,")"]}),y>0&&(0,r.jsxs)("button",{className:`filter-tab ${"refurbished"===m?"active":""}`,onClick:()=>h("refurbished"),children:["Nur Refurbished (",y,")"]})]})]}),r.jsx("div",{className:"competitors-list",children:j.map((e,t)=>{let a=H(e),i=s-e.price;e.price>0&&e.price;let n=0===t,l=t===j.length-1,c="\uD83D\uDFE2";return c=n?"\uD83D\uDFE2":l?"\uD83D\uDD34":"\uD83D\uDFE1",(0,r.jsxs)("div",{className:"competitor-card group relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-slate-700/50 backdrop-blur-sm p-6 hover:border-slate-600/50 hover:shadow-xl hover:shadow-blue-500/10 transition-all duration-300",children:[r.jsx("div",{className:`absolute -top-20 -right-20 w-40 h-40 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 ${n?"bg-green-500/5":l?"bg-red-500/5":"bg-blue-500/5"}`}),(0,r.jsxs)("div",{className:"absolute top-4 left-4 flex items-center gap-2",children:[(0,r.jsxs)("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg shadow-lg ${n?"bg-green-500/20 border-2 border-green-500/50 text-green-400":l?"bg-red-500/20 border-2 border-red-500/50 text-red-400":"bg-blue-500/20 border-2 border-blue-500/50 text-blue-400"}`,children:["#",t+1]}),l&&r.jsx("span",{className:"px-2 py-0.5 rounded-md bg-red-500/20 border border-red-500/30 text-xs font-semibold text-red-400",children:"Teuerster"})]}),r.jsx("div",{className:"pl-16",children:(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center text-2xl shadow-md ${n?"bg-green-500/20 border border-green-500/30":l?"bg-red-500/20 border border-red-500/30":"bg-blue-500/20 border border-blue-500/30"}`,children:c}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"text-lg font-bold text-white mb-1",children:e.source||"Unbekannt"}),r.jsx("p",{className:"text-sm text-slate-400 line-clamp-2 mb-2",children:e.title||"Kein Titel verf\xfcgbar"}),(0,r.jsxs)("div",{className:"competitor-badges",children:[e.rating&&(0,r.jsxs)("span",{className:"competitor-badge badge-rating",children:["⭐ ",e.rating.toFixed(1)," Sterne"]}),"new"===a&&r.jsx("span",{className:"competitor-badge badge-new",children:"Neuware"}),"refurbished"===a&&r.jsx("span",{className:"competitor-badge badge-refurbished",children:"Refurbished"}),"used"===a&&r.jsx("span",{className:"competitor-badge badge-condition",children:"Gebraucht"})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("p",{className:"text-3xl font-bold text-white mb-1",children:P(e.price)}),(0,r.jsxs)("div",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-lg ${i<0?"bg-green-500/10 border border-green-500/20":"bg-red-500/10 border border-red-500/20"}`,children:[i<0?r.jsx(F,{className:"w-3.5 h-3.5 text-green-400"}):r.jsx(S.Z,{className:"w-3.5 h-3.5 text-red-400"}),(0,r.jsxs)("span",{className:`text-xs font-bold ${i<0?"text-green-400":"text-red-400"}`,children:[i<0?"":"+",P(Math.abs(i))]})]})]})]})})]},t)})}),(0,r.jsxs)("div",{className:"rounded-xl bg-slate-800/50 border border-slate-700/50 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${"Eingeschr\xe4nkt zuverl\xe4ssig"===b.label?"bg-yellow-500/10 border border-yellow-500/20":"bg-green-500/10 border border-green-500/20"}`,children:"Eingeschr\xe4nkt zuverl\xe4ssig"===b.label?r.jsx(w,{className:"w-5 h-5 text-yellow-400"}):r.jsx(x,{className:"w-5 h-5 text-green-400"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-white",children:"Datenqualit\xe4t & Aktualit\xe4t"}),(0,r.jsxs)("p",{className:"text-sm text-slate-400",children:["Eingeschr\xe4nkt zuverl\xe4ssig"===b.label?"⚠️ Eingeschr\xe4nkt zuverl\xe4ssig":"✅ Zuverl\xe4ssig"," - Heute aktualisiert"]})]})]}),(0,r.jsxs)("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg mb-4 ${"Eingeschr\xe4nkt zuverl\xe4ssig"===b.label?"bg-yellow-500/10 border border-yellow-500/20":"bg-green-500/10 border border-green-500/20"}`,children:[r.jsx("div",{className:"flex items-center gap-1",children:"Eingeschr\xe4nkt zuverl\xe4ssig"===b.label?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),r.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),r.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-600"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"})]})}),(0,r.jsxs)("span",{className:`text-sm font-bold ${"Eingeschr\xe4nkt zuverl\xe4ssig"===b.label?"text-yellow-400":"text-green-400"}`,children:["Qualit\xe4t: ","Eingeschr\xe4nkt zuverl\xe4ssig"===b.label?"Mittel":"Hoch"]})]}),(0,r.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx(E,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Die Produkte k\xf6nnten unterschiedliche Varianten sein"})]}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx(E,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Einige Angebote k\xf6nnten nicht mehr verf\xfcgbar sein"})]}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx(E,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-slate-300",children:"Preise k\xf6nnen sich schnell \xe4ndern"})]})]}),r.jsx("div",{className:"px-4 py-3 rounded-lg bg-slate-900/50 border border-slate-700/30 mb-4",children:(0,r.jsxs)("p",{className:"text-sm text-slate-400",children:[r.jsx("span",{className:"font-semibold text-slate-300",children:"Das bedeutet:"})," ",b.explanation?`Die Preise zeigen ${b.explanation}. Sie geben einen guten \xdcberblick, sollten aber vor finalen Entscheidungen verifiziert werden.`:"Die Preise geben einen guten \xdcberblick und k\xf6nnen f\xfcr Preisentscheidungen verwendet werden."]})}),(0,r.jsxs)("button",{onClick:()=>u(!0),disabled:t,className:"w-full px-4 py-3 rounded-lg bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600/50 disabled:cursor-not-allowed text-white font-semibold text-sm flex items-center justify-center gap-2 transition-colors",children:[r.jsx(f.Z,{className:`w-4 h-4 ${t?"animate-spin":""}`}),r.jsx("span",{children:"Daten jetzt aktualisieren"})]})]})]}):r.jsx("div",{className:"competitor-content",children:r.jsx("div",{className:"text-center py-8 text-gray-500",children:r.jsx("p",{children:"Keine Wettbewerber-Daten verf\xfcgbar."})})}):r.jsx("div",{className:"competitor-content",children:(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[r.jsx("p",{className:"mb-2",children:"Noch keine Wettbewerber-Daten geladen."}),(0,r.jsxs)("button",{onClick:()=>u(!1),className:"btn-search",children:[r.jsx(R,{className:"h-4 w-4"}),"Wettbewerber suchen"]})]})})}let J=(0,h.Z)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),Q=(0,h.Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);function X({marginData:e,compact:s=!1,onAddCosts:t,onEditCosts:a}){if(!e.has_cost_data)return r.jsx("div",{className:"border p-4",style:{backgroundColor:"#1e293b",borderColor:"#475569"},children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center",style:{backgroundColor:"#334155"},children:r.jsx("span",{className:"text-lg",children:"\uD83D\uDCA1"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-sm font-semibold mb-1",style:{color:"#f1f5f9"},children:"Noch pr\xe4ziser mit Kostendaten"}),(0,r.jsxs)("p",{className:"text-xs mb-3",style:{color:"#cbd5e1"},children:["Die Preisempfehlung funktioniert auch ohne Kosten.",r.jsx("strong",{children:" Mit Kostendaten"})," k\xf6nnen wir zus\xe4tzlich deine ",r.jsx("strong",{children:"Marge optimieren"})," und sicherstellen, dass du immer profitabel bleibst."]}),t&&r.jsx("button",{onClick:t,className:"text-xs font-medium transition",style:{color:"#60a5fa",textDecoration:"none"},children:"Kosten hinterlegen (optional)"})]})]})});let i=e.is_above_min_margin?"text-green-600":e.is_above_break_even?"text-orange-600":"text-red-600",n=e.is_above_min_margin?{backgroundColor:"#064e3b",borderColor:"#10b981"}:e.is_above_break_even?{backgroundColor:"#78350f",borderColor:"#f59e0b"}:{backgroundColor:"#7f1d1d",borderColor:"#ef4444"},l=e.is_above_min_margin?r.jsx(N.Z,{className:"w-5 h-5 text-green-600"}):e.is_above_break_even?r.jsx(g,{className:"w-5 h-5 text-orange-600"}):r.jsx(F,{className:"w-5 h-5 text-red-600"});return s?(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 border-2",style:n,children:[l,(0,r.jsxs)("span",{className:`font-semibold ${i}`,children:[e.margin?.percent.toFixed(1),"% Marge"]}),(0,r.jsxs)("span",{className:"text-sm",style:{color:"#94a3b8"},children:["(€",e.margin?.euro.toFixed(2),")"]})]}):(0,r.jsxs)("div",{className:"margin-content",children:[(0,r.jsxs)("div",{className:"margin-header",children:[(0,r.jsxs)("h3",{className:"margin-title",children:[r.jsx(z,{className:"margin-title-icon"}),"Margin-Analyse"]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[e.margin&&(0,r.jsxs)("div",{className:"margin-success-badge",children:[r.jsx(x,{className:"h-6 w-6",style:{color:"#a7f3d0"}}),(0,r.jsxs)("span",{className:"margin-success-percentage",children:[e.margin.percent.toFixed(1),"%"]})]}),e.has_cost_data&&a&&(0,r.jsxs)("button",{onClick:a,className:"margin-edit-button",title:"Kosten bearbeiten","aria-label":"Kostendaten bearbeiten",children:[r.jsx(J,{className:"h-4 w-4"}),"Bearbeiten"]})]})]}),(0,r.jsxs)("div",{className:"price-grid",children:[(0,r.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-slate-700/50 backdrop-blur-sm p-6 hover:border-slate-600/50 hover:shadow-xl hover:shadow-purple-500/10 transition-all duration-300",children:[r.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-purple-500/5 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,r.jsxs)("div",{className:"relative z-10",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-xl bg-purple-500/10 border border-purple-500/20 mb-4",children:r.jsx(z,{className:"w-6 h-6 text-purple-400"})}),r.jsx("div",{className:"price-box-label",children:"Verkaufspreis"}),(0,r.jsxs)("div",{className:"price-box-value",children:["€",e.selling_price?.toFixed(2)||"0.00"]})]})]}),(0,r.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-slate-700/50 backdrop-blur-sm p-6 hover:border-slate-600/50 hover:shadow-xl hover:shadow-blue-500/10 transition-all duration-300",children:[r.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-blue-500/5 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,r.jsxs)("div",{className:"relative z-10",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-xl bg-blue-500/10 border border-blue-500/20 mb-4",children:r.jsx(Q,{className:"w-6 h-6 text-blue-400"})}),r.jsx("div",{className:"price-box-label",children:"Nettoerl\xf6s"}),(0,r.jsxs)("div",{className:"price-box-value",children:["€",e.net_revenue?.toFixed(2)||"0.00"]}),e.vat_rate&&(0,r.jsxs)("div",{className:"price-box-meta",children:["(nach ",(100*e.vat_rate).toFixed(0),"% MwSt)"]})]})]})]}),e.costs&&(0,r.jsxs)("div",{className:"variable-costs-section",children:[r.jsx("div",{className:"section-label",children:"Variable Kosten:"}),(0,r.jsxs)("div",{className:"costs-list",children:[(0,r.jsxs)("div",{className:"cost-item",children:[(0,r.jsxs)("div",{className:"cost-item-label",children:[r.jsx("span",{className:"cost-item-bullet"}),"Einkauf:"]}),(0,r.jsxs)("div",{className:"cost-item-value",children:["€",e.costs.purchase.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"cost-item",children:[(0,r.jsxs)("div",{className:"cost-item-label",children:[r.jsx("span",{className:"cost-item-bullet"}),"Versand:"]}),(0,r.jsxs)("div",{className:"cost-item-value",children:["€",e.costs.shipping.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"cost-item",children:[(0,r.jsxs)("div",{className:"cost-item-label",children:[r.jsx("span",{className:"cost-item-bullet"}),"Verpackung:"]}),(0,r.jsxs)("div",{className:"cost-item-value",children:["€",e.costs.packaging.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"cost-item",children:[(0,r.jsxs)("div",{className:"cost-item-label",children:[r.jsx("span",{className:"cost-item-bullet"}),"Payment Fee",e.payment_provider&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.payment_provider,")"]}),":"]}),(0,r.jsxs)("div",{className:"cost-item-value",children:["€",e.costs.payment_fee.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"cost-item total-row",children:[r.jsx("div",{className:"cost-item-label",children:"Gesamt:"}),(0,r.jsxs)("div",{className:"cost-item-value",children:["€",e.costs.total_variable.toFixed(2)]})]})]})]}),e.margin&&(0,r.jsxs)("div",{className:"contribution-margin-box",children:[(0,r.jsxs)("div",{className:"contribution-margin-header",children:[r.jsx(x,{className:"contribution-check-icon"}),r.jsx("span",{className:"contribution-label",children:"Deckungsbeitrag I:"})]}),(0,r.jsxs)("div",{className:"contribution-amount",children:["€",e.margin.euro.toFixed(2)]}),(0,r.jsxs)("div",{className:"contribution-percentage",children:["(",e.margin.percent.toFixed(1),"%)"]})]}),(0,r.jsxs)("div",{className:"insights-grid",children:[e.break_even_price&&(0,r.jsxs)("div",{className:"insight-box warning",children:[(0,r.jsxs)("div",{className:"insight-header",children:[r.jsx(g,{className:"insight-icon warning"}),r.jsx("span",{className:"insight-label",children:"Break-Even:"})]}),(0,r.jsxs)("div",{className:"insight-value",children:["€",e.break_even_price.toFixed(2)]})]}),e.recommended_min_price&&(0,r.jsxs)("div",{className:"insight-box success",children:[(0,r.jsxs)("div",{className:"insight-header",children:[r.jsx(x,{className:"insight-icon success"}),r.jsx("span",{className:"insight-label",children:"Min. empfohlen (20%):"})]}),(0,r.jsxs)("div",{className:"insight-value",children:["€",e.recommended_min_price.toFixed(2)]})]})]}),!e.is_above_break_even&&(0,r.jsxs)("div",{className:"health-banner",style:{background:"linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)",borderColor:"#f87171"},children:[r.jsx(g,{className:"health-icon",style:{color:"#dc2626"}}),(0,r.jsxs)("div",{className:"health-content",children:[r.jsx("div",{className:"health-title",style:{color:"#991b1b"},children:"❌ KRITISCH: Unter Break-Even"}),r.jsx("div",{className:"health-description",style:{color:"#7f1d1d"},children:"Dieser Preis liegt unter deinen Kosten. Du machst Verlust bei jedem Verkauf!"})]})]}),e.is_above_break_even&&!e.is_above_min_margin&&(0,r.jsxs)("div",{className:"health-banner",style:{background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",borderColor:"#fbbf24"},children:[r.jsx(g,{className:"health-icon",style:{color:"#f59e0b"}}),(0,r.jsxs)("div",{className:"health-content",children:[r.jsx("div",{className:"health-title",style:{color:"#92400e"},children:"⚠️ NIEDRIGE MARGE"}),r.jsx("div",{className:"health-description",style:{color:"#78350f"},children:"Marge liegt unter der empfohlenen Mindestmarge von 20%. Ber\xfccksichtige Fixkosten und unerwartete Ausgaben."})]})]}),e.is_above_min_margin&&(0,r.jsxs)("div",{className:"health-banner",children:[r.jsx(x,{className:"health-icon"}),(0,r.jsxs)("div",{className:"health-content",children:[r.jsx("div",{className:"health-title",children:"✅ Gesunde Marge"}),r.jsx("div",{className:"health-description",children:"Marge \xfcber 20% - gute Profitabilit\xe4t! Genug Puffer f\xfcr Fixkosten und Gewinn."})]})]})]})}t(3335);let Y=(0,h.Z)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),ee=(0,h.Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function es({isOpen:e,onClose:s,productId:t,productTitle:i,currentPrice:n,shopId:l,onSave:c}){let[o,m]=(0,a.useState)({purchase_cost:0,shipping_cost:0,packaging_cost:0,payment_provider:"stripe",country_code:"DE",category:void 0}),[h,x]=(0,a.useState)(!1),[u,p]=(0,a.useState)(!1),[g,b]=(0,a.useState)(!1),[f,j]=(0,a.useState)(null),[v,y]=(0,a.useState)(null),[N,w]=(0,a.useState)(!1),[k,D]=(0,a.useState)(null);(0,a.useEffect)(()=>{e&&t&&P()},[e,t]);let P=async()=>{try{x(!0),y(null);let e=await (0,d.Rd)(t);e?(D({purchase_cost:e.purchase_cost,shipping_cost:e.shipping_cost,packaging_cost:e.packaging_cost,payment_provider:e.payment_provider,country_code:e.country_code,category:e.category}),m({purchase_cost:e.purchase_cost,shipping_cost:e.shipping_cost,packaging_cost:e.packaging_cost,payment_provider:e.payment_provider,country_code:e.country_code,category:e.category}),w(!1)):(D(null),m({purchase_cost:0,shipping_cost:0,packaging_cost:0,payment_provider:"stripe",country_code:"DE",category:void 0}),w(!0),y(null))}catch(e){console.error("Failed to load costs:",e),e?.response?.status!==404&&e?.status!==404?y("Fehler beim Laden der Kosten"):(D(null),w(!0),y(null))}finally{x(!1)}};(0,a.useEffect)(()=>{o.category&&M(o.category)},[o.category]);let M=async e=>{try{let s=await (0,d.$m)(e);j(s)}catch(e){console.error("Failed to load category defaults:",e)}},F=async()=>{if(!n||!o.category){y("Bitte w\xe4hle zuerst eine Kategorie");return}x(!0),y(null);try{let e=await (0,d.R5)(n,o.category,o.country_code);m(s=>({...s,purchase_cost:e.estimated_purchase_cost,shipping_cost:e.estimated_shipping_cost,packaging_cost:e.estimated_packaging_cost})),b(!0)}catch(e){console.error("Failed to estimate costs:",e),y("Fehler beim Sch\xe4tzen der Kosten")}finally{x(!1)}},A=async()=>{if(o.purchase_cost<=0){y("Einkaufspreis muss gr\xf6\xdfer als 0 sein");return}p(!0),y(null);try{k?await (0,d._M)(t,o):await (0,d.QJ)(t,o),await c(o),await P(),w(!0)}catch(e){console.error("Failed to save costs:",e),y(e?.message||e?.detail||"Fehler beim Speichern der Kosten")}finally{p(!1)}};if(!e)return null;let z=o.purchase_cost+o.shipping_cost+o.packaging_cost,$=n?(n/1.19-z)/(n/1.19)*100:0;return(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:s}),r.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between p-6 border-b sticky top-0 bg-white z-10",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Kosten hinterlegen"}),r.jsx("p",{className:"text-sm text-gray-600",children:i})]}),r.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition",children:r.jsx(C,{className:"w-6 h-6"})})]}),v&&r.jsx("div",{className:"mx-6 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm",children:v}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[k&&!N&&(0,r.jsxs)("div",{className:"bg-green-50 border-2 border-green-300 rounded-xl p-6 mb-8 shadow-md",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-green-800 mb-1",children:"✅ Gespeicherte Kosten"}),r.jsx("p",{className:"text-sm text-green-700",children:"Klicke Bearbeiten um Werte anzupassen"})]}),(0,r.jsxs)("button",{onClick:()=>w(!0),className:"px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 flex items-center gap-2 shadow-md transition-all hover:scale-105",title:"Kosten bearbeiten",children:[r.jsx(Y,{className:"w-4 h-4"}),"Bearbeiten"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Einkauf:"}),(0,r.jsxs)("span",{className:"font-bold ml-2 text-gray-900",children:["€",k.purchase_cost.toFixed(2)]})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Versand:"}),(0,r.jsxs)("span",{className:"font-bold ml-2 text-gray-900",children:["€",k.shipping_cost.toFixed(2)]})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Verpackung:"}),(0,r.jsxs)("span",{className:"font-bold ml-2 text-gray-900",children:["€",k.packaging_cost.toFixed(2)]})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Payment:"}),r.jsx("span",{className:"font-bold ml-2 text-gray-900",children:k.payment_provider})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"MwSt:"}),r.jsx("span",{className:"font-bold ml-2 text-gray-900",children:k.country_code})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Kategorie:"}),r.jsx("span",{className:"font-bold ml-2 text-gray-900",children:k.category||"N/A"})]})]}),r.jsx("div",{className:"pt-4 border-t border-green-300",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-900",children:"Gesamt Kosten:"}),(0,r.jsxs)("span",{className:"text-2xl font-bold text-green-600",children:["€",(k.purchase_cost+k.shipping_cost+k.packaging_cost).toFixed(2)]})]})})]}),(N||!k)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategorie"}),(0,r.jsxs)("select",{value:o.category||"",onChange:e=>m(s=>({...s,category:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Kategorie w\xe4hlen..."}),["fashion","electronics","beauty","home","food"].map(e=>r.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),f&&r.jsx("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[r.jsx(E,{className:"w-4 h-4 text-blue-600 mt-0.5"}),(0,r.jsxs)("div",{className:"text-sm text-blue-900",children:[(0,r.jsxs)("p",{className:"font-medium",children:["Typisch f\xfcr ",o.category,":"]}),(0,r.jsxs)("p",{children:["Versand: €",f.shipping_estimate.toFixed(2),", Verpackung: €",f.packaging_estimate.toFixed(2)]}),r.jsx("button",{onClick:()=>{f&&m(e=>({...e,shipping_cost:f.shipping_estimate,packaging_cost:f.packaging_estimate}))},className:"text-blue-600 hover:text-blue-800 font-medium mt-1 underline",children:"→ Werte \xfcbernehmen"})]})]})})]}),n&&o.category&&(0,r.jsxs)("button",{onClick:F,disabled:h,className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition disabled:opacity-50 disabled:cursor-not-allowed",children:[h?r.jsx(ee,{className:"w-4 h-4 animate-spin"}):r.jsx(S.Z,{className:"w-4 h-4"}),r.jsx("span",{children:h?"Sch\xe4tze...":`Kosten sch\xe4tzen (Verkaufspreis: €${n.toFixed(2)})`})]}),g&&r.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800",children:"⚠️ Dies sind Sch\xe4tzungen basierend auf Branchendurchschnitten. Bitte mit echten Daten ersetzen!"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD83D\uDCB0 Einkaufspreis (netto) *"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("input",{type:"number",step:"0.01",min:"0",value:o.purchase_cost||"",onChange:e=>m(s=>({...s,purchase_cost:parseFloat(e.target.value)||0})),className:"w-full px-4 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",required:!0}),r.jsx("span",{className:"absolute right-3 top-2.5 text-gray-500",children:"€"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD83D\uDCE6 Versandkosten (pro St\xfcck)"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("input",{type:"number",step:"0.01",min:"0",value:o.shipping_cost||"",onChange:e=>m(s=>({...s,shipping_cost:parseFloat(e.target.value)||0})),className:"w-full px-4 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"}),r.jsx("span",{className:"absolute right-3 top-2.5 text-gray-500",children:"€"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD83D\uDCE6 Verpackung (pro St\xfcck)"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("input",{type:"number",step:"0.01",min:"0",value:o.packaging_cost||"",onChange:e=>m(s=>({...s,packaging_cost:parseFloat(e.target.value)||0})),className:"w-full px-4 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"}),r.jsx("span",{className:"absolute right-3 top-2.5 text-gray-500",children:"€"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD83D\uDCB3 Payment Provider"}),r.jsx("select",{value:o.payment_provider,onChange:e=>m(s=>({...s,payment_provider:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[{value:"stripe",label:"Stripe (2.9% + €0.30)"},{value:"paypal",label:"PayPal (2.49% + €0.35)"},{value:"klarna",label:"Klarna (4.5%)"},{value:"custom",label:"Custom"}].map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD83C\uDF0D Land (MwSt)"}),(0,r.jsxs)("select",{value:o.country_code,onChange:e=>m(s=>({...s,country_code:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"DE",children:"Deutschland (19%)"}),r.jsx("option",{value:"AT",children:"\xd6sterreich (20%)"}),r.jsx("option",{value:"CH",children:"Schweiz (7.7%)"}),r.jsx("option",{value:"GB",children:"UK (20%)"}),r.jsx("option",{value:"US",children:"USA (0%)"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Summe variable Kosten:"}),(0,r.jsxs)("span",{className:"font-semibold",children:["€",z.toFixed(2)]})]}),n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Aktueller Preis:"}),(0,r.jsxs)("span",{className:"font-semibold",children:["€",n.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[r.jsx("span",{children:"Gesch\xe4tzte Marge:"}),(0,r.jsxs)("span",{className:$>=20?"text-green-600":"text-orange-600",children:[$.toFixed(1),"%"]})]})]})]})]})]}),r.jsx("div",{className:"flex gap-3 p-6 border-t bg-gray-50 sticky bottom-0",children:k&&N?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>{k&&m({...k}),w(!1),y(null)},disabled:u,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition disabled:opacity-50 flex items-center justify-center gap-2",children:[r.jsx(C,{className:"w-4 h-4"}),"Abbrechen"]}),r.jsx("button",{onClick:A,disabled:u||0===o.purchase_cost,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:u?(0,r.jsxs)(r.Fragment,{children:[r.jsx(ee,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:"Speichern..."})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(_.Z,{className:"w-4 h-4"}),r.jsx("span",{children:"Speichern"})]})})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{onClick:s,disabled:u,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition disabled:opacity-50",children:k?"Schlie\xdfen":"Abbrechen"}),!k&&r.jsx("button",{onClick:A,disabled:u||0===o.purchase_cost,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:u?(0,r.jsxs)(r.Fragment,{children:[r.jsx(ee,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:"Speichern..."})]}):r.jsx("span",{children:"Kosten erfassen"})})]})})]})})]})}var et=t(4898),er=t(7279);let ea=(0,h.Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var ei=t(575);function en(){let e=(0,n.usePathname)(),s=(0,n.useSearchParams)().get("product_id"),[t,o]=(0,a.useState)(s?Number(s):1),[m,h]=(0,a.useState)(0),[x,p]=(0,a.useState)(null),[g,b]=(0,a.useState)(!1),[f,j]=(0,a.useState)(""),[v,y]=(0,a.useState)({margin:!1,price:!1,competitor:!1}),[N,w]=(0,a.useState)({margin:!1,price:!1,competitor:!1}),{isDemoMode:k,currentShop:_}=(0,c.L)(),D=e=>{y(s=>({...s,[e]:!s[e]}))};return(0,a.useEffect)(()=>{if(!t||!_){console.log("[RecommendationsPage] Missing productId or currentShop, skipping load");return}(async()=>{try{console.log("[RecommendationsPage] Loading product data:",{productId:t,shopId:_.id,isDemoMode:k});let e=await (0,d.t2)();console.log("[RecommendationsPage] Products received:",e.length,"First ID type:",typeof e[0]?.id),console.log("[RecommendationsPage] Searching for:",t,"Type:",typeof t);let s=e.find(e=>String(e.id)===String(t));if(!s){console.error("[RecommendationsPage] Product not found in current shop",{productId:t,productIdType:typeof t,currentShop:_,productsCount:e.length,availableIds:e.slice(0,5).map(e=>({id:e.id,idType:typeof e.id}))}),p({has_cost_data:!1,error:`Produkt ${t} nicht im aktuellen Shop gefunden. Bitte Shop wechseln oder Produkt-ID pr\xfcfen.`}),h(0),j(`Product ${t} (nicht gefunden)`);return}if(console.log("[RecommendationsPage] Product found:",{id:s.id,title:s.title,price:s.price}),h(s.price||0),j(s.title||s.name||`Product ${t}`),s.price&&s.price>0)try{let e=await (0,d.ku)(t.toString(),s.price);p(e)}catch(e){p({has_cost_data:!1})}}catch(e){console.error("[RecommendationsPage] Fehler beim Laden der Produktdaten:",e),p({has_cost_data:!1,error:"Fehler beim Laden der Produktdaten."})}})()},[t,_?.id,k]),(0,a.useEffect)(()=>{let e=e=>{console.log("[RecommendationsPage] Shop switched event received:",e.detail),t&&setTimeout(()=>{(async()=>{try{let e=(await (0,d.t2)()).find(e=>String(e.id)===String(t));e?(console.log("[RecommendationsPage] Product reloaded after shop switch:",{id:e.id,title:e.title,price:e.price}),h(e.price||0),j(e.title||e.name||`Product ${t}`)):p({has_cost_data:!1,error:`Produkt ${t} nicht im neuen Shop gefunden.`})}catch(e){console.error("[RecommendationsPage] Error reloading product after shop switch:",e)}})()},300)};return window.addEventListener("shop-switched",e),()=>window.removeEventListener("shop-switched",e)},[t]),(0,a.useEffect)(()=>{let e=e=>{e.target.closest(".info-tooltip-button")||w({margin:!1,price:!1,competitor:!1})};if(N.margin||N.price||N.competitor)return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[N]),(0,r.jsxs)("div",{className:"min-h-screen flex recommendations-page",style:{backgroundColor:"#0f172a"},children:[(0,r.jsxs)("aside",{className:"w-80 border-r p-6 overflow-y-auto shadow-sm",style:{background:"linear-gradient(to bottom, #1e293b, #0f172a, #1e293b)",borderColor:"#334155"},children:[(0,r.jsxs)("div",{className:"px-4 pt-6 pb-4 border-b border-gray-800/30",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsxs)("div",{className:"relative group cursor-pointer",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/25 transition-all duration-300 group-hover:shadow-xl group-hover:shadow-blue-500/40 group-hover:scale-105",children:(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCA1"})}),(0,r.jsx)("div",{className:"absolute inset-0 bg-blue-500/10 blur-xl rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-white tracking-tight leading-none",children:"PriceIQ"}),(0,r.jsx)("p",{className:"text-[10px] font-semibold text-blue-400 uppercase tracking-widest mt-0.5",children:"Pricing Intelligence"})]})]}),(0,r.jsx)("div",{className:"mb-5",children:(0,r.jsx)(l.D,{})})]}),(0,r.jsxs)("nav",{className:"space-y-1 px-2",children:[(0,r.jsx)("div",{className:"px-3 mb-2",children:(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Navigation"})}),(0,r.jsxs)(i.rU,{href:"/",className:`
              group flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200
              ${"/"===e||"/de"===e||"/en"===e?"bg-blue-500/10 text-blue-400 shadow-sm":"text-gray-400 hover:text-gray-200 hover:bg-slate-800/50"}
            `,children:[(0,r.jsx)("div",{className:`
              p-1.5 rounded-md transition-colors
              ${"/"===e||"/de"===e||"/en"===e?"bg-blue-500/20":"bg-slate-800/50 group-hover:bg-slate-800"}
            `,children:(0,r.jsx)(et.Z,{className:"w-4 h-4"})}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Dashboard"}),("/"===e||"/de"===e||"/en"===e)&&(0,r.jsx)("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-blue-400"})]}),(0,r.jsxs)(i.rU,{href:"/products",className:`
              group flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200
              ${e?.includes("/products")?"bg-blue-500/10 text-blue-400 shadow-sm":"text-gray-400 hover:text-gray-200 hover:bg-slate-800/50"}
            `,children:[(0,r.jsx)("div",{className:`
              p-1.5 rounded-md transition-colors
              ${e?.includes("/products")?"bg-blue-500/20":"bg-slate-800/50 group-hover:bg-slate-800"}
            `,children:(0,r.jsx)(A.Z,{className:"w-4 h-4"})}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Produkte"}),e?.includes("/products")&&(0,r.jsx)("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-blue-400"})]}),(0,r.jsxs)(i.rU,{href:"/recommendations",className:`
              group flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200
              ${e?.includes("/recommendations")?"bg-blue-500/10 text-blue-400 shadow-sm":"text-gray-400 hover:text-gray-200 hover:bg-slate-800/50"}
            `,children:[(0,r.jsx)("div",{className:`
              p-1.5 rounded-md transition-colors
              ${e?.includes("/recommendations")?"bg-blue-500/20":"bg-slate-800/50 group-hover:bg-slate-800"}
            `,children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Empfehlungen"}),e?.includes("/recommendations")&&(0,r.jsx)("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-blue-400"})]})]})]}),(0,r.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-8 py-8",children:(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"recommendations-header",children:[(0,r.jsxs)("div",{className:"header-icon-container",children:[(0,r.jsx)("div",{className:"header-main-icon",children:(0,r.jsx)($,{className:"h-10 w-10 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"header-title",children:"Produkt-Analysen"}),(0,r.jsx)("p",{className:"header-subtitle",children:"Vollst\xe4ndige Analyse f\xfcr optimale Preisentscheidungen"})]})]}),(0,r.jsxs)("div",{className:"product-info-card",children:[(0,r.jsx)("div",{className:"product-icon",children:(0,r.jsx)(A.Z,{className:"h-8 w-8 text-white"})}),(0,r.jsxs)("div",{className:"product-details",children:[(0,r.jsx)("h2",{children:f||`Produkt ${t}`}),m>0&&(0,r.jsxs)("p",{className:"product-price-display",children:["Aktueller Preis: ",(0,r.jsxs)("strong",{children:[m.toFixed(2)," €"]})]})]}),(0,r.jsxs)(i.rU,{href:"/",className:"back-button ml-auto",children:[(0,r.jsx)(er.Z,{className:"h-4 w-4"}),"Zur\xfcck"]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[m>0&&x&&(0,r.jsxs)("div",{className:"collapsible-card",children:[(0,r.jsxs)("div",{className:"collapsible-header",onClick:()=>D("margin"),children:[(0,r.jsx)("div",{className:"section-icon icon-margin",children:(0,r.jsx)(z,{className:"h-8 w-8 text-white"})}),(0,r.jsxs)("div",{className:"section-content",children:[(0,r.jsxs)("h3",{className:"section-title",children:["Margen-Analyse",(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),w(e=>({...e,margin:!e.margin}))},className:"info-tooltip-button",children:[(0,r.jsx)(E,{className:"w-4 h-4 transition-colors",style:{color:"#94a3b8"}}),N.margin&&(0,r.jsxs)("div",{className:"info-tooltip-content",children:[(0,r.jsx)("h4",{children:"Was passiert hier?"}),(0,r.jsx)("p",{children:"Die Margen-Analyse zeigt dir, ob dein aktueller Preis \xfcber deinen Kosten liegt und wie viel Gewinn du pro Verkauf machst."}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Wichtig:"})," Bevor du Preise \xe4nderst, solltest du immer pr\xfcfen, dass du nicht unter deine Kosten verkaufst!"]}),(0,r.jsx)("p",{children:"Hier kannst du auch Kosten f\xfcr dein Produkt hinterlegen (Einkaufspreis, Versand, Verpackung, etc.)."})]})]})]}),(0,r.jsx)("p",{className:"section-subtitle",children:"Pr\xfcfe deine Kosten und Margen vor Preis\xe4nderungen"})]}),v.margin?(0,r.jsx)(ea,{className:"chevron-arrow"}):(0,r.jsx)(ei.Z,{className:"chevron-arrow"})]}),v.margin&&(0,r.jsx)("div",{className:"px-8 pb-6",children:(0,r.jsx)(X,{marginData:x||{has_cost_data:!1},onAddCosts:()=>b(!0),onEditCosts:()=>b(!0)})})]}),(0,r.jsxs)("div",{className:"collapsible-card",children:[(0,r.jsxs)("div",{className:"collapsible-header",onClick:()=>D("price"),children:[(0,r.jsx)("div",{className:"section-icon icon-recommendation",children:(0,r.jsx)(z,{className:"h-8 w-8 text-white"})}),(0,r.jsxs)("div",{className:"section-content",children:[(0,r.jsxs)("h3",{className:"section-title",children:["Preisempfehlung",(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),w(e=>({...e,price:!e.price}))},className:"info-tooltip-button",children:[(0,r.jsx)(E,{className:"w-4 h-4 transition-colors",style:{color:"#94a3b8"}}),N.price&&(0,r.jsxs)("div",{className:"info-tooltip-content",children:[(0,r.jsx)("h4",{children:"Was passiert hier?"}),(0,r.jsx)("p",{children:"Unsere KI analysiert verschiedene Faktoren wie Nachfrage, Lagerbestand, Wettbewerbspreise und deine Kosten, um dir eine optimale Preisempfehlung zu geben."}),(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Die Empfehlung ber\xfccksichtigt:"})}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"Verkaufsdaten der letzten 30 Tage"}),(0,r.jsx)("li",{children:"Aktuelle Preise deiner Konkurrenten"}),(0,r.jsx)("li",{children:"Deine Lagerbest\xe4nde"}),(0,r.jsx)("li",{children:"Deine Kosten und Margen"})]}),(0,r.jsx)("p",{children:"Du kannst die Empfehlung direkt anwenden oder erst die Details ansehen."})]})]})]}),(0,r.jsx)("p",{className:"section-subtitle",children:"KI-basierte Preisempfehlung basierend auf Marktdaten"})]}),v.price?(0,r.jsx)(ea,{className:"chevron-arrow"}):(0,r.jsx)(ei.Z,{className:"chevron-arrow"})]}),v.price&&(0,r.jsx)("div",{className:"px-8 pb-6",children:(0,r.jsx)("div",{className:"rounded-lg border p-6 transition-all duration-300 ease-in-out",style:{backgroundColor:"#1e293b",borderColor:"#475569"},children:(0,r.jsx)(q,{productId:t})})})]}),m>0&&(0,r.jsxs)("div",{className:"collapsible-card",children:[(0,r.jsxs)("div",{className:"collapsible-header",onClick:()=>D("competitor"),children:[(0,r.jsx)("div",{className:"section-icon icon-competitor",children:(0,r.jsx)(B,{className:"h-8 w-8 text-white"})}),(0,r.jsxs)("div",{className:"section-content",children:[(0,r.jsxs)("h3",{className:"section-title",children:["Wettbewerbsanalyse",(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),w(e=>({...e,competitor:!e.competitor}))},className:"info-tooltip-button",children:[(0,r.jsx)(E,{className:"w-4 h-4 transition-colors",style:{color:"#94a3b8"}}),N.competitor&&(0,r.jsxs)("div",{className:"info-tooltip-content",children:[(0,r.jsx)("h4",{children:"Was passiert hier?"}),(0,r.jsx)("p",{children:"Die Wettbewerbsanalyse zeigt dir, wie dein Preis im Vergleich zu anderen Anbietern steht."}),(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Du siehst:"})}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"Preise deiner Konkurrenten (Neuware, Gebraucht, etc.)"}),(0,r.jsx)("li",{children:"Deine Marktposition (g\xfcnstigster, teuerster, Durchschnitt)"}),(0,r.jsx)("li",{children:"Durchschnittspreis und Preisspanne"}),(0,r.jsx)("li",{children:"Datenqualit\xe4t der Analyse"})]}),(0,r.jsx)("p",{children:"Nutze diese Informationen, um deine Preise strategisch anzupassen."})]})]})]}),(0,r.jsx)("p",{className:"section-subtitle",children:"Vergleiche deine Preise mit der Konkurrenz"})]}),v.competitor?(0,r.jsx)(ea,{className:"chevron-arrow"}):(0,r.jsx)(ei.Z,{className:"chevron-arrow"})]}),v.competitor&&(0,r.jsx)("div",{className:"px-8 pb-6",children:(0,r.jsx)("div",{className:"rounded-lg border p-6 transition-all duration-300 ease-in-out",style:{backgroundColor:"#1e293b",borderColor:"#475569"},children:(0,r.jsx)(O,{productId:t,currentPrice:m})})})]})]})]})})}),(0,r.jsx)(es,{isOpen:g,onClose:()=>b(!1),productId:t.toString(),productTitle:f||`Product ${t}`,currentPrice:m,shopId:_?.id?.toString()||"demo",onSave:async e=>{try{if(await (0,d.QJ)(t.toString(),e),b(!1),m>0){let e=await (0,d.ku)(t.toString(),m);p(e)}}catch(e){throw console.error("Fehler beim Speichern der Kosten:",e),e}}})]})}function el(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen p-8",children:"Lade..."}),children:(0,r.jsx)(en,{})})}},9173:(e,s,t)=>{"use strict";let r;t.r(s),t.d(s,{$$typeof:()=>d,__esModule:()=>o,default:()=>p,generateImageMetadata:()=>x,generateMetadata:()=>h,generateViewport:()=>u}),t(1);var a=t(6915),i=t(1907),n=t(8097),l=t(4580);let c=(0,t(4006).createProxy)(String.raw`C:\Users\Kujti\Desktop\Trading Tools\MVP PRICE\frontend\app\[locale]\recommendations\page.tsx`),{__esModule:o,$$typeof:d}=c,m=c.default;r="function"==typeof m?new Proxy(m,{apply:(e,s,t)=>{let r,c,o;try{let e=l.requestAsyncStorage.getStore();r=(0,a.h)((0,i.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("sentry-trace")]),()=>void 0),c=(0,a.h)((0,i.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("baggage")]),()=>void 0),o=(0,i.x)([e,"optionalAccess",e=>e.headers])}catch(e){}return n.wrapServerComponentWithSentry(e,{componentRoute:"/[locale]/recommendations",componentType:"Unknown",sentryTraceHeader:r,baggageHeader:c,headers:o}).apply(s,t)}}):m;let h=void 0,x=void 0,u=void 0,p=r},3956:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>o});var r=t(550),a=t(6566),i=t(1286),n=t.n(i),l=t(4152),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o=["",{children:["[locale]",{children:["recommendations",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9173)),"C:\\Users\\Kujti\\Desktop\\Trading Tools\\MVP PRICE\\frontend\\app\\[locale]\\recommendations\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,7228)),"C:\\Users\\Kujti\\Desktop\\Trading Tools\\MVP PRICE\\frontend\\app\\[locale]\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,8569)),"C:\\Users\\Kujti\\Desktop\\Trading Tools\\MVP PRICE\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,8324,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Kujti\\Desktop\\Trading Tools\\MVP PRICE\\frontend\\app\\[locale]\\recommendations\\page.tsx"],m="/[locale]/recommendations/page",h={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/[locale]/recommendations/page",pathname:"/[locale]/recommendations",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4965:(e,s,t)=>{Promise.resolve().then(t.bind(t,3156))},7279:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(3465).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},575:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(3465).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},4400:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(3465).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},476:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(3465).Z)("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]])},9601:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(3465).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},66:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(3465).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},3335:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[565,901,188,79,439],()=>t(3956));module.exports=r})();
//# sourceMappingURL=page.js.map